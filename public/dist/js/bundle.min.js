!function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}}()({1:[function(t,e,n){function r(){}e.exports=function(t,e,n){var i=!1;return n=n||r,o.count=t,0===t?e():o;function o(t,r){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=n):0!==o.count||i||e(null,r)}}},{}],2:[function(t,e,n){e.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),a=e,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},{}],3:[function(t,e,n){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}},{}],4:[function(t,e,n){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;n.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,r,i,o,a,s=.75*t.length,u=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),f=new Uint8Array(l);for(n=0;n<u;n+=4)r=e[t.charCodeAt(n)],i=e[t.charCodeAt(n+1)],o=e[t.charCodeAt(n+2)],a=e[t.charCodeAt(n+3)],f[c++]=r<<2|i>>4,f[c++]=(15&i)<<4|o>>2,f[c++]=(3&o)<<6|63&a;return l}}()},{}],5:[function(t,e,n){(function(t){var n=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function a(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}t[e]=r}}}function s(t,e){e=e||{};var r=new n;a(t);for(var i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}function u(t,e){return a(t),new Blob(t,e||{})}e.exports=r?i?t.Blob:u:o?s:void 0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,n){},{}],7:[function(t,e,n){(function(t){var n=Math.floor(16777215*Math.random()),r=a.index=parseInt(16777215*Math.random(),10),i=(void 0===t||"number"!=typeof t.pid?Math.floor(1e5*Math.random()):t.pid)%65535,o=function(t){return!(null==t||!t.constructor||"function"!=typeof t.constructor.isBuffer||!t.constructor.isBuffer(t))};function a(t){if(!(this instanceof a))return new a(t);if(t&&(t instanceof a||"ObjectID"===t._bsontype))return t;var e;if(o(t)||Array.isArray(t)&&12===t.length)e=Array.prototype.slice.call(t);else if("string"==typeof t){if(12!==t.length&&!a.isValid(t))throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");e=c(t)}else/number|undefined/.test(typeof t)&&(e=c(s(t)));Object.defineProperty(this,"id",{enumerable:!0,get:function(){return String.fromCharCode.apply(this,e)}}),Object.defineProperty(this,"str",{get:function(){return e.map(u.bind(this,2)).join("")}})}function s(t){return"number"!=typeof t&&(t=Date.now()/1e3),u(8,t=parseInt(t,10)%4294967295)+u(6,n)+u(4,i)+u(6,r=(r+1)%16777215)}function u(t,e){return(e=e.toString(16)).length===t?e:"00000000".substring(e.length,t)+e}function c(t){var e=0,n=[];if(24===t.length)for(;e<24;n.push(parseInt(t[e]+t[e+1],16)),e+=2);else if(12===t.length)for(;e<12;n.push(t.charCodeAt(e)),e++);return n}e.exports=a,a.generate=s,a.default=a,a.createFromTime=function(t){return new a(u(8,t=parseInt(t,10)%4294967295)+"0000000000000000")},a.createFromHexString=function(t){if(!a.isValid(t))throw new Error("Invalid ObjectID hex string");return new a(t)},a.isValid=function(t){return!!t&&/^[0-9A-F]{24}$/i.test(t.toString())},a.setMachineID=function(t){var e;if("string"==typeof t){if(e=parseInt(t,16),isNaN(e)){t=("000000"+t).substr(-7,6),e="";for(var r=0;r<6;r++)e+=t.charCodeAt(r)}}else/number|undefined/.test(typeof t)&&(e=0|t);n=16777215&e},a.getMachineID=function(){return n},a.prototype={_bsontype:"ObjectID",constructor:a,toHexString:function(){return this.str},equals:function(t){return!!t&&this.str===t.toString()},getTimestamp:function(){return new Date(1e3*parseInt(this.str.substr(0,8),16))}},a.prototype.inspect=function(){return"ObjectID("+this+")"},a.prototype.toJSON=a.prototype.toHexString,a.prototype.toString=a.prototype.toHexString}).call(this,t("_process"))},{_process:33}],8:[function(t,e,n){var r=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},{}],9:[function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}void 0!==e&&(e.exports=r),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],10:[function(t,e,n){e.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],11:[function(t,e,n){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":12,"engine.io-parser":22}],12:[function(t,e,n){(function(n){var r=t("./transports/index"),i=t("component-emitter"),o=t("debug")("engine.io-client:socket"),a=t("indexof"),s=t("engine.io-parser"),u=t("parseuri"),c=t("parseqs");function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=u(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=u(e.host).host),this.secure=null!=e.secure?e.secure:n.location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(n.location?location.hostname:"localhost"),this.port=e.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode;var r="object"==typeof n&&n;r.global===r&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,i(l.prototype),l.protocol=s.protocol,l.Socket=l,l.Transport=t("./transport"),l.transports=t("./transports/index"),l.parser=t("engine.io-parser"),l.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=s.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},l.prototype.probe=function(t){o('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),p(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())})}else{o('probe transport "%s" failed',t);var a=new Error("probe error");a.transport=e.name,r.emit("upgradeError",a)}}))}function a(){n||(n=!0,p(),e.close(),e=null)}function s(n){var i=new Error("probe error: "+n);i.transport=e.name,a(),o('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",i)}function u(){s("transport closed")}function c(){s("socket closed")}function f(t){e&&t.name!==e.name&&(o('"%s" works - aborting "%s"',t.name,e.name),a())}function p(){e.removeListener("open",i),e.removeListener("error",s),e.removeListener("close",u),r.removeListener("close",c),r.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,e.once("open",i),e.once("error",s),e.once("close",u),this.once("close",c),this.once("upgrading",f),e.open()},l.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},l.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}function e(){t.onClose("forced close"),o("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},l.prototype.onError=function(t){o("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~a(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports/index":14,"component-emitter":9,debug:20,"engine.io-parser":22,indexof:28,parseqs:31,parseuri:32}],13:[function(t,e,n){var r=t("engine.io-parser"),i=t("component-emitter");function o(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}e.exports=o,i(o.prototype),o.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(t){this.emit("packet",t)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":22}],14:[function(t,e,n){(function(e){var r=t("xmlhttprequest-ssl"),i=t("./polling-xhr"),o=t("./polling-jsonp"),a=t("./websocket");n.polling=function(t){var n=!1,a=!1,s=!1!==t.jsonp;if(e.location){var u="https:"===location.protocol,c=location.port;c||(c=u?443:80),n=t.hostname!==location.hostname||c!==t.port,a=t.secure!==u}if(t.xdomain=n,t.xscheme=a,"open"in new r(t)&&!t.forceJSONP)return new i(t);if(!s)throw new Error("JSONP disabled");return new o(t)},n.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,"xmlhttprequest-ssl":19}],15:[function(t,e,n){(function(n){var r=t("./polling"),i=t("component-inherit");e.exports=c;var o,a=/\n/g,s=/\\n/g;function u(){}function c(t){r.call(this,t),this.query=this.query||{},o||(n.___eio||(n.___eio=[]),o=n.___eio),this.index=o.length;var e=this;o.push(function(t){e.onData(t)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=u)},!1)}i(c,r),c.prototype.supportsBinary=!1,c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},c.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},c.prototype.doWrite=function(t,e){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=u,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function c(){l(),e()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(t)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),t=t.replace(s,"\\\n"),this.area.value=t.replace(a,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":10}],16:[function(t,e,n){(function(n){var r=t("xmlhttprequest-ssl"),i=t("./polling"),o=t("component-emitter"),a=t("component-inherit"),s=t("debug")("engine.io-client:polling-xhr");function u(){}function c(t){if(i.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,n.location){var e="https:"===location.protocol,r=location.port;r||(r=e?443:80),this.xd=t.hostname!==n.location.hostname||r!==t.port,this.xs=t.secure!==e}}function l(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function f(){for(var t in l.requests)l.requests.hasOwnProperty(t)&&l.requests[t].abort()}e.exports=c,e.exports.Request=l,a(c,i),c.prototype.supportsBinary=!0,c.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new l(t)},c.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},c.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},o(l.prototype),l.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new r(t),i=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&e.setRequestHeader(o,this.extraHeaders[o])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=!0),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){i.onLoad()},e.onerror=function(){i.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");i.supportsBinary&&"application/octet-stream"===t&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?i.onLoad():setTimeout(function(){i.onError(e.status)},0))},s("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){i.onError(t)},0)}n.document&&(this.index=l.requestsCount++,l.requests[this.index]=this)},l.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},l.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},l.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},l.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(t){}n.document&&delete l.requests[this.index],this.xhr=null}},l.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},l.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},l.prototype.abort=function(){this.cleanup()},l.requestsCount=0,l.requests={},n.document&&(n.attachEvent?n.attachEvent("onunload",f):n.addEventListener&&n.addEventListener("beforeunload",f,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":9,"component-inherit":10,debug:20,"xmlhttprequest-ssl":19}],17:[function(t,e,n){var r=t("../transport"),i=t("parseqs"),o=t("engine.io-parser"),a=t("component-inherit"),s=t("yeast"),u=t("debug")("engine.io-client:polling");e.exports=l;var c=null!=new(t("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function l(t){var e=t&&t.forceBase64;c&&!e||(this.supportsBinary=!1),r.call(this,t)}a(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(t){var e=this;function n(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||n()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||n()}))}else n()},l.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(t){var e=this;u("polling got data %s",t);o.decodePayload(t,this.socket.binaryType,function(t,n,r){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},l.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},{"../transport":13,"component-inherit":10,debug:20,"engine.io-parser":22,parseqs:31,"xmlhttprequest-ssl":19,yeast:60}],18:[function(t,e,n){(function(n){var r,i=t("../transport"),o=t("engine.io-parser"),a=t("parseqs"),s=t("component-inherit"),u=t("yeast"),c=t("debug")("engine.io-client:websocket"),l=n.WebSocket||n.MozWebSocket;if("undefined"==typeof window)try{r=t("ws")}catch(t){}var f=l;function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=l&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(f=r),i.call(this,t)}f||"undefined"!=typeof window||(f=r),e.exports=p,s(p,i),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new f(t,e):new f(t):new f(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(t){var e=this;this.writable=!1;for(var r=t.length,i=0,a=r;i<a;i++)!function(t){o.encodePacket(t,e.supportsBinary,function(i){if(!e.usingBrowserWebSocket){var o={};if(t.options&&(o.compress=t.options.compress),e.perMessageDeflate)("string"==typeof i?n.Buffer.byteLength(i):i.length)<e.perMessageDeflate.threshold&&(o.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(i):e.ws.send(i,o)}catch(t){c("websocket closed before onclose event")}--r||s()})}(t[i]);function s(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}},p.prototype.onClose=function(){i.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},p.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===p.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":13,"component-inherit":10,debug:20,"engine.io-parser":22,parseqs:31,ws:6,yeast:60}],19:[function(t,e,n){(function(n){var r=t("has-cors");e.exports=function(t){var e=t.xdomain,i=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(t){}if(!e)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-cors":27}],20:[function(t,e,n){(function(r){function i(){var t;try{t=n.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r)},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=i,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},n.enable(i())}).call(this,t("_process"))},{"./debug":21,_process:33}],21:[function(t,e,n){function r(t){var e;function r(){if(r.enabled){var t=r,i=+new Date,o=i-(e||i);t.diff=o,t.prev=e,t.curr=i,e=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;u++;var i=n.formatters[r];if("function"==typeof i){var o=a[u];e=i.call(t,o),a.splice(u,1),u--}return e}),n.formatArgs.call(t,a),(r.log||n.log||console.log.bind(console)).apply(t,a)}}return r.namespace=t,r.enabled=n.enabled(t),r.useColors=n.useColors(),r.color=function(t){var e,r=0;for(e in t)r=(r<<5)-r+t.charCodeAt(e),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(t),r.destroy=i,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function i(){var t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}(n=e.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){var e;n.save(t),n.names=[],n.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(e=0;e<i;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){var o=n.instances[e];o.enabled=n.enabled(o.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}},{ms:30}],22:[function(t,e,n){(function(e){var r,i=t("./keys"),o=t("has-binary2"),a=t("arraybuffer.slice"),s=t("after"),u=t("./utf8");e&&e.ArrayBuffer&&(r=t("base64-arraybuffer"));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=c||l;n.protocol=3;var p=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=i(p),d={type:"error",data:"parser error"},g=t("blob");function v(t,e,n){for(var r=new Array(t.length),i=s(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},a=0;a<t.length;a++)o(a,t[a],i)}n.encodePacket=function(t,r,i,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof i&&(o=i,i=null);var a=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&a instanceof ArrayBuffer)return function(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=p[t.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}(t,r,o);if(g&&a instanceof e.Blob)return function(t,e,r){if(!e)return n.encodeBase64Packet(t,r);if(f)return function(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,n.encodePacket(t,e,!0,r)},i.readAsArrayBuffer(t.data)}(t,e,r);var i=new Uint8Array(1);i[0]=p[t.type];var o=new g([i.buffer,t.data]);return r(o)}(t,r,o);if(a&&a.base64)return function(t,e){var r="b"+n.packets[t.type]+t.data.data;return e(r)}(t,o);var s=p[t.type];return void 0!==t.data&&(s+=i?u.encode(String(t.data),{strict:!1}):String(t.data)),o(""+s)},n.encodeBase64Packet=function(t,r){var i,o="b"+n.packets[t.type];if(g&&t.data instanceof e.Blob){var a=new FileReader;return a.onload=function(){var t=a.result.split(",")[1];r(o+t)},a.readAsDataURL(t.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),u=new Array(s.length),c=0;c<s.length;c++)u[c]=s[c];i=String.fromCharCode.apply(null,u)}return o+=e.btoa(i),r(o)},n.decodePacket=function(t,e,r){if(void 0===t)return d;if("string"==typeof t){if("b"===t.charAt(0))return n.decodeBase64Packet(t.substr(1),e);if(r&&!1===(t=function(t){try{t=u.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return d;var i=t.charAt(0);return Number(i)==i&&h[i]?t.length>1?{type:h[i],data:t.substring(1)}:{type:h[i]}:d}i=new Uint8Array(t)[0];var o=a(t,1);return g&&"blob"===e&&(o=new g([o])),{type:h[i],data:o}},n.decodeBase64Packet=function(t,e){var n=h[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=r.decode(t.substr(1));return"blob"===e&&g&&(i=new g([i])),{type:n,data:i}},n.encodePayload=function(t,e,r){"function"==typeof e&&(r=e,e=null);var i=o(t);if(e&&i)return g&&!f?n.encodePayloadAsBlob(t,r):n.encodePayloadAsArrayBuffer(t,r);if(!t.length)return r("0:");v(t,function(t,r){n.encodePacket(t,!!i&&e,!1,function(t){r(null,function(t){return t.length+":"+t}(t))})},function(t,e){return r(e.join(""))})},n.decodePayload=function(t,e,r){if("string"!=typeof t)return n.decodePayloadAsBinary(t,e,r);var i;if("function"==typeof e&&(r=e,e=null),""===t)return r(d,0,1);for(var o,a,s="",u=0,c=t.length;u<c;u++){var l=t.charAt(u);if(":"===l){if(""===s||s!=(o=Number(s)))return r(d,0,1);if(s!=(a=t.substr(u+1,o)).length)return r(d,0,1);if(a.length){if(i=n.decodePacket(a,e,!1),d.type===i.type&&d.data===i.data)return r(d,0,1);if(!1===r(i,u+o,c))return}u+=o,s=""}else s+=l}return""!==s?r(d,0,1):void 0},n.encodePayloadAsArrayBuffer=function(t,e){if(!t.length)return e(new ArrayBuffer(0));v(t,function(t,e){n.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,n){var r=n.reduce(function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);n=r.buffer}i[o++]=e?0:1;var s=n.byteLength.toString();for(a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),e(i.buffer)})},n.encodePayloadAsBlob=function(t,e){v(t,function(t,e){n.encodePacket(t,!0,!0,function(t){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,n[0]=0}var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),a=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)a[i]=parseInt(o[i]);if(a[o.length]=255,g){var s=new g([n.buffer,a.buffer,t]);e(null,s)}})},function(t,n){return e(new g(n))})},n.decodePayloadAsBinary=function(t,e,r){"function"==typeof e&&(r=e,e=null);for(var i=t,o=[];i.byteLength>0;){for(var s=new Uint8Array(i),u=0===s[0],c="",l=1;255!==s[l];l++){if(c.length>310)return r(d,0,1);c+=s[l]}i=a(i,2+c.length),c=parseInt(c);var f=a(i,0,c);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var p=new Uint8Array(f);f="";for(l=0;l<p.length;l++)f+=String.fromCharCode(p[l])}o.push(f),i=a(i,c)}var h=o.length;o.forEach(function(t,i){r(n.decodePacket(t,e,!0),i,h)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":23,"./utf8":24,after:1,"arraybuffer.slice":2,"base64-arraybuffer":4,blob:5,"has-binary2":25}],23:[function(t,e,n){e.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},{}],24:[function(t,e,n){(function(t){!function(r){var i="object"==typeof n&&n,o="object"==typeof e&&e&&e.exports==i&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a||(r=a);var s,u,c,l=String.fromCharCode;function f(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function p(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function h(t,e){return l(t>>e&63|128)}function d(t,e){if(0==(4294967168&t))return l(t);var n="";return 0==(4294965248&t)?n=l(t>>6&31|192):0==(4294901760&t)?(p(t,e)||(t=65533),n=l(t>>12&15|224),n+=h(t,6)):0==(4292870144&t)&&(n=l(t>>18&7|240),n+=h(t,12),n+=h(t,6)),n+=l(63&t|128)}function g(){if(c>=u)throw Error("Invalid byte index");var t=255&s[c];if(c++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function v(t){var e,n;if(c>u)throw Error("Invalid byte index");if(c==u)return!1;if(e=255&s[c],c++,0==(128&e))return e;if(192==(224&e)){if((n=(31&e)<<6|g())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if((n=(15&e)<<12|g()<<6|g())>=2048)return p(n,t)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(n=(7&e)<<18|g()<<12|g()<<6|g())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var _={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=f(t),i=r.length,o=-1,a="";++o<i;)a+=d(r[o],n);return a},decode:function(t,e){var n=!1!==(e=e||{}).strict;s=f(t),u=s.length,c=0;for(var r,i=[];!1!==(r=v(n));)i.push(r);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=l((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=l(e);return i}(i)}};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return _});else if(i&&!i.nodeType)if(o)o.exports=_;else{var m={}.hasOwnProperty;for(var y in _)m.call(_,y)&&(i[y]=_[y])}else r.utf8=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(t,e,n){(function(n){var r=t("isarray"),i=Object.prototype.toString,o="function"==typeof n.Blob||"[object BlobConstructor]"===i.call(n.Blob),a="function"==typeof n.File||"[object FileConstructor]"===i.call(n.File);e.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(r(e)){for(var i=0,s=e.length;i<s;i++)if(t(e[i]))return!0;return!1}if("function"==typeof n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||"function"==typeof n.ArrayBuffer&&e instanceof ArrayBuffer||o&&e instanceof Blob||a&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)&&t(e[u]))return!0;return!1}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:26}],26:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],27:[function(t,e,n){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},{}],28:[function(t,e,n){var r=[].indexOf;e.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],29:[function(t,e,n){(function(t){(function(){var r,i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",l=1,f=2,p=4,h=1,d=2,g=1,v=2,_=4,m=8,y=16,b=32,w=64,N=128,S=256,T=512,E=30,x="...",A=800,k=16,C=1,D=2,I=1/0,$=9007199254740991,O=1.7976931348623157e308,R=NaN,L=4294967295,M=L-1,P=L>>>1,B=[["ary",N],["bind",g],["bindKey",v],["curry",m],["curryRight",y],["flip",T],["partial",b],["partialRight",w],["rearg",S]],j="[object Arguments]",F="[object Array]",U="[object AsyncFunction]",J="[object Boolean]",H="[object Date]",q="[object DOMException]",z="[object Error]",W="[object Function]",V="[object GeneratorFunction]",G="[object Map]",Y="[object Number]",X="[object Null]",Q="[object Object]",K="[object Proxy]",Z="[object RegExp]",tt="[object Set]",et="[object String]",nt="[object Symbol]",rt="[object Undefined]",it="[object WeakMap]",ot="[object WeakSet]",at="[object ArrayBuffer]",st="[object DataView]",ut="[object Float32Array]",ct="[object Float64Array]",lt="[object Int8Array]",ft="[object Int16Array]",pt="[object Int32Array]",ht="[object Uint8Array]",dt="[object Uint8ClampedArray]",gt="[object Uint16Array]",vt="[object Uint32Array]",_t=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,wt=/[&<>"']/g,Nt=RegExp(bt.source),St=RegExp(wt.source),Tt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Dt.source),$t=/^\s+|\s+$/g,Ot=/^\s+/,Rt=/\s+$/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mt=/\{\n\/\* \[wrapped with (.+)\] \*/,Pt=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ut=/\w*$/,Jt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,zt=/^0o[0-7]+$/i,Wt=/^(?:0|[1-9]\d*)$/,Vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gt=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kt="[\\ud800-\\udfff]",Zt="["+Qt+"]",te="["+Xt+"]",ee="\\d+",ne="[\\u2700-\\u27bf]",re="[a-z\\xdf-\\xf6\\xf8-\\xff]",ie="[^\\ud800-\\udfff"+Qt+ee+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",oe="\\ud83c[\\udffb-\\udfff]",ae="[^\\ud800-\\udfff]",se="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",ce="[A-Z\\xc0-\\xd6\\xd8-\\xde]",le="(?:"+re+"|"+ie+")",fe="(?:"+ce+"|"+ie+")",pe="(?:"+te+"|"+oe+")"+"?",he="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[ae,se,ue].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),de="(?:"+[ne,se,ue].join("|")+")"+he,ge="(?:"+[ae+te+"?",te,se,ue,Kt].join("|")+")",ve=RegExp("['’]","g"),_e=RegExp(te,"g"),me=RegExp(oe+"(?="+oe+")|"+ge+he,"g"),ye=RegExp([ce+"?"+re+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Zt,ce,"$"].join("|")+")",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Zt,ce+le,"$"].join("|")+")",ce+"?"+le+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ee,de].join("|"),"g"),be=RegExp("[\\u200d\\ud800-\\udfff"+Xt+"\\ufe0e\\ufe0f]"),we=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Se=-1,Te={};Te[ut]=Te[ct]=Te[lt]=Te[ft]=Te[pt]=Te[ht]=Te[dt]=Te[gt]=Te[vt]=!0,Te[j]=Te[F]=Te[at]=Te[J]=Te[st]=Te[H]=Te[z]=Te[W]=Te[G]=Te[Y]=Te[Q]=Te[Z]=Te[tt]=Te[et]=Te[it]=!1;var Ee={};Ee[j]=Ee[F]=Ee[at]=Ee[st]=Ee[J]=Ee[H]=Ee[ut]=Ee[ct]=Ee[lt]=Ee[ft]=Ee[pt]=Ee[G]=Ee[Y]=Ee[Q]=Ee[Z]=Ee[tt]=Ee[et]=Ee[nt]=Ee[ht]=Ee[dt]=Ee[gt]=Ee[vt]=!0,Ee[z]=Ee[W]=Ee[it]=!1;var xe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ae=parseFloat,ke=parseInt,Ce="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Ie=Ce||De||Function("return this")(),$e="object"==typeof n&&n&&!n.nodeType&&n,Oe=$e&&"object"==typeof e&&e&&!e.nodeType&&e,Re=Oe&&Oe.exports===$e,Le=Re&&Ce.process,Me=function(){try{return Le&&Le.binding&&Le.binding("util")}catch(t){}}(),Pe=Me&&Me.isArrayBuffer,Be=Me&&Me.isDate,je=Me&&Me.isMap,Fe=Me&&Me.isRegExp,Ue=Me&&Me.isSet,Je=Me&&Me.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function qe(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function ze(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function We(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ve(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ge(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ye(t,e){return!!(null==t?0:t.length)&&an(t,e,0)>-1}function Xe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Qe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ke(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ze(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function tn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function en(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var nn=ln("length");function rn(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function on(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function an(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):on(t,un,n)}function sn(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function un(t){return t!=t}function cn(t,e){var n=null==t?0:t.length;return n?hn(t,e)/n:R}function ln(t){return function(e){return null==e?r:e[t]}}function fn(t){return function(e){return null==t?r:t[e]}}function pn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function hn(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function dn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function gn(t){return function(e){return t(e)}}function vn(t,e){return Qe(e,function(e){return t[e]})}function _n(t,e){return t.has(e)}function mn(t,e){for(var n=-1,r=t.length;++n<r&&an(e,t[n],0)>-1;);return n}function yn(t,e){for(var n=t.length;n--&&an(e,t[n],0)>-1;);return n}var bn=fn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),wn=fn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nn(t){return"\\"+xe[t]}function Sn(t){return be.test(t)}function Tn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function En(t,e){return function(n){return t(e(n))}}function xn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==c||(t[n]=c,o[i++]=n)}return o}function An(t,e){return"__proto__"==e?r:t[e]}function kn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Dn(t){return Sn(t)?function(t){var e=me.lastIndex=0;for(;me.test(t);)++e;return e}(t):nn(t)}function In(t){return Sn(t)?function(t){return t.match(me)||[]}(t):function(t){return t.split("")}(t)}var $n=fn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var On=function t(e){var n,Xt=(e=null==e?Ie:On.defaults(Ie.Object(),e,On.pick(Ie,Ne))).Array,Qt=e.Date,Kt=e.Error,Zt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,re=e.String,ie=e.TypeError,oe=Xt.prototype,ae=Zt.prototype,se=ee.prototype,ue=e["__core-js_shared__"],ce=ae.toString,le=se.hasOwnProperty,fe=0,pe=(n=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",he=se.toString,de=ce.call(ee),ge=Ie._,me=ne("^"+ce.call(le).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=Re?e.Buffer:r,xe=e.Symbol,Ce=e.Uint8Array,De=be?be.allocUnsafe:r,$e=En(ee.getPrototypeOf,ee),Oe=ee.create,Le=se.propertyIsEnumerable,Me=oe.splice,nn=xe?xe.isConcatSpreadable:r,fn=xe?xe.iterator:r,Rn=xe?xe.toStringTag:r,Ln=function(){try{var t=Fo(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),Mn=e.clearTimeout!==Ie.clearTimeout&&e.clearTimeout,Pn=Qt&&Qt.now!==Ie.Date.now&&Qt.now,Bn=e.setTimeout!==Ie.setTimeout&&e.setTimeout,jn=te.ceil,Fn=te.floor,Un=ee.getOwnPropertySymbols,Jn=be?be.isBuffer:r,Hn=e.isFinite,qn=oe.join,zn=En(ee.keys,ee),Wn=te.max,Vn=te.min,Gn=Qt.now,Yn=e.parseInt,Xn=te.random,Qn=oe.reverse,Kn=Fo(e,"DataView"),Zn=Fo(e,"Map"),tr=Fo(e,"Promise"),er=Fo(e,"Set"),nr=Fo(e,"WeakMap"),rr=Fo(ee,"create"),ir=nr&&new nr,or={},ar=fa(Kn),sr=fa(Zn),ur=fa(tr),cr=fa(er),lr=fa(nr),fr=xe?xe.prototype:r,pr=fr?fr.valueOf:r,hr=fr?fr.toString:r;function dr(t){if(ks(t)&&!_s(t)&&!(t instanceof mr)){if(t instanceof _r)return t;if(le.call(t,"__wrapped__"))return pa(t)}return new _r(t)}var gr=function(){function t(){}return function(e){if(!As(e))return{};if(Oe)return Oe(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function vr(){}function _r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function mr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function yr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wr;++e<n;)this.add(t[e])}function Sr(t){var e=this.__data__=new br(t);this.size=e.size}function Tr(t,e){var n=_s(t),r=!n&&vs(t),i=!n&&!r&&ws(t),o=!n&&!r&&!i&&Ms(t),a=n||r||i||o,s=a?dn(t.length,re):[],u=s.length;for(var c in t)!e&&!le.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Vo(c,u))||s.push(c);return s}function Er(t){var e=t.length;return e?t[Ni(0,e-1)]:r}function xr(t,e){return ua(ro(t),Lr(e,0,t.length))}function Ar(t){return ua(ro(t))}function kr(t,e,n){(n===r||hs(t[e],n))&&(n!==r||e in t)||Or(t,e,n)}function Cr(t,e,n){var i=t[e];le.call(t,e)&&hs(i,n)&&(n!==r||e in t)||Or(t,e,n)}function Dr(t,e){for(var n=t.length;n--;)if(hs(t[n][0],e))return n;return-1}function Ir(t,e,n,r){return Fr(t,function(t,i,o){e(r,t,n(t),o)}),r}function $r(t,e){return t&&io(e,iu(e),t)}function Or(t,e,n){"__proto__"==e&&Ln?Ln(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Rr(t,e){for(var n=-1,i=e.length,o=Xt(i),a=null==t;++n<i;)o[n]=a?r:Zs(t,e[n]);return o}function Lr(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function Mr(t,e,n,i,o,a){var s,u=e&l,c=e&f,h=e&p;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!As(t))return t;var d=_s(t);if(d){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return ro(t,s)}else{var g=Ho(t),v=g==W||g==V;if(ws(t))return Qi(t,u);if(g==Q||g==j||v&&!o){if(s=c||v?{}:zo(t),!u)return c?function(t,e){return io(t,Jo(t),e)}(t,function(t,e){return t&&io(e,ou(e),t)}(s,t)):function(t,e){return io(t,Uo(t),e)}(t,$r(s,t))}else{if(!Ee[g])return o?t:{};s=function(t,e,n){var r,i,o,a=t.constructor;switch(e){case at:return Ki(t);case J:case H:return new a(+t);case st:return function(t,e){var n=e?Ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ut:case ct:case lt:case ft:case pt:case ht:case dt:case gt:case vt:return Zi(t,n);case G:return new a;case Y:case et:return new a(t);case Z:return(o=new(i=t).constructor(i.source,Ut.exec(i))).lastIndex=i.lastIndex,o;case tt:return new a;case nt:return r=t,pr?ee(pr.call(r)):{}}}(t,g,u)}}a||(a=new Sr);var _=a.get(t);if(_)return _;if(a.set(t,s),Os(t))return t.forEach(function(r){s.add(Mr(r,e,n,r,t,a))}),s;if(Cs(t))return t.forEach(function(r,i){s.set(i,Mr(r,e,n,i,t,a))}),s;var m=d?r:(h?c?Oo:$o:c?ou:iu)(t);return ze(m||t,function(r,i){m&&(r=t[i=r]),Cr(s,i,Mr(r,e,n,i,t,a))}),s}function Pr(t,e,n){var i=n.length;if(null==t)return!i;for(t=ee(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function Br(t,e,n){if("function"!=typeof t)throw new ie(a);return ia(function(){t.apply(r,n)},e)}function jr(t,e,n,r){var o=-1,a=Ye,s=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=Qe(e,gn(n))),r?(a=Xe,s=!1):e.length>=i&&(a=_n,s=!1,e=new Nr(e));t:for(;++o<u;){var f=t[o],p=null==n?f:n(f);if(f=r||0!==f?f:0,s&&p==p){for(var h=l;h--;)if(e[h]===p)continue t;c.push(f)}else a(e,p,r)||c.push(f)}return c}dr.templateSettings={escape:Tt,evaluate:Et,interpolate:xt,variable:"",imports:{_:dr}},dr.prototype=vr.prototype,dr.prototype.constructor=dr,_r.prototype=gr(vr.prototype),_r.prototype.constructor=_r,mr.prototype=gr(vr.prototype),mr.prototype.constructor=mr,yr.prototype.clear=function(){this.__data__=rr?rr(null):{},this.size=0},yr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yr.prototype.get=function(t){var e=this.__data__;if(rr){var n=e[t];return n===s?r:n}return le.call(e,t)?e[t]:r},yr.prototype.has=function(t){var e=this.__data__;return rr?e[t]!==r:le.call(e,t)},yr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rr&&e===r?s:e,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=Dr(e,t);return!(n<0||(n==e.length-1?e.pop():Me.call(e,n,1),--this.size,0))},br.prototype.get=function(t){var e=this.__data__,n=Dr(e,t);return n<0?r:e[n][1]},br.prototype.has=function(t){return Dr(this.__data__,t)>-1},br.prototype.set=function(t,e){var n=this.__data__,r=Dr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new yr,map:new(Zn||br),string:new yr}},wr.prototype.delete=function(t){var e=Bo(this,t).delete(t);return this.size-=e?1:0,e},wr.prototype.get=function(t){return Bo(this,t).get(t)},wr.prototype.has=function(t){return Bo(this,t).has(t)},wr.prototype.set=function(t,e){var n=Bo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Nr.prototype.add=Nr.prototype.push=function(t){return this.__data__.set(t,s),this},Nr.prototype.has=function(t){return this.__data__.has(t)},Sr.prototype.clear=function(){this.__data__=new br,this.size=0},Sr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Sr.prototype.get=function(t){return this.__data__.get(t)},Sr.prototype.has=function(t){return this.__data__.has(t)},Sr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!Zn||r.length<i-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(t,e),this.size=n.size,this};var Fr=so(Gr),Ur=so(Yr,!0);function Jr(t,e){var n=!0;return Fr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Hr(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(u===r?s==s&&!Ls(s):n(s,u)))var u=s,c=a}return c}function qr(t,e){var n=[];return Fr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function zr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Wo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?zr(s,e-1,n,r,i):Ke(i,s):r||(i[i.length]=s)}return i}var Wr=uo(),Vr=uo(!0);function Gr(t,e){return t&&Wr(t,e,iu)}function Yr(t,e){return t&&Vr(t,e,iu)}function Xr(t,e){return Ge(e,function(e){return Ts(t[e])})}function Qr(t,e){for(var n=0,i=(e=Vi(e,t)).length;null!=t&&n<i;)t=t[la(e[n++])];return n&&n==i?t:r}function Kr(t,e,n){var r=e(t);return _s(t)?r:Ke(r,n(t))}function Zr(t){return null==t?t===r?rt:X:Rn&&Rn in ee(t)?function(t){var e=le.call(t,Rn),n=t[Rn];try{t[Rn]=r;var i=!0}catch(t){}var o=he.call(t);return i&&(e?t[Rn]=n:delete t[Rn]),o}(t):function(t){return he.call(t)}(t)}function ti(t,e){return t>e}function ei(t,e){return null!=t&&le.call(t,e)}function ni(t,e){return null!=t&&e in ee(t)}function ri(t,e,n){for(var i=n?Xe:Ye,o=t[0].length,a=t.length,s=a,u=Xt(a),c=1/0,l=[];s--;){var f=t[s];s&&e&&(f=Qe(f,gn(e))),c=Vn(f.length,c),u[s]=!n&&(e||o>=120&&f.length>=120)?new Nr(s&&f):r}f=t[0];var p=-1,h=u[0];t:for(;++p<o&&l.length<c;){var d=f[p],g=e?e(d):d;if(d=n||0!==d?d:0,!(h?_n(h,g):i(l,g,n))){for(s=a;--s;){var v=u[s];if(!(v?_n(v,g):i(t[s],g,n)))continue t}h&&h.push(g),l.push(d)}}return l}function ii(t,e,n){var i=null==(t=na(t,e=Vi(e,t)))?t:t[la(Sa(e))];return null==i?r:He(i,t,n)}function oi(t){return ks(t)&&Zr(t)==j}function ai(t,e,n,i,o){return t===e||(null==t||null==e||!ks(t)&&!ks(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=_s(t),u=_s(e),c=s?F:Ho(t),l=u?F:Ho(e),f=(c=c==j?Q:c)==Q,p=(l=l==j?Q:l)==Q,g=c==l;if(g&&ws(t)){if(!ws(e))return!1;s=!0,f=!1}if(g&&!f)return a||(a=new Sr),s||Ms(t)?Do(t,e,n,i,o,a):function(t,e,n,r,i,o,a){switch(n){case st:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case at:return!(t.byteLength!=e.byteLength||!o(new Ce(t),new Ce(e)));case J:case H:case Y:return hs(+t,+e);case z:return t.name==e.name&&t.message==e.message;case Z:case et:return t==e+"";case G:var s=Tn;case tt:var u=r&h;if(s||(s=kn),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=d,a.set(t,e);var l=Do(s(t),s(e),r,i,o,a);return a.delete(t),l;case nt:if(pr)return pr.call(t)==pr.call(e)}return!1}(t,e,c,n,i,o,a);if(!(n&h)){var v=f&&le.call(t,"__wrapped__"),_=p&&le.call(e,"__wrapped__");if(v||_){var m=v?t.value():t,y=_?e.value():e;return a||(a=new Sr),o(m,y,n,i,a)}}return!!g&&(a||(a=new Sr),function(t,e,n,i,o,a){var s=n&h,u=$o(t),c=u.length,l=$o(e).length;if(c!=l&&!s)return!1;for(var f=c;f--;){var p=u[f];if(!(s?p in e:le.call(e,p)))return!1}var d=a.get(t);if(d&&a.get(e))return d==e;var g=!0;a.set(t,e),a.set(e,t);for(var v=s;++f<c;){p=u[f];var _=t[p],m=e[p];if(i)var y=s?i(m,_,p,e,t,a):i(_,m,p,t,e,a);if(!(y===r?_===m||o(_,m,n,i,a):y)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(g=!1)}return a.delete(t),a.delete(e),g}(t,e,n,i,o,a))}(t,e,n,i,ai,o))}function si(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=ee(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var c=(u=n[o])[0],l=t[c],f=u[1];if(s&&u[2]){if(l===r&&!(c in t))return!1}else{var p=new Sr;if(i)var g=i(l,f,c,t,e,p);if(!(g===r?ai(f,l,h|d,i,p):g))return!1}}return!0}function ui(t){return!(!As(t)||pe&&pe in t)&&(Ts(t)?me:qt).test(fa(t))}function ci(t){return"function"==typeof t?t:null==t?Du:"object"==typeof t?_s(t)?gi(t[0],t[1]):di(t):ju(t)}function li(t){if(!Ko(t))return zn(t);var e=[];for(var n in ee(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fi(t){if(!As(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Ko(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function pi(t,e){return t<e}function hi(t,e){var n=-1,r=ys(t)?Xt(t.length):[];return Fr(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function di(t){var e=jo(t);return 1==e.length&&e[0][2]?ta(e[0][0],e[0][1]):function(n){return n===t||si(n,t,e)}}function gi(t,e){return Yo(t)&&Zo(e)?ta(la(t),e):function(n){var i=Zs(n,t);return i===r&&i===e?tu(n,t):ai(e,i,h|d)}}function vi(t,e,n,i,o){t!==e&&Wr(e,function(a,s){if(As(a))o||(o=new Sr),function(t,e,n,i,o,a,s){var u=An(t,n),c=An(e,n),l=s.get(c);if(l)kr(t,n,l);else{var f=a?a(u,c,n+"",t,e,s):r,p=f===r;if(p){var h=_s(c),d=!h&&ws(c),g=!h&&!d&&Ms(c);f=c,h||d||g?_s(u)?f=u:bs(u)?f=ro(u):d?(p=!1,f=Qi(c,!0)):g?(p=!1,f=Zi(c,!0)):f=[]:Is(c)||vs(c)?(f=u,vs(u)?f=qs(u):(!As(u)||i&&Ts(u))&&(f=zo(c))):p=!1}p&&(s.set(c,f),o(f,c,i,a,s),s.delete(c)),kr(t,n,f)}}(t,e,s,n,vi,i,o);else{var u=i?i(An(t,s),a,s+"",t,e,o):r;u===r&&(u=a),kr(t,s,u)}},ou)}function _i(t,e){var n=t.length;if(n)return Vo(e+=e<0?n:0,n)?t[e]:r}function mi(t,e,n){var r=-1;return e=Qe(e.length?e:[Du],gn(Po())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(hi(t,function(t,n,i){return{criteria:Qe(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=to(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function yi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Qr(t,a);n(s,a)&&Ai(o,Vi(a,t),s)}return o}function bi(t,e,n,r){var i=r?sn:an,o=-1,a=e.length,s=t;for(t===e&&(e=ro(e)),n&&(s=Qe(t,gn(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Me.call(s,u,1),Me.call(t,u,1);return t}function wi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Vo(i)?Me.call(t,i,1):ji(t,i)}}return t}function Ni(t,e){return t+Fn(Xn()*(e-t+1))}function Si(t,e){var n="";if(!t||e<1||e>$)return n;do{e%2&&(n+=t),(e=Fn(e/2))&&(t+=t)}while(e);return n}function Ti(t,e){return oa(ea(t,e,Du),t+"")}function Ei(t){return Er(hu(t))}function xi(t,e){var n=hu(t);return ua(n,Lr(e,0,n.length))}function Ai(t,e,n,i){if(!As(t))return t;for(var o=-1,a=(e=Vi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var c=la(e[o]),l=n;if(o!=s){var f=u[c];(l=i?i(f,c,u):r)===r&&(l=As(f)?f:Vo(e[o+1])?[]:{})}Cr(u,c,l),u=u[c]}return t}var ki=ir?function(t,e){return ir.set(t,e),t}:Du,Ci=Ln?function(t,e){return Ln(t,"toString",{configurable:!0,enumerable:!1,value:Au(e),writable:!0})}:Du;function Di(t){return ua(hu(t))}function Ii(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Xt(i);++r<i;)o[r]=t[r+e];return o}function $i(t,e){var n;return Fr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Oi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=P){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Ls(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Ri(t,e,Du,n)}function Ri(t,e,n,i){e=n(e);for(var o=0,a=null==t?0:t.length,s=e!=e,u=null===e,c=Ls(e),l=e===r;o<a;){var f=Fn((o+a)/2),p=n(t[f]),h=p!==r,d=null===p,g=p==p,v=Ls(p);if(s)var _=i||g;else _=l?g&&(i||h):u?g&&h&&(i||!d):c?g&&h&&!d&&(i||!v):!d&&!v&&(i?p<=e:p<e);_?o=f+1:a=f}return Vn(a,M)}function Li(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!hs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Mi(t){return"number"==typeof t?t:Ls(t)?R:+t}function Pi(t){if("string"==typeof t)return t;if(_s(t))return Qe(t,Pi)+"";if(Ls(t))return hr?hr.call(t):"";var e=t+"";return"0"==e&&1/t==-I?"-0":e}function Bi(t,e,n){var r=-1,o=Ye,a=t.length,s=!0,u=[],c=u;if(n)s=!1,o=Xe;else if(a>=i){var l=e?null:To(t);if(l)return kn(l);s=!1,o=_n,c=new Nr}else c=e?[]:u;t:for(;++r<a;){var f=t[r],p=e?e(f):f;if(f=n||0!==f?f:0,s&&p==p){for(var h=c.length;h--;)if(c[h]===p)continue t;e&&c.push(p),u.push(f)}else o(c,p,n)||(c!==u&&c.push(p),u.push(f))}return u}function ji(t,e){return null==(t=na(t,e=Vi(e,t)))||delete t[la(Sa(e))]}function Fi(t,e,n,r){return Ai(t,e,n(Qr(t,e)),r)}function Ui(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ii(t,r?0:o,r?o+1:i):Ii(t,r?o+1:0,r?i:o)}function Ji(t,e){var n=t;return n instanceof mr&&(n=n.value()),Ze(e,function(t,e){return e.func.apply(e.thisArg,Ke([t],e.args))},n)}function Hi(t,e,n){var r=t.length;if(r<2)return r?Bi(t[0]):[];for(var i=-1,o=Xt(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=jr(o[i]||a,t[s],e,n));return Bi(zr(o,1),e,n)}function qi(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var u=i<a?e[i]:r;n(s,t[i],u)}return s}function zi(t){return bs(t)?t:[]}function Wi(t){return"function"==typeof t?t:Du}function Vi(t,e){return _s(t)?t:Yo(t,e)?[t]:ca(zs(t))}var Gi=Ti;function Yi(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Ii(t,e,n)}var Xi=Mn||function(t){return Ie.clearTimeout(t)};function Qi(t,e){if(e)return t.slice();var n=t.length,r=De?De(n):new t.constructor(n);return t.copy(r),r}function Ki(t){var e=new t.constructor(t.byteLength);return new Ce(e).set(new Ce(t)),e}function Zi(t,e){var n=e?Ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function to(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=Ls(t),s=e!==r,u=null===e,c=e==e,l=Ls(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&t<e||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function eo(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=Wn(o-a,0),l=Xt(u+c),f=!r;++s<u;)l[s]=e[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function no(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=Wn(o-s,0),f=Xt(l+c),p=!r;++i<l;)f[i]=t[i];for(var h=i;++u<c;)f[h+u]=e[u];for(;++a<s;)(p||i<o)&&(f[h+n[a]]=t[i++]);return f}function ro(t,e){var n=-1,r=t.length;for(e||(e=Xt(r));++n<r;)e[n]=t[n];return e}function io(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],c=i?i(n[u],t[u],u,n,t):r;c===r&&(c=t[u]),o?Or(n,u,c):Cr(n,u,c)}return n}function oo(t,e){return function(n,r){var i=_s(n)?qe:Ir,o=e?e():{};return i(n,t,Po(r,2),o)}}function ao(t){return Ti(function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&Go(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=ee(e);++i<o;){var u=n[i];u&&t(e,u,i,a)}return e})}function so(t,e){return function(n,r){if(null==n)return n;if(!ys(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=ee(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function uo(t){return function(e,n,r){for(var i=-1,o=ee(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function co(t){return function(e){var n=Sn(e=zs(e))?In(e):r,i=n?n[0]:e.charAt(0),o=n?Yi(n,1).join(""):e.slice(1);return i[t]()+o}}function lo(t){return function(e){return Ze(Tu(vu(e).replace(ve,"")),t,"")}}function fo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=gr(t.prototype),r=t.apply(n,e);return As(r)?r:n}}function po(t){return function(e,n,i){var o=ee(e);if(!ys(e)){var a=Po(n,3);e=iu(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function ho(t){return Io(function(e){var n=e.length,i=n,o=_r.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new ie(a);if(o&&!u&&"wrapper"==Lo(s))var u=new _r([],!0)}for(i=u?i:n;++i<n;){var c=Lo(s=e[i]),l="wrapper"==c?Ro(s):r;u=l&&Xo(l[0])&&l[1]==(N|m|b|S)&&!l[4].length&&1==l[9]?u[Lo(l[0])].apply(u,l[3]):1==s.length&&Xo(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&_s(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function go(t,e,n,i,o,a,s,u,c,l){var f=e&N,p=e&g,h=e&v,d=e&(m|y),_=e&T,b=h?r:fo(t);return function g(){for(var v=arguments.length,m=Xt(v),y=v;y--;)m[y]=arguments[y];if(d)var w=Mo(g),N=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(m,w);if(i&&(m=eo(m,i,o,d)),a&&(m=no(m,a,s,d)),v-=N,d&&v<l){var S=xn(m,w);return No(t,e,go,g.placeholder,n,m,S,u,c,l-v)}var T=p?n:this,E=h?T[t]:t;return v=m.length,u?m=function(t,e){for(var n=t.length,i=Vn(e.length,n),o=ro(t);i--;){var a=e[i];t[i]=Vo(a,n)?o[a]:r}return t}(m,u):_&&v>1&&m.reverse(),f&&c<v&&(m.length=c),this&&this!==Ie&&this instanceof g&&(E=b||fo(E)),E.apply(T,m)}}function vo(t,e){return function(n,r){return function(t,e,n,r){return Gr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function _o(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=Pi(n),i=Pi(i)):(n=Mi(n),i=Mi(i)),o=t(n,i)}return o}}function mo(t){return Io(function(e){return e=Qe(e,gn(Po())),Ti(function(n){var r=this;return t(e,function(t){return He(t,r,n)})})})}function yo(t,e){var n=(e=e===r?" ":Pi(e)).length;if(n<2)return n?Si(e,t):e;var i=Si(e,jn(t/Dn(e)));return Sn(e)?Yi(In(i),0,t).join(""):i.slice(0,t)}function bo(t){return function(e,n,i){return i&&"number"!=typeof i&&Go(e,n,i)&&(n=i=r),e=Fs(e),n===r?(n=e,e=0):n=Fs(n),function(t,e,n,r){for(var i=-1,o=Wn(jn((e-t)/(n||1)),0),a=Xt(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,i=i===r?e<n?1:-1:Fs(i),t)}}function wo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Hs(e),n=Hs(n)),t(e,n)}}function No(t,e,n,i,o,a,s,u,c,l){var f=e&m;e|=f?b:w,(e&=~(f?w:b))&_||(e&=~(g|v));var p=[t,e,o,f?a:r,f?s:r,f?r:a,f?r:s,u,c,l],h=n.apply(r,p);return Xo(t)&&ra(h,p),h.placeholder=i,aa(h,t,e)}function So(t){var e=te[t];return function(t,n){if(t=Hs(t),n=null==n?0:Vn(Us(n),292)){var r=(zs(t)+"e").split("e");return+((r=(zs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var To=er&&1/kn(new er([,-0]))[1]==I?function(t){return new er(t)}:Lu;function Eo(t){return function(e){var n=Ho(e);return n==G?Tn(e):n==tt?Cn(e):function(t,e){return Qe(e,function(e){return[e,t[e]]})}(e,t(e))}}function xo(t,e,n,i,o,s,u,l){var f=e&v;if(!f&&"function"!=typeof t)throw new ie(a);var p=i?i.length:0;if(p||(e&=~(b|w),i=o=r),u=u===r?u:Wn(Us(u),0),l=l===r?l:Us(l),p-=o?o.length:0,e&w){var h=i,d=o;i=o=r}var T=f?r:Ro(t),E=[t,e,n,i,o,h,d,s,u,l];if(T&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(g|v|N),a=r==N&&n==m||r==N&&n==S&&t[7].length<=e[8]||r==(N|S)&&e[7].length<=e[8]&&n==m;if(!o&&!a)return t;r&g&&(t[2]=e[2],i|=n&g?0:_);var s=e[3];if(s){var u=t[3];t[3]=u?eo(u,s,e[4]):s,t[4]=u?xn(t[3],c):e[4]}(s=e[5])&&(u=t[5],t[5]=u?no(u,s,e[6]):s,t[6]=u?xn(t[5],c):e[6]),(s=e[7])&&(t[7]=s),r&N&&(t[8]=null==t[8]?e[8]:Vn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(E,T),t=E[0],e=E[1],n=E[2],i=E[3],o=E[4],!(l=E[9]=E[9]===r?f?0:t.length:Wn(E[9]-p,0))&&e&(m|y)&&(e&=~(m|y)),e&&e!=g)x=e==m||e==y?function(t,e,n){var i=fo(t);return function o(){for(var a=arguments.length,s=Xt(a),u=a,c=Mo(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:xn(s,c);return(a-=l.length)<n?No(t,e,go,o.placeholder,r,s,l,r,r,n-a):He(this&&this!==Ie&&this instanceof o?i:t,this,s)}}(t,e,l):e!=b&&e!=(g|b)||o.length?go.apply(r,E):function(t,e,n,r){var i=e&g,o=fo(t);return function e(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=Xt(c+s),f=this&&this!==Ie&&this instanceof e?o:t;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return He(f,i?n:this,l)}}(t,e,n,i);else var x=function(t,e,n){var r=e&g,i=fo(t);return function e(){return(this&&this!==Ie&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return aa((T?ki:ra)(x,E),t,e)}function Ao(t,e,n,i){return t===r||hs(t,se[n])&&!le.call(i,n)?e:t}function ko(t,e,n,i,o,a){return As(t)&&As(e)&&(a.set(e,t),vi(t,e,r,ko,a),a.delete(e)),t}function Co(t){return Is(t)?r:t}function Do(t,e,n,i,o,a){var s=n&h,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,p=!0,g=n&d?new Nr:r;for(a.set(t,e),a.set(e,t);++f<u;){var v=t[f],_=e[f];if(i)var m=s?i(_,v,f,e,t,a):i(v,_,f,t,e,a);if(m!==r){if(m)continue;p=!1;break}if(g){if(!en(e,function(t,e){if(!_n(g,e)&&(v===t||o(v,t,n,i,a)))return g.push(e)})){p=!1;break}}else if(v!==_&&!o(v,_,n,i,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Io(t){return oa(ea(t,r,ma),t+"")}function $o(t){return Kr(t,iu,Uo)}function Oo(t){return Kr(t,ou,Jo)}var Ro=ir?function(t){return ir.get(t)}:Lu;function Lo(t){for(var e=t.name+"",n=or[e],r=le.call(or,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Mo(t){return(le.call(dr,"placeholder")?dr:t).placeholder}function Po(){var t=dr.iteratee||Iu;return t=t===Iu?ci:t,arguments.length?t(arguments[0],arguments[1]):t}function Bo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function jo(t){for(var e=iu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Zo(i)]}return e}function Fo(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return ui(n)?n:r}var Uo=Un?function(t){return null==t?[]:(t=ee(t),Ge(Un(t),function(e){return Le.call(t,e)}))}:Ju,Jo=Un?function(t){for(var e=[];t;)Ke(e,Uo(t)),t=$e(t);return e}:Ju,Ho=Zr;function qo(t,e,n){for(var r=-1,i=(e=Vi(e,t)).length,o=!1;++r<i;){var a=la(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&xs(i)&&Vo(a,i)&&(_s(t)||vs(t))}function zo(t){return"function"!=typeof t.constructor||Ko(t)?{}:gr($e(t))}function Wo(t){return _s(t)||vs(t)||!!(nn&&t&&t[nn])}function Vo(t,e){var n=typeof t;return!!(e=null==e?$:e)&&("number"==n||"symbol"!=n&&Wt.test(t))&&t>-1&&t%1==0&&t<e}function Go(t,e,n){if(!As(n))return!1;var r=typeof e;return!!("number"==r?ys(n)&&Vo(e,n.length):"string"==r&&e in n)&&hs(n[e],t)}function Yo(t,e){if(_s(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ls(t))||kt.test(t)||!At.test(t)||null!=e&&t in ee(e)}function Xo(t){var e=Lo(t),n=dr[e];if("function"!=typeof n||!(e in mr.prototype))return!1;if(t===n)return!0;var r=Ro(n);return!!r&&t===r[0]}(Kn&&Ho(new Kn(new ArrayBuffer(1)))!=st||Zn&&Ho(new Zn)!=G||tr&&"[object Promise]"!=Ho(tr.resolve())||er&&Ho(new er)!=tt||nr&&Ho(new nr)!=it)&&(Ho=function(t){var e=Zr(t),n=e==Q?t.constructor:r,i=n?fa(n):"";if(i)switch(i){case ar:return st;case sr:return G;case ur:return"[object Promise]";case cr:return tt;case lr:return it}return e});var Qo=ue?Ts:Hu;function Ko(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se)}function Zo(t){return t==t&&!As(t)}function ta(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in ee(n))}}function ea(t,e,n){return e=Wn(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Wn(r.length-e,0),a=Xt(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Xt(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),He(t,this,s)}}function na(t,e){return e.length<2?t:Qr(t,Ii(e,0,-1))}var ra=sa(ki),ia=Bn||function(t,e){return Ie.setTimeout(t,e)},oa=sa(Ci);function aa(t,e,n){var r=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ze(B,function(n){var r="_."+n[0];e&n[1]&&!Ye(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Mt);return e?e[1].split(Pt):[]}(r),n)))}function sa(t){var e=0,n=0;return function(){var i=Gn(),o=k-(i-n);if(n=i,o>0){if(++e>=A)return arguments[0]}else e=0;return t.apply(r,arguments)}}function ua(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=Ni(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var ca=function(t){var e=ss(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ct,function(t,n,r,i){e.push(r?i.replace(jt,"$1"):n||t)}),e});function la(t){if("string"==typeof t||Ls(t))return t;var e=t+"";return"0"==e&&1/t==-I?"-0":e}function fa(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function pa(t){if(t instanceof mr)return t.clone();var e=new _r(t.__wrapped__,t.__chain__);return e.__actions__=ro(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ha=Ti(function(t,e){return bs(t)?jr(t,zr(e,1,bs,!0)):[]}),da=Ti(function(t,e){var n=Sa(e);return bs(n)&&(n=r),bs(t)?jr(t,zr(e,1,bs,!0),Po(n,2)):[]}),ga=Ti(function(t,e){var n=Sa(e);return bs(n)&&(n=r),bs(t)?jr(t,zr(e,1,bs,!0),r,n):[]});function va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Us(n);return i<0&&(i=Wn(r+i,0)),on(t,Po(e,3),i)}function _a(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Us(n),o=n<0?Wn(i+o,0):Vn(o,i-1)),on(t,Po(e,3),o,!0)}function ma(t){return null!=t&&t.length?zr(t,1):[]}function ya(t){return t&&t.length?t[0]:r}var ba=Ti(function(t){var e=Qe(t,zi);return e.length&&e[0]===t[0]?ri(e):[]}),wa=Ti(function(t){var e=Sa(t),n=Qe(t,zi);return e===Sa(n)?e=r:n.pop(),n.length&&n[0]===t[0]?ri(n,Po(e,2)):[]}),Na=Ti(function(t){var e=Sa(t),n=Qe(t,zi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?ri(n,r,e):[]});function Sa(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Ta=Ti(Ea);function Ea(t,e){return t&&t.length&&e&&e.length?bi(t,e):t}var xa=Io(function(t,e){var n=null==t?0:t.length,r=Rr(t,e);return wi(t,Qe(e,function(t){return Vo(t,n)?+t:t}).sort(to)),r});function Aa(t){return null==t?t:Qn.call(t)}var ka=Ti(function(t){return Bi(zr(t,1,bs,!0))}),Ca=Ti(function(t){var e=Sa(t);return bs(e)&&(e=r),Bi(zr(t,1,bs,!0),Po(e,2))}),Da=Ti(function(t){var e=Sa(t);return e="function"==typeof e?e:r,Bi(zr(t,1,bs,!0),r,e)});function Ia(t){if(!t||!t.length)return[];var e=0;return t=Ge(t,function(t){if(bs(t))return e=Wn(t.length,e),!0}),dn(e,function(e){return Qe(t,ln(e))})}function $a(t,e){if(!t||!t.length)return[];var n=Ia(t);return null==e?n:Qe(n,function(t){return He(e,r,t)})}var Oa=Ti(function(t,e){return bs(t)?jr(t,e):[]}),Ra=Ti(function(t){return Hi(Ge(t,bs))}),La=Ti(function(t){var e=Sa(t);return bs(e)&&(e=r),Hi(Ge(t,bs),Po(e,2))}),Ma=Ti(function(t){var e=Sa(t);return e="function"==typeof e?e:r,Hi(Ge(t,bs),r,e)}),Pa=Ti(Ia);var Ba=Ti(function(t){var e=t.length,n=e>1?t[e-1]:r;return $a(t,n="function"==typeof n?(t.pop(),n):r)});function ja(t){var e=dr(t);return e.__chain__=!0,e}function Fa(t,e){return e(t)}var Ua=Io(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return Rr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof mr&&Vo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Fa,args:[o],thisArg:r}),new _r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(o)});var Ja=oo(function(t,e,n){le.call(t,n)?++t[n]:Or(t,n,1)});var Ha=po(va),qa=po(_a);function za(t,e){return(_s(t)?ze:Fr)(t,Po(e,3))}function Wa(t,e){return(_s(t)?We:Ur)(t,Po(e,3))}var Va=oo(function(t,e,n){le.call(t,n)?t[n].push(e):Or(t,n,[e])});var Ga=Ti(function(t,e,n){var r=-1,i="function"==typeof e,o=ys(t)?Xt(t.length):[];return Fr(t,function(t){o[++r]=i?He(e,t,n):ii(t,e,n)}),o}),Ya=oo(function(t,e,n){Or(t,n,e)});function Xa(t,e){return(_s(t)?Qe:hi)(t,Po(e,3))}var Qa=oo(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ka=Ti(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Go(t,e[0],e[1])?e=[]:n>2&&Go(e[0],e[1],e[2])&&(e=[e[0]]),mi(t,zr(e,1),[])}),Za=Pn||function(){return Ie.Date.now()};function ts(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,xo(t,N,r,r,r,r,e)}function es(t,e){var n;if("function"!=typeof e)throw new ie(a);return t=Us(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var ns=Ti(function(t,e,n){var r=g;if(n.length){var i=xn(n,Mo(ns));r|=b}return xo(t,r,e,n,i)}),rs=Ti(function(t,e,n){var r=g|v;if(n.length){var i=xn(n,Mo(rs));r|=b}return xo(e,r,t,n,i)});function is(t,e,n){var i,o,s,u,c,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new ie(a);function g(e){var n=i,a=o;return i=o=r,f=e,u=t.apply(a,n)}function v(t){var n=t-l;return l===r||n>=e||n<0||h&&t-f>=s}function _(){var t=Za();if(v(t))return m(t);c=ia(_,function(t){var n=e-(t-l);return h?Vn(n,s-(t-f)):n}(t))}function m(t){return c=r,d&&i?g(t):(i=o=r,u)}function y(){var t=Za(),n=v(t);if(i=arguments,o=this,l=t,n){if(c===r)return function(t){return f=t,c=ia(_,e),p?g(t):u}(l);if(h)return c=ia(_,e),g(l)}return c===r&&(c=ia(_,e)),u}return e=Hs(e)||0,As(n)&&(p=!!n.leading,s=(h="maxWait"in n)?Wn(Hs(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),y.cancel=function(){c!==r&&Xi(c),f=0,i=l=o=c=r},y.flush=function(){return c===r?u:m(Za())},y}var os=Ti(function(t,e){return Br(t,1,e)}),as=Ti(function(t,e,n){return Br(t,Hs(e)||0,n)});function ss(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ss.Cache||wr),n}function us(t){if("function"!=typeof t)throw new ie(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ss.Cache=wr;var cs=Gi(function(t,e){var n=(e=1==e.length&&_s(e[0])?Qe(e[0],gn(Po())):Qe(zr(e,1),gn(Po()))).length;return Ti(function(r){for(var i=-1,o=Vn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return He(t,this,r)})}),ls=Ti(function(t,e){var n=xn(e,Mo(ls));return xo(t,b,r,e,n)}),fs=Ti(function(t,e){var n=xn(e,Mo(fs));return xo(t,w,r,e,n)}),ps=Io(function(t,e){return xo(t,S,r,r,r,e)});function hs(t,e){return t===e||t!=t&&e!=e}var ds=wo(ti),gs=wo(function(t,e){return t>=e}),vs=oi(function(){return arguments}())?oi:function(t){return ks(t)&&le.call(t,"callee")&&!Le.call(t,"callee")},_s=Xt.isArray,ms=Pe?gn(Pe):function(t){return ks(t)&&Zr(t)==at};function ys(t){return null!=t&&xs(t.length)&&!Ts(t)}function bs(t){return ks(t)&&ys(t)}var ws=Jn||Hu,Ns=Be?gn(Be):function(t){return ks(t)&&Zr(t)==H};function Ss(t){if(!ks(t))return!1;var e=Zr(t);return e==z||e==q||"string"==typeof t.message&&"string"==typeof t.name&&!Is(t)}function Ts(t){if(!As(t))return!1;var e=Zr(t);return e==W||e==V||e==U||e==K}function Es(t){return"number"==typeof t&&t==Us(t)}function xs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=$}function As(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ks(t){return null!=t&&"object"==typeof t}var Cs=je?gn(je):function(t){return ks(t)&&Ho(t)==G};function Ds(t){return"number"==typeof t||ks(t)&&Zr(t)==Y}function Is(t){if(!ks(t)||Zr(t)!=Q)return!1;var e=$e(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==de}var $s=Fe?gn(Fe):function(t){return ks(t)&&Zr(t)==Z};var Os=Ue?gn(Ue):function(t){return ks(t)&&Ho(t)==tt};function Rs(t){return"string"==typeof t||!_s(t)&&ks(t)&&Zr(t)==et}function Ls(t){return"symbol"==typeof t||ks(t)&&Zr(t)==nt}var Ms=Je?gn(Je):function(t){return ks(t)&&xs(t.length)&&!!Te[Zr(t)]};var Ps=wo(pi),Bs=wo(function(t,e){return t<=e});function js(t){if(!t)return[];if(ys(t))return Rs(t)?In(t):ro(t);if(fn&&t[fn])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[fn]());var e=Ho(t);return(e==G?Tn:e==tt?kn:hu)(t)}function Fs(t){return t?(t=Hs(t))===I||t===-I?(t<0?-1:1)*O:t==t?t:0:0===t?t:0}function Us(t){var e=Fs(t),n=e%1;return e==e?n?e-n:e:0}function Js(t){return t?Lr(Us(t),0,L):0}function Hs(t){if("number"==typeof t)return t;if(Ls(t))return R;if(As(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=As(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace($t,"");var n=Ht.test(t);return n||zt.test(t)?ke(t.slice(2),n?2:8):Jt.test(t)?R:+t}function qs(t){return io(t,ou(t))}function zs(t){return null==t?"":Pi(t)}var Ws=ao(function(t,e){if(Ko(e)||ys(e))io(e,iu(e),t);else for(var n in e)le.call(e,n)&&Cr(t,n,e[n])}),Vs=ao(function(t,e){io(e,ou(e),t)}),Gs=ao(function(t,e,n,r){io(e,ou(e),t,r)}),Ys=ao(function(t,e,n,r){io(e,iu(e),t,r)}),Xs=Io(Rr);var Qs=Ti(function(t,e){t=ee(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&Go(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=ou(a),u=-1,c=s.length;++u<c;){var l=s[u],f=t[l];(f===r||hs(f,se[l])&&!le.call(t,l))&&(t[l]=a[l])}return t}),Ks=Ti(function(t){return t.push(r,ko),He(su,r,t)});function Zs(t,e,n){var i=null==t?r:Qr(t,e);return i===r?n:i}function tu(t,e){return null!=t&&qo(t,e,ni)}var eu=vo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),t[e]=n},Au(Du)),nu=vo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]},Po),ru=Ti(ii);function iu(t){return ys(t)?Tr(t):li(t)}function ou(t){return ys(t)?Tr(t,!0):fi(t)}var au=ao(function(t,e,n){vi(t,e,n)}),su=ao(function(t,e,n,r){vi(t,e,n,r)}),uu=Io(function(t,e){var n={};if(null==t)return n;var r=!1;e=Qe(e,function(e){return e=Vi(e,t),r||(r=e.length>1),e}),io(t,Oo(t),n),r&&(n=Mr(n,l|f|p,Co));for(var i=e.length;i--;)ji(n,e[i]);return n});var cu=Io(function(t,e){return null==t?{}:function(t,e){return yi(t,e,function(e,n){return tu(t,n)})}(t,e)});function lu(t,e){if(null==t)return{};var n=Qe(Oo(t),function(t){return[t]});return e=Po(e),yi(t,n,function(t,n){return e(t,n[0])})}var fu=Eo(iu),pu=Eo(ou);function hu(t){return null==t?[]:vn(t,iu(t))}var du=lo(function(t,e,n){return e=e.toLowerCase(),t+(n?gu(e):e)});function gu(t){return Su(zs(t).toLowerCase())}function vu(t){return(t=zs(t))&&t.replace(Vt,bn).replace(_e,"")}var _u=lo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),mu=lo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),yu=co("toLowerCase");var bu=lo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var wu=lo(function(t,e,n){return t+(n?" ":"")+Su(e)});var Nu=lo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Su=co("toUpperCase");function Tu(t,e,n){return t=zs(t),(e=n?r:e)===r?function(t){return we.test(t)}(t)?function(t){return t.match(ye)||[]}(t):function(t){return t.match(Bt)||[]}(t):t.match(e)||[]}var Eu=Ti(function(t,e){try{return He(t,r,e)}catch(t){return Ss(t)?t:new Kt(t)}}),xu=Io(function(t,e){return ze(e,function(e){e=la(e),Or(t,e,ns(t[e],t))}),t});function Au(t){return function(){return t}}var ku=ho(),Cu=ho(!0);function Du(t){return t}function Iu(t){return ci("function"==typeof t?t:Mr(t,l))}var $u=Ti(function(t,e){return function(n){return ii(n,t,e)}}),Ou=Ti(function(t,e){return function(n){return ii(t,n,e)}});function Ru(t,e,n){var r=iu(e),i=Xr(e,r);null!=n||As(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Xr(e,iu(e)));var o=!(As(n)&&"chain"in n&&!n.chain),a=Ts(t);return ze(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=ro(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ke([this.value()],arguments))})}),t}function Lu(){}var Mu=mo(Qe),Pu=mo(Ve),Bu=mo(en);function ju(t){return Yo(t)?ln(la(t)):function(t){return function(e){return Qr(e,t)}}(t)}var Fu=bo(),Uu=bo(!0);function Ju(){return[]}function Hu(){return!1}var qu=_o(function(t,e){return t+e},0),zu=So("ceil"),Wu=_o(function(t,e){return t/e},1),Vu=So("floor");var Gu,Yu=_o(function(t,e){return t*e},1),Xu=So("round"),Qu=_o(function(t,e){return t-e},0);return dr.after=function(t,e){if("function"!=typeof e)throw new ie(a);return t=Us(t),function(){if(--t<1)return e.apply(this,arguments)}},dr.ary=ts,dr.assign=Ws,dr.assignIn=Vs,dr.assignInWith=Gs,dr.assignWith=Ys,dr.at=Xs,dr.before=es,dr.bind=ns,dr.bindAll=xu,dr.bindKey=rs,dr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return _s(t)?t:[t]},dr.chain=ja,dr.chunk=function(t,e,n){e=(n?Go(t,e,n):e===r)?1:Wn(Us(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,a=0,s=Xt(jn(i/e));o<i;)s[a++]=Ii(t,o,o+=e);return s},dr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},dr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Xt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ke(_s(n)?ro(n):[n],zr(e,1))},dr.cond=function(t){var e=null==t?0:t.length,n=Po();return t=e?Qe(t,function(t){if("function"!=typeof t[1])throw new ie(a);return[n(t[0]),t[1]]}):[],Ti(function(n){for(var r=-1;++r<e;){var i=t[r];if(He(i[0],this,n))return He(i[1],this,n)}})},dr.conforms=function(t){return function(t){var e=iu(t);return function(n){return Pr(n,t,e)}}(Mr(t,l))},dr.constant=Au,dr.countBy=Ja,dr.create=function(t,e){var n=gr(t);return null==e?n:$r(n,e)},dr.curry=function t(e,n,i){var o=xo(e,m,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},dr.curryRight=function t(e,n,i){var o=xo(e,y,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},dr.debounce=is,dr.defaults=Qs,dr.defaultsDeep=Ks,dr.defer=os,dr.delay=as,dr.difference=ha,dr.differenceBy=da,dr.differenceWith=ga,dr.drop=function(t,e,n){var i=null==t?0:t.length;return i?Ii(t,(e=n||e===r?1:Us(e))<0?0:e,i):[]},dr.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Ii(t,0,(e=i-(e=n||e===r?1:Us(e)))<0?0:e):[]},dr.dropRightWhile=function(t,e){return t&&t.length?Ui(t,Po(e,3),!0,!0):[]},dr.dropWhile=function(t,e){return t&&t.length?Ui(t,Po(e,3),!0):[]},dr.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Go(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=Us(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:Us(i))<0&&(i+=o),i=n>i?0:Js(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},dr.filter=function(t,e){return(_s(t)?Ge:qr)(t,Po(e,3))},dr.flatMap=function(t,e){return zr(Xa(t,e),1)},dr.flatMapDeep=function(t,e){return zr(Xa(t,e),I)},dr.flatMapDepth=function(t,e,n){return n=n===r?1:Us(n),zr(Xa(t,e),n)},dr.flatten=ma,dr.flattenDeep=function(t){return null!=t&&t.length?zr(t,I):[]},dr.flattenDepth=function(t,e){return null!=t&&t.length?zr(t,e=e===r?1:Us(e)):[]},dr.flip=function(t){return xo(t,T)},dr.flow=ku,dr.flowRight=Cu,dr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},dr.functions=function(t){return null==t?[]:Xr(t,iu(t))},dr.functionsIn=function(t){return null==t?[]:Xr(t,ou(t))},dr.groupBy=Va,dr.initial=function(t){return null!=t&&t.length?Ii(t,0,-1):[]},dr.intersection=ba,dr.intersectionBy=wa,dr.intersectionWith=Na,dr.invert=eu,dr.invertBy=nu,dr.invokeMap=Ga,dr.iteratee=Iu,dr.keyBy=Ya,dr.keys=iu,dr.keysIn=ou,dr.map=Xa,dr.mapKeys=function(t,e){var n={};return e=Po(e,3),Gr(t,function(t,r,i){Or(n,e(t,r,i),t)}),n},dr.mapValues=function(t,e){var n={};return e=Po(e,3),Gr(t,function(t,r,i){Or(n,r,e(t,r,i))}),n},dr.matches=function(t){return di(Mr(t,l))},dr.matchesProperty=function(t,e){return gi(t,Mr(e,l))},dr.memoize=ss,dr.merge=au,dr.mergeWith=su,dr.method=$u,dr.methodOf=Ou,dr.mixin=Ru,dr.negate=us,dr.nthArg=function(t){return t=Us(t),Ti(function(e){return _i(e,t)})},dr.omit=uu,dr.omitBy=function(t,e){return lu(t,us(Po(e)))},dr.once=function(t){return es(2,t)},dr.orderBy=function(t,e,n,i){return null==t?[]:(_s(e)||(e=null==e?[]:[e]),_s(n=i?r:n)||(n=null==n?[]:[n]),mi(t,e,n))},dr.over=Mu,dr.overArgs=cs,dr.overEvery=Pu,dr.overSome=Bu,dr.partial=ls,dr.partialRight=fs,dr.partition=Qa,dr.pick=cu,dr.pickBy=lu,dr.property=ju,dr.propertyOf=function(t){return function(e){return null==t?r:Qr(t,e)}},dr.pull=Ta,dr.pullAll=Ea,dr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,Po(n,2)):t},dr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,r,n):t},dr.pullAt=xa,dr.range=Fu,dr.rangeRight=Uu,dr.rearg=ps,dr.reject=function(t,e){return(_s(t)?Ge:qr)(t,us(Po(e,3)))},dr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Po(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return wi(t,i),n},dr.rest=function(t,e){if("function"!=typeof t)throw new ie(a);return Ti(t,e=e===r?e:Us(e))},dr.reverse=Aa,dr.sampleSize=function(t,e,n){return e=(n?Go(t,e,n):e===r)?1:Us(e),(_s(t)?xr:xi)(t,e)},dr.set=function(t,e,n){return null==t?t:Ai(t,e,n)},dr.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Ai(t,e,n,i)},dr.shuffle=function(t){return(_s(t)?Ar:Di)(t)},dr.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Go(t,e,n)?(e=0,n=i):(e=null==e?0:Us(e),n=n===r?i:Us(n)),Ii(t,e,n)):[]},dr.sortBy=Ka,dr.sortedUniq=function(t){return t&&t.length?Li(t):[]},dr.sortedUniqBy=function(t,e){return t&&t.length?Li(t,Po(e,2)):[]},dr.split=function(t,e,n){return n&&"number"!=typeof n&&Go(t,e,n)&&(e=n=r),(n=n===r?L:n>>>0)?(t=zs(t))&&("string"==typeof e||null!=e&&!$s(e))&&!(e=Pi(e))&&Sn(t)?Yi(In(t),0,n):t.split(e,n):[]},dr.spread=function(t,e){if("function"!=typeof t)throw new ie(a);return e=null==e?0:Wn(Us(e),0),Ti(function(n){var r=n[e],i=Yi(n,0,e);return r&&Ke(i,r),He(t,this,i)})},dr.tail=function(t){var e=null==t?0:t.length;return e?Ii(t,1,e):[]},dr.take=function(t,e,n){return t&&t.length?Ii(t,0,(e=n||e===r?1:Us(e))<0?0:e):[]},dr.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Ii(t,(e=i-(e=n||e===r?1:Us(e)))<0?0:e,i):[]},dr.takeRightWhile=function(t,e){return t&&t.length?Ui(t,Po(e,3),!1,!0):[]},dr.takeWhile=function(t,e){return t&&t.length?Ui(t,Po(e,3)):[]},dr.tap=function(t,e){return e(t),t},dr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ie(a);return As(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),is(t,e,{leading:r,maxWait:e,trailing:i})},dr.thru=Fa,dr.toArray=js,dr.toPairs=fu,dr.toPairsIn=pu,dr.toPath=function(t){return _s(t)?Qe(t,la):Ls(t)?[t]:ro(ca(zs(t)))},dr.toPlainObject=qs,dr.transform=function(t,e,n){var r=_s(t),i=r||ws(t)||Ms(t);if(e=Po(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:As(t)&&Ts(o)?gr($e(t)):{}}return(i?ze:Gr)(t,function(t,r,i){return e(n,t,r,i)}),n},dr.unary=function(t){return ts(t,1)},dr.union=ka,dr.unionBy=Ca,dr.unionWith=Da,dr.uniq=function(t){return t&&t.length?Bi(t):[]},dr.uniqBy=function(t,e){return t&&t.length?Bi(t,Po(e,2)):[]},dr.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Bi(t,r,e):[]},dr.unset=function(t,e){return null==t||ji(t,e)},dr.unzip=Ia,dr.unzipWith=$a,dr.update=function(t,e,n){return null==t?t:Fi(t,e,Wi(n))},dr.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Fi(t,e,Wi(n),i)},dr.values=hu,dr.valuesIn=function(t){return null==t?[]:vn(t,ou(t))},dr.without=Oa,dr.words=Tu,dr.wrap=function(t,e){return ls(Wi(e),t)},dr.xor=Ra,dr.xorBy=La,dr.xorWith=Ma,dr.zip=Pa,dr.zipObject=function(t,e){return qi(t||[],e||[],Cr)},dr.zipObjectDeep=function(t,e){return qi(t||[],e||[],Ai)},dr.zipWith=Ba,dr.entries=fu,dr.entriesIn=pu,dr.extend=Vs,dr.extendWith=Gs,Ru(dr,dr),dr.add=qu,dr.attempt=Eu,dr.camelCase=du,dr.capitalize=gu,dr.ceil=zu,dr.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Hs(n))==n?n:0),e!==r&&(e=(e=Hs(e))==e?e:0),Lr(Hs(t),e,n)},dr.clone=function(t){return Mr(t,p)},dr.cloneDeep=function(t){return Mr(t,l|p)},dr.cloneDeepWith=function(t,e){return Mr(t,l|p,e="function"==typeof e?e:r)},dr.cloneWith=function(t,e){return Mr(t,p,e="function"==typeof e?e:r)},dr.conformsTo=function(t,e){return null==e||Pr(t,e,iu(e))},dr.deburr=vu,dr.defaultTo=function(t,e){return null==t||t!=t?e:t},dr.divide=Wu,dr.endsWith=function(t,e,n){t=zs(t),e=Pi(e);var i=t.length,o=n=n===r?i:Lr(Us(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},dr.eq=hs,dr.escape=function(t){return(t=zs(t))&&St.test(t)?t.replace(wt,wn):t},dr.escapeRegExp=function(t){return(t=zs(t))&&It.test(t)?t.replace(Dt,"\\$&"):t},dr.every=function(t,e,n){var i=_s(t)?Ve:Jr;return n&&Go(t,e,n)&&(e=r),i(t,Po(e,3))},dr.find=Ha,dr.findIndex=va,dr.findKey=function(t,e){return rn(t,Po(e,3),Gr)},dr.findLast=qa,dr.findLastIndex=_a,dr.findLastKey=function(t,e){return rn(t,Po(e,3),Yr)},dr.floor=Vu,dr.forEach=za,dr.forEachRight=Wa,dr.forIn=function(t,e){return null==t?t:Wr(t,Po(e,3),ou)},dr.forInRight=function(t,e){return null==t?t:Vr(t,Po(e,3),ou)},dr.forOwn=function(t,e){return t&&Gr(t,Po(e,3))},dr.forOwnRight=function(t,e){return t&&Yr(t,Po(e,3))},dr.get=Zs,dr.gt=ds,dr.gte=gs,dr.has=function(t,e){return null!=t&&qo(t,e,ei)},dr.hasIn=tu,dr.head=ya,dr.identity=Du,dr.includes=function(t,e,n,r){t=ys(t)?t:hu(t),n=n&&!r?Us(n):0;var i=t.length;return n<0&&(n=Wn(i+n,0)),Rs(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&an(t,e,n)>-1},dr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Us(n);return i<0&&(i=Wn(r+i,0)),an(t,e,i)},dr.inRange=function(t,e,n){return e=Fs(e),n===r?(n=e,e=0):n=Fs(n),function(t,e,n){return t>=Vn(e,n)&&t<Wn(e,n)}(t=Hs(t),e,n)},dr.invoke=ru,dr.isArguments=vs,dr.isArray=_s,dr.isArrayBuffer=ms,dr.isArrayLike=ys,dr.isArrayLikeObject=bs,dr.isBoolean=function(t){return!0===t||!1===t||ks(t)&&Zr(t)==J},dr.isBuffer=ws,dr.isDate=Ns,dr.isElement=function(t){return ks(t)&&1===t.nodeType&&!Is(t)},dr.isEmpty=function(t){if(null==t)return!0;if(ys(t)&&(_s(t)||"string"==typeof t||"function"==typeof t.splice||ws(t)||Ms(t)||vs(t)))return!t.length;var e=Ho(t);if(e==G||e==tt)return!t.size;if(Ko(t))return!li(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},dr.isEqual=function(t,e){return ai(t,e)},dr.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?ai(t,e,r,n):!!i},dr.isError=Ss,dr.isFinite=function(t){return"number"==typeof t&&Hn(t)},dr.isFunction=Ts,dr.isInteger=Es,dr.isLength=xs,dr.isMap=Cs,dr.isMatch=function(t,e){return t===e||si(t,e,jo(e))},dr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,si(t,e,jo(e),n)},dr.isNaN=function(t){return Ds(t)&&t!=+t},dr.isNative=function(t){if(Qo(t))throw new Kt(o);return ui(t)},dr.isNil=function(t){return null==t},dr.isNull=function(t){return null===t},dr.isNumber=Ds,dr.isObject=As,dr.isObjectLike=ks,dr.isPlainObject=Is,dr.isRegExp=$s,dr.isSafeInteger=function(t){return Es(t)&&t>=-$&&t<=$},dr.isSet=Os,dr.isString=Rs,dr.isSymbol=Ls,dr.isTypedArray=Ms,dr.isUndefined=function(t){return t===r},dr.isWeakMap=function(t){return ks(t)&&Ho(t)==it},dr.isWeakSet=function(t){return ks(t)&&Zr(t)==ot},dr.join=function(t,e){return null==t?"":qn.call(t,e)},dr.kebabCase=_u,dr.last=Sa,dr.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=Us(n))<0?Wn(i+o,0):Vn(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):on(t,un,o,!0)},dr.lowerCase=mu,dr.lowerFirst=yu,dr.lt=Ps,dr.lte=Bs,dr.max=function(t){return t&&t.length?Hr(t,Du,ti):r},dr.maxBy=function(t,e){return t&&t.length?Hr(t,Po(e,2),ti):r},dr.mean=function(t){return cn(t,Du)},dr.meanBy=function(t,e){return cn(t,Po(e,2))},dr.min=function(t){return t&&t.length?Hr(t,Du,pi):r},dr.minBy=function(t,e){return t&&t.length?Hr(t,Po(e,2),pi):r},dr.stubArray=Ju,dr.stubFalse=Hu,dr.stubObject=function(){return{}},dr.stubString=function(){return""},dr.stubTrue=function(){return!0},dr.multiply=Yu,dr.nth=function(t,e){return t&&t.length?_i(t,Us(e)):r},dr.noConflict=function(){return Ie._===this&&(Ie._=ge),this},dr.noop=Lu,dr.now=Za,dr.pad=function(t,e,n){t=zs(t);var r=(e=Us(e))?Dn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return yo(Fn(i),n)+t+yo(jn(i),n)},dr.padEnd=function(t,e,n){t=zs(t);var r=(e=Us(e))?Dn(t):0;return e&&r<e?t+yo(e-r,n):t},dr.padStart=function(t,e,n){t=zs(t);var r=(e=Us(e))?Dn(t):0;return e&&r<e?yo(e-r,n)+t:t},dr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Yn(zs(t).replace(Ot,""),e||0)},dr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Go(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=Fs(t),e===r?(e=t,t=0):e=Fs(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Xn();return Vn(t+o*(e-t+Ae("1e-"+((o+"").length-1))),e)}return Ni(t,e)},dr.reduce=function(t,e,n){var r=_s(t)?Ze:pn,i=arguments.length<3;return r(t,Po(e,4),n,i,Fr)},dr.reduceRight=function(t,e,n){var r=_s(t)?tn:pn,i=arguments.length<3;return r(t,Po(e,4),n,i,Ur)},dr.repeat=function(t,e,n){return e=(n?Go(t,e,n):e===r)?1:Us(e),Si(zs(t),e)},dr.replace=function(){var t=arguments,e=zs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dr.result=function(t,e,n){var i=-1,o=(e=Vi(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[la(e[i])];a===r&&(i=o,a=n),t=Ts(a)?a.call(t):a}return t},dr.round=Xu,dr.runInContext=t,dr.sample=function(t){return(_s(t)?Er:Ei)(t)},dr.size=function(t){if(null==t)return 0;if(ys(t))return Rs(t)?Dn(t):t.length;var e=Ho(t);return e==G||e==tt?t.size:li(t).length},dr.snakeCase=bu,dr.some=function(t,e,n){var i=_s(t)?en:$i;return n&&Go(t,e,n)&&(e=r),i(t,Po(e,3))},dr.sortedIndex=function(t,e){return Oi(t,e)},dr.sortedIndexBy=function(t,e,n){return Ri(t,e,Po(n,2))},dr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Oi(t,e);if(r<n&&hs(t[r],e))return r}return-1},dr.sortedLastIndex=function(t,e){return Oi(t,e,!0)},dr.sortedLastIndexBy=function(t,e,n){return Ri(t,e,Po(n,2),!0)},dr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Oi(t,e,!0)-1;if(hs(t[n],e))return n}return-1},dr.startCase=wu,dr.startsWith=function(t,e,n){return t=zs(t),n=null==n?0:Lr(Us(n),0,t.length),e=Pi(e),t.slice(n,n+e.length)==e},dr.subtract=Qu,dr.sum=function(t){return t&&t.length?hn(t,Du):0},dr.sumBy=function(t,e){return t&&t.length?hn(t,Po(e,2)):0},dr.template=function(t,e,n){var i=dr.templateSettings;n&&Go(t,e,n)&&(e=r),t=zs(t),e=Gs({},e,i,Ao);var o,a,s=Gs({},e.imports,i.imports,Ao),u=iu(s),c=vn(s,u),l=0,f=e.interpolate||Gt,p="__p += '",h=ne((e.escape||Gt).source+"|"+f.source+"|"+(f===xt?Ft:Gt).source+"|"+(e.evaluate||Gt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Se+"]")+"\n";t.replace(h,function(e,n,r,i,s,u){return r||(r=i),p+=t.slice(l,u).replace(Yt,Nn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),p+="';\n";var g=e.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(_t,""):p).replace(mt,"$1").replace(yt,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Eu(function(){return Zt(u,d+"return "+p).apply(r,c)});if(v.source=p,Ss(v))throw v;return v},dr.times=function(t,e){if((t=Us(t))<1||t>$)return[];var n=L,r=Vn(t,L);e=Po(e),t-=L;for(var i=dn(r,e);++n<t;)e(n);return i},dr.toFinite=Fs,dr.toInteger=Us,dr.toLength=Js,dr.toLower=function(t){return zs(t).toLowerCase()},dr.toNumber=Hs,dr.toSafeInteger=function(t){return t?Lr(Us(t),-$,$):0===t?t:0},dr.toString=zs,dr.toUpper=function(t){return zs(t).toUpperCase()},dr.trim=function(t,e,n){if((t=zs(t))&&(n||e===r))return t.replace($t,"");if(!t||!(e=Pi(e)))return t;var i=In(t),o=In(e);return Yi(i,mn(i,o),yn(i,o)+1).join("")},dr.trimEnd=function(t,e,n){if((t=zs(t))&&(n||e===r))return t.replace(Rt,"");if(!t||!(e=Pi(e)))return t;var i=In(t);return Yi(i,0,yn(i,In(e))+1).join("")},dr.trimStart=function(t,e,n){if((t=zs(t))&&(n||e===r))return t.replace(Ot,"");if(!t||!(e=Pi(e)))return t;var i=In(t);return Yi(i,mn(i,In(e))).join("")},dr.truncate=function(t,e){var n=E,i=x;if(As(e)){var o="separator"in e?e.separator:o;n="length"in e?Us(e.length):n,i="omission"in e?Pi(e.omission):i}var a=(t=zs(t)).length;if(Sn(t)){var s=In(t);a=s.length}if(n>=a)return t;var u=n-Dn(i);if(u<1)return i;var c=s?Yi(s,0,u).join(""):t.slice(0,u);if(o===r)return c+i;if(s&&(u+=c.length-u),$s(o)){if(t.slice(u).search(o)){var l,f=c;for(o.global||(o=ne(o.source,zs(Ut.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var p=l.index;c=c.slice(0,p===r?u:p)}}else if(t.indexOf(Pi(o),u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+i},dr.unescape=function(t){return(t=zs(t))&&Nt.test(t)?t.replace(bt,$n):t},dr.uniqueId=function(t){var e=++fe;return zs(t)+e},dr.upperCase=Nu,dr.upperFirst=Su,dr.each=za,dr.eachRight=Wa,dr.first=ya,Ru(dr,(Gu={},Gr(dr,function(t,e){le.call(dr.prototype,e)||(Gu[e]=t)}),Gu),{chain:!1}),dr.VERSION="4.17.5",ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){dr[t].placeholder=dr}),ze(["drop","take"],function(t,e){mr.prototype[t]=function(n){n=n===r?1:Wn(Us(n),0);var i=this.__filtered__&&!e?new mr(this):this.clone();return i.__filtered__?i.__takeCount__=Vn(n,i.__takeCount__):i.__views__.push({size:Vn(n,L),type:t+(i.__dir__<0?"Right":"")}),i},mr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ze(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==C||3==n;mr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Po(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),ze(["head","last"],function(t,e){var n="take"+(e?"Right":"");mr.prototype[t]=function(){return this[n](1).value()[0]}}),ze(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");mr.prototype[t]=function(){return this.__filtered__?new mr(this):this[n](1)}}),mr.prototype.compact=function(){return this.filter(Du)},mr.prototype.find=function(t){return this.filter(t).head()},mr.prototype.findLast=function(t){return this.reverse().find(t)},mr.prototype.invokeMap=Ti(function(t,e){return"function"==typeof t?new mr(this):this.map(function(n){return ii(n,t,e)})}),mr.prototype.reject=function(t){return this.filter(us(Po(t)))},mr.prototype.slice=function(t,e){t=Us(t);var n=this;return n.__filtered__&&(t>0||e<0)?new mr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=Us(e))<0?n.dropRight(-e):n.take(e-t)),n)},mr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},mr.prototype.toArray=function(){return this.take(L)},Gr(mr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=dr[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(dr.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,u=e instanceof mr,c=s[0],l=u||_s(e),f=function(t){var e=o.apply(dr,Ke([t],s));return i&&p?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=a&&!p,g=u&&!h;if(!a&&l){e=g?e:new mr(this);var v=t.apply(e,s);return v.__actions__.push({func:Fa,args:[f],thisArg:r}),new _r(v,p)}return d&&g?t.apply(this,s):(v=this.thru(f),d?i?v.value()[0]:v.value():v)})}),ze(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);dr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(_s(i)?i:[],t)}return this[n](function(n){return e.apply(_s(n)?n:[],t)})}}),Gr(mr.prototype,function(t,e){var n=dr[e];if(n){var r=n.name+"";(or[r]||(or[r]=[])).push({name:e,func:n})}}),or[go(r,v).name]=[{name:"wrapper",func:r}],mr.prototype.clone=function(){var t=new mr(this.__wrapped__);return t.__actions__=ro(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ro(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ro(this.__views__),t},mr.prototype.reverse=function(){if(this.__filtered__){var t=new mr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},mr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=_s(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Vn(e,t+a);break;case"takeRight":t=Wn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,p=0,h=Vn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return Ji(t,this.__actions__);var d=[];t:for(;u--&&p<h;){for(var g=-1,v=t[c+=e];++g<f;){var _=l[g],m=_.iteratee,y=_.type,b=m(v);if(y==D)v=b;else if(!b){if(y==C)continue t;break t}}d[p++]=v}return d},dr.prototype.at=Ua,dr.prototype.chain=function(){return ja(this)},dr.prototype.commit=function(){return new _r(this.value(),this.__chain__)},dr.prototype.next=function(){this.__values__===r&&(this.__values__=js(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},dr.prototype.plant=function(t){for(var e,n=this;n instanceof vr;){var i=pa(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},dr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof mr){var e=t;return this.__actions__.length&&(e=new mr(this)),(e=e.reverse()).__actions__.push({func:Fa,args:[Aa],thisArg:r}),new _r(e,this.__chain__)}return this.thru(Aa)},dr.prototype.toJSON=dr.prototype.valueOf=dr.prototype.value=function(){return Ji(this.__wrapped__,this.__actions__)},dr.prototype.first=dr.prototype.head,fn&&(dr.prototype[fn]=function(){return this}),dr}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ie._=On,define(function(){return On})):Oe?((Oe.exports=On)._=On,$e._=On):Ie._=On}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(t,e,n){var r=1e3,i=60*r,o=60*i,a=24*o,s=365.25*a;function u(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){e=e||{};var n,c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===c&&!1===isNaN(t))return e.long?u(n=t,a,"day")||u(n,o,"hour")||u(n,i,"minute")||u(n,r,"second")||n+" ms":function(t){if(t>=a)return Math.round(t/a)+"d";if(t>=o)return Math.round(t/o)+"h";if(t>=i)return Math.round(t/i)+"m";if(t>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],31:[function(t,e,n){n.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},n.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],32:[function(t,e,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,n=t.indexOf("["),o=t.indexOf("]");-1!=n&&-1!=o&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var a=r.exec(t||""),s={},u=14;u--;)s[i[u]]=a[u]||"";return-1!=n&&-1!=o&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],33:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,l=[],f=!1,p=-1;function h(){f&&c&&(f=!1,c.length?l=c.concat(l):p=-1,l.length&&d())}function d(){if(!f){var t=u(h);f=!0;for(var e=l.length;e;){for(c=l,l=[];++p<e;)c&&c[p].run();p=-1,e=l.length}c=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new g(t,e)),1!==l.length||f||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],34:[function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],35:[function(t,e,n){"use strict";var r=t("./stringify"),i=t("./parse"),o=t("./formats");e.exports={formats:o,parse:i,stringify:r}},{"./formats":34,"./parse":36,"./stringify":37}],36:[function(t,e,n){"use strict";var r=t("./utils"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,u=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;null!==(a=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,a=t[i];if("[]"===a)o=(o=[]).concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=r:o[s]=r}r=o}return r}(u,e,n)}};e.exports=function(t,e){var n=e?r.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===t||null===t||void 0===t)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,s=r.split(e.delimiter,a),u=0;u<s.length;++u){var c,l,f=s[u],p=f.indexOf("]="),h=-1===p?f.indexOf("="):p+1;-1===h?(c=e.decoder(f,o.decoder),l=e.strictNullHandling?null:""):(c=e.decoder(f.slice(0,h),o.decoder),l=e.decoder(f.slice(h+1),o.decoder)),i.call(n,c)?n[c]=[].concat(n[c]).concat(l):n[c]=l}return n}(t,n):t,u=n.plainObjects?Object.create(null):{},c=Object.keys(s),l=0;l<c.length;++l){var f=c[l],p=a(f,s[f],n);u=r.merge(u,p,n)}return r.compact(u)}},{"./utils":38}],37:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./formats"),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},u=function t(e,n,i,o,a,u,c,l,f,p,h,d){var g=e;if("function"==typeof c)g=c(n,g);else if(g instanceof Date)g=p(g);else if(null===g){if(o)return u&&!d?u(n,s.encoder):n;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||r.isBuffer(g))return u?[h(d?n:u(n,s.encoder))+"="+h(u(g,s.encoder))]:[h(n)+"="+h(String(g))];var v,_=[];if(void 0===g)return _;if(Array.isArray(c))v=c;else{var m=Object.keys(g);v=l?m.sort(l):m}for(var y=0;y<v.length;++y){var b=v[y];a&&null===g[b]||(_=Array.isArray(g)?_.concat(t(g[b],i(n,b),i,o,a,u,c,l,f,p,h,d)):_.concat(t(g[b],n+(f?"."+b:"["+b+"]"),i,o,a,u,c,l,f,p,h,d)))}return _};e.exports=function(t,e){var n=t,a=e?r.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===a.delimiter?s.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,f="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,p="boolean"==typeof a.encode?a.encode:s.encode,h="function"==typeof a.encoder?a.encoder:s.encoder,d="function"==typeof a.sort?a.sort:null,g=void 0!==a.allowDots&&a.allowDots,v="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,_="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,a.format))throw new TypeError("Unknown format option provided.");var m,y,b=i.formatters[a.format];"function"==typeof a.filter?n=(y=a.filter)("",n):Array.isArray(a.filter)&&(m=y=a.filter);var w,N=[];if("object"!=typeof n||null===n)return"";w=a.arrayFormat in o?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var S=o[w];m||(m=Object.keys(n)),d&&m.sort(d);for(var T=0;T<m.length;++T){var E=m[T];f&&null===n[E]||(N=N.concat(u(n[E],E,S,l,f,p?h:null,y,d,g,v,b,_)))}var x=N.join(c),A=!0===a.addQueryPrefix?"?":"";return x.length>0?A+x:""}},{"./formats":34,"./utils":38}],38:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();n.arrayToObject=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n},n.merge=function(t,e,i){if(!e)return t;if("object"!=typeof e){if(Array.isArray(t))t.push(e);else{if("object"!=typeof t)return[t,e];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,e))&&(t[e]=!0)}return t}if("object"!=typeof t)return[t].concat(e);var o=t;return Array.isArray(t)&&!Array.isArray(e)&&(o=n.arrayToObject(t,i)),Array.isArray(t)&&Array.isArray(e)?(e.forEach(function(e,o){r.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=n.merge(t[o],e,i):t.push(e):t[o]=e}),t):Object.keys(e).reduce(function(t,o){var a=e[o];return r.call(t,o)?t[o]=n.merge(t[o],a,i):t[o]=a,t},o)},n.assign=function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},n.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},n.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=e.charAt(r):o<128?n+=i[o]:o<2048?n+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?n+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),n+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return n},n.compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],a=Object.keys(o),s=0;s<a.length;++s){var u=a[s],c=o[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(e.push({obj:o,prop:u}),n.push(c))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],i=0;i<e.length;++i)void 0!==e[i]&&r.push(e[i]);n.obj[n.prop]=r}}return e}(e)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],39:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,p,h,d,g=t[l].replace(s,"%20"),v=g.indexOf(n);v>=0?(f=g.substr(0,v),p=g.substr(v+1)):(f=g,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),r(a,h)?i(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],40:[function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[a]))}).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],41:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":39,"./encode":40}],42:[function(t,e,n){var r=t("./url"),i=t("socket.io-parser"),o=t("./manager"),a=t("debug")("socket.io-client");e.exports=n=u;var s=n.managers={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i=r(t),u=i.source,c=i.id,l=i.path,f=s[c]&&l in s[c].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||f?(a("ignoring socket cache for %s",u),n=o(u,e)):(s[c]||(a("new io instance for %s",u),s[c]=o(u,e)),n=s[c]),i.query&&!e.query&&(e.query=i.query),n.socket(i.path,e)}n.protocol=i.protocol,n.connect=u,n.Manager=t("./manager"),n.Socket=t("./socket")},{"./manager":43,"./socket":45,"./url":46,debug:47,"socket.io-parser":50}],43:[function(t,e,n){var r=t("engine.io-client"),i=t("./socket"),o=t("component-emitter"),a=t("socket.io-parser"),s=t("./on"),u=t("component-bind"),c=t("debug")("socket.io-client:manager"),l=t("indexof"),f=t("backo2"),p=Object.prototype.hasOwnProperty;function h(t,e){if(!(this instanceof h))return new h(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}e.exports=h,h.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},h.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},h.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},o(h.prototype),h.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},h.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},h.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(t,e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=s(n,"open",function(){i.onopen(),t&&t()}),a=s(n,"error",function(e){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u);var l=setTimeout(function(){c("connect attempt timed out after %d",u),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",u)},u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(a),this},h.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(s(t,"data",u(this,"ondata"))),this.subs.push(s(t,"ping",u(this,"onping"))),this.subs.push(s(t,"pong",u(this,"onpong"))),this.subs.push(s(t,"error",u(this,"onerror"))),this.subs.push(s(t,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(t){this.decoder.add(t)},h.prototype.ondecoded=function(t){this.emit("packet",t)},h.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},h.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new i(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",function(){n.id=r.generateId(t)}),this.autoConnect&&o()}function o(){~l(r.connecting,n)||r.connecting.push(n)}return n},h.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},h.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},h.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},h.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":44,"./socket":45,backo2:3,"component-bind":8,"component-emitter":9,debug:47,"engine.io-client":11,indexof:28,"socket.io-parser":50}],44:[function(t,e,n){e.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},{}],45:[function(t,e,n){var r=t("socket.io-parser"),i=t("component-emitter"),o=t("to-array"),a=t("./on"),s=t("component-bind"),u=t("debug")("socket.io-client:socket"),c=t("parseqs"),l=t("has-binary2");e.exports=h;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;function h(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",s(this,"onopen")),a(t,"packet",s(this,"onpacket")),a(t,"close",s(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},h.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},h.prototype.emit=function(t){if(f.hasOwnProperty(t))return p.apply(this,arguments),this;var e=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},h.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},h.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:r.CONNECT,query:t})}else this.packet({type:r.CONNECT})},h.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},h.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},h.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},h.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);u("sending ack %j",i),e.packet({type:l(i)?r.BINARY_ACK:r.ACK,id:t,data:i})}}},h.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(t){return this.flags.compress=t,this},h.prototype.binary=function(t){return this.flags.binary=t,this}},{"./on":44,"component-bind":8,"component-emitter":9,debug:47,"has-binary2":25,parseqs:31,"socket.io-parser":50,"to-array":55}],46:[function(t,e,n){(function(n){var r=t("parseuri"),i=t("debug")("socket.io-client:url");e.exports=function(t,e){var o=t;e=e||n.location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),i("parse %s",t),o=r(t));o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443"));o.path=o.path||"/";var a=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+a+":"+o.port,o.href=o.protocol+"://"+a+(e&&e.port===o.port?"":":"+o.port),o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:47,parseuri:32}],47:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{"./debug":48,_process:33,dup:20}],48:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21,ms:30}],49:[function(t,e,n){(function(e){var r=t("isarray"),i=t("./is-buffer"),o=Object.prototype.toString,a="function"==typeof e.Blob||"[object BlobConstructor]"===o.call(e.Blob),s="function"==typeof e.File||"[object FileConstructor]"===o.call(e.File);n.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=function t(e,n){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s],n);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var u in e)a[u]=t(e[u],n);return a}return e}(n,e),o.attachments=e.length,{packet:o,buffers:e}},n.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(r(e))for(var i=0;i<e.length;i++)e[i]=t(e[i],n);else if("object"==typeof e)for(var o in e)e[o]=t(e[o],n);return e}(t.data,e),t.attachments=void 0,t},n.removeBlobs=function(t,e){var n=0,o=t;!function t(u,c,l){if(!u)return u;if(a&&u instanceof Blob||s&&u instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:o=this.result,--n||e(o)},f.readAsArrayBuffer(u)}else if(r(u))for(var p=0;p<u.length;p++)t(u[p],p,u);else if("object"==typeof u&&!i(u))for(var h in u)t(u[h],h,u)}(o),n||e(o)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":51,isarray:54}],50:[function(t,e,n){var r=t("debug")("socket.io-parser"),i=t("component-emitter"),o=t("./binary"),a=t("isarray"),s=t("./is-buffer");function u(){}n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=u,n.Decoder=f;var c=n.ERROR+'"encode error"';function l(t){var e=""+t.type;if(n.BINARY_EVENT!==t.type&&n.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data){var i=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===i)return c;e+=i}return r("encoded %j as %s",t,e),e}function f(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:n.ERROR,data:"parser error: "+t}}u.prototype.encode=function(t,e){(r("encoding packet %j",t),n.BINARY_EVENT===t.type||n.BINARY_ACK===t.type)?function(t,e){o.removeBlobs(t,function(t){var n=o.deconstructPacket(t),r=l(n.packet),i=n.buffers;i.unshift(r),e(i)})}(t,e):e([l(t)])},i(f.prototype),f.prototype.add=function(t){var e;if("string"==typeof t)e=function(t){var e=0,i={type:Number(t.charAt(0))};if(null==n.types[i.type])return h("unknown packet type "+i.type);if(n.BINARY_EVENT===i.type||n.BINARY_ACK===i.type){for(var o="";"-"!==t.charAt(++e)&&(o+=t.charAt(e),e!=t.length););if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===t.charAt(e+1))for(i.nsp="";++e;){var s=t.charAt(e);if(","===s)break;if(i.nsp+=s,e===t.length)break}else i.nsp="/";var u=t.charAt(e+1);if(""!==u&&Number(u)==u){for(i.id="";++e;){var s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(i.id+=t.charAt(e),e===t.length)break}i.id=Number(i.id)}if(t.charAt(++e)){var c=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e)),l=!1!==c&&(i.type===n.ERROR||a(c));if(!l)return h("invalid payload");i.data=c}return r("decoded %s as %j",t,i),i}(t),n.BINARY_EVENT===e.type||n.BINARY_ACK===e.type?(this.reconstructor=new p(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!s(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":49,"./is-buffer":51,"component-emitter":9,debug:52,isarray:54}],51:[function(t,e,n){(function(t){e.exports=function(e){return n&&t.Buffer.isBuffer(e)||r&&(e instanceof t.ArrayBuffer||i(e))};var n="function"==typeof t.Buffer&&"function"==typeof t.Buffer.isBuffer,r="function"==typeof t.ArrayBuffer,i=r&&"function"==typeof t.ArrayBuffer.isView?t.ArrayBuffer.isView:function(e){return e.buffer instanceof t.ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{"./debug":53,_process:33,dup:20}],53:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21,ms:30}],54:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],55:[function(t,e,n){e.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},{}],56:[function(t,e,n){function r(t){this.options=t||{locator:{}}}function i(){this.cdata=!1}function o(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function a(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function s(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function u(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}r.prototype.parseFromString=function(t,e){var n=this.options,r=new c,o=n.domBuilder||new i,s=n.errorHandler,u=n.locator,l=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&o.setDocumentLocator(u),r.errorHandler=function(t,e,n){if(!t){if(e instanceof i)return e;t=e}var r={},o=t instanceof Function;function s(e){var i=t[e];!i&&o&&(i=2==t.length?function(n){t(e,n)}:t),r[e]=i&&function(t){i("[xmldom "+e+"]\t"+t+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,o,u),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(f.nbsp=" ",f.copy="©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",t?r.parse(t,l,f):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,a=i.createElementNS(t,n||e),s=r.length;u(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var c=0;c<s;c++){t=r.getURI(c);var l=r.getValue(c),f=(n=r.getQName(c),i.createAttributeNS(t,n));this.locator&&o(r.getLocator(c),f),f.value=f.nodeValue=l,a.setAttributeNode(f)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&o(this.locator,n),u(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=s.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&o(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&o(this.locator,i),u(this,i)}},warning:function(t){console.warn("[xmldom warning]\t"+t,a(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,a(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]\t"+t,a(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){i.prototype[t]=function(){return null}});var c=t("./sax").XMLReader,l=n.DOMImplementation=t("./dom").DOMImplementation;n.XMLSerializer=t("./dom").XMLSerializer,n.DOMParser=r},{"./dom":57,"./sax":58}],57:[function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e){var n=t.prototype;if(Object.create){var i=Object.create(e.prototype);n.__proto__=i}if(!(n instanceof e)){function o(){}o.prototype=e.prototype,r(n,o=new o),t.prototype=n=o}n.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),n.constructor=t)}var o="http://www.w3.org/1999/xhtml",a={},s=a.ELEMENT_NODE=1,u=a.ATTRIBUTE_NODE=2,c=a.TEXT_NODE=3,l=a.CDATA_SECTION_NODE=4,f=a.ENTITY_REFERENCE_NODE=5,p=a.ENTITY_NODE=6,h=a.PROCESSING_INSTRUCTION_NODE=7,d=a.COMMENT_NODE=8,g=a.DOCUMENT_NODE=9,v=a.DOCUMENT_TYPE_NODE=10,_=a.DOCUMENT_FRAGMENT_NODE=11,m=a.NOTATION_NODE=12,y={},b={},w=(y.INDEX_SIZE_ERR=(b[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(b[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(b[3]="Hierarchy request error",3)),N=(y.WRONG_DOCUMENT_ERR=(b[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(b[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(b[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(b[7]="No modification allowed",7),y.NOT_FOUND_ERR=(b[8]="Not found",8)),S=(y.NOT_SUPPORTED_ERR=(b[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(b[10]="Attribute in use",10));y.INVALID_STATE_ERR=(b[11]="Invalid state",11),y.SYNTAX_ERR=(b[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(b[13]="Invalid modification",13),y.NAMESPACE_ERR=(b[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(b[15]="Invalid access",15);function T(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,b[t]),this.message=b[t],Error.captureStackTrace&&Error.captureStackTrace(this,T);return n.code=t,e&&(this.message=this.message+": "+e),n}function E(){}function x(t,e){this._node=t,this._refresh=e,A(this)}function A(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);rt(t,"length",n.length),r(n,t),t._inc=e}}function k(){}function C(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function D(t,e,n,r){if(r?e[C(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&P(i,t,r),function(t,e,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(i,t,n))}}function I(t,e,n){var r=C(e,n);if(!(r>=0))throw T(N,new Error(t.tagName+"@"+n));for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var o=t.ownerDocument;o&&(P(o,t,n),n.ownerElement=null)}}function $(t){if(this._features={},t)for(var e in t)this._features=t[e]}function O(){}function R(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function L(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(L(t,e))return!0}while(t=t.nextSibling)}function M(){}function P(t,e,n,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete e._nsMap[n.prefix?n.localName:""]}function B(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function j(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,B(t.ownerDocument,t),e}function F(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===_){var i=e.firstChild;if(null==i)return e;var o=e.lastChild}else i=o=e;var a=n?n.previousSibling:t.lastChild;i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:t.firstChild=i,null==n?t.lastChild=o:n.previousSibling=o;do{i.parentNode=t}while(i!==o&&(i=i.nextSibling));return B(t.ownerDocument||t,t),e.nodeType==_&&(e.firstChild=e.lastChild=null),e}function U(){this._nsMap={}}function J(){}function H(){}function q(){}function z(){}function W(){}function V(){}function G(){}function Y(){}function X(){}function Q(){}function K(){}function Z(){}function tt(t,e){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return nt(this,n,t,e,a),n.join("")}function et(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return!0}function nt(t,e,n,r,i){if(r){if(!(t=r(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case s:i||(i=[]);i.length;var a=t.attributes,p=a.length,m=t.firstChild,y=t.tagName;n=o===t.namespaceURI||n,e.push("<",y);for(var b=0;b<p;b++){"xmlns"==(w=a.item(b)).prefix?i.push({prefix:w.localName,namespace:w.value}):"xmlns"==w.nodeName&&i.push({prefix:"",namespace:w.value})}for(b=0;b<p;b++){var w;if(et(w=a.item(b),0,i)){var N=w.prefix||"",S=w.namespaceURI,T=N?" xmlns:"+N:" xmlns";e.push(T,'="',S,'"'),i.push({prefix:N,namespace:S})}nt(w,e,n,r,i)}if(et(t,0,i)){N=t.prefix||"",S=t.namespaceURI,T=N?" xmlns:"+N:" xmlns";e.push(T,'="',S,'"'),i.push({prefix:N,namespace:S})}if(m||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(e.push(">"),n&&/^script$/i.test(y))for(;m;)m.data?e.push(m.data):nt(m,e,n,r,i),m=m.nextSibling;else for(;m;)nt(m,e,n,r,i),m=m.nextSibling;e.push("</",y,">")}else e.push("/>");return;case g:case _:for(m=t.firstChild;m;)nt(m,e,n,r,i),m=m.nextSibling;return;case u:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,R),'"');case c:return e.push(t.data.replace(/[<&]/g,R));case l:return e.push("<![CDATA[",t.data,"]]>");case d:return e.push("\x3c!--",t.data,"--\x3e");case v:var E=t.publicId,x=t.systemId;if(e.push("<!DOCTYPE ",t.name),E)e.push(' PUBLIC "',E),x&&"."!=x&&e.push('" "',x),e.push('">');else if(x&&"."!=x)e.push(' SYSTEM "',x,'">');else{var A=t.internalSubset;A&&e.push(" [",A,"]"),e.push(">")}return;case h:return e.push("<?",t.target," ",t.data,"?>");case f:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function rt(t,e,n){t[e]=n}T.prototype=Error.prototype,r(y,T),E.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)nt(this[r],n,t,e);return n.join("")}},x.prototype.item=function(t){return A(this),this[t]},i(x,E),k.prototype={length:0,item:E.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new T(S);var n=this.getNamedItem(t.nodeName);return D(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new T(S);return e=this.getNamedItemNS(t.namespaceURI,t.localName),D(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return I(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return I(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}},$.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!(!n||e&&!(e in n))},createDocument:function(t,e,n){var r=new M;if(r.implementation=this,r.childNodes=new E,r.doctype=n,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new V;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}},O.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return F(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return j(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,n,r){var i=new n.constructor;for(var o in n){var a=n[o];"object"!=typeof a&&a!=i[o]&&(i[o]=a)}n.childNodes&&(i.childNodes=new E);i.ownerDocument=e;switch(i.nodeType){case s:var c=n.attributes,l=i.attributes=new k,f=c.length;l._ownerElement=i;for(var p=0;p<f;p++)i.setAttributeNode(t(e,c.item(p),!0));break;case u:r=!0}if(r)for(var h=n.firstChild;h;)i.appendChild(t(e,h,r)),h=h.nextSibling;return i}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==c&&t.nodeType==c?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var r in n)if(n[r]==t)return r;e=e.nodeType==u?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==u?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},r(a,O),r(a,O.prototype),M.prototype={nodeName:"#document",nodeType:g,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==_){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return null==this.documentElement&&t.nodeType==s&&(this.documentElement=t),F(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),j(this,t)},importNode:function(t,e){return function t(e,n,r){var i;switch(n.nodeType){case s:(i=n.cloneNode(!1)).ownerDocument=e;case _:break;case u:r=!0}i||(i=n.cloneNode(!1));i.ownerDocument=e;i.parentNode=null;if(r)for(var o=n.firstChild;o;)i.appendChild(t(e,o,r)),o=o.nextSibling;return i}(this,t,e)},getElementById:function(t){var e=null;return L(this.documentElement,function(n){if(n.nodeType==s&&n.getAttribute("id")==t)return e=n,!0}),e},createElement:function(t){var e=new U;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new E,(e.attributes=new k)._ownerElement=e,e},createDocumentFragment:function(){var t=new Q;return t.ownerDocument=this,t.childNodes=new E,t},createTextNode:function(t){var e=new q;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new z;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new W;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new K;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new J;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new X;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new U,r=e.split(":"),i=n.attributes=new k;return n.childNodes=new E,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new J,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}},i(M,O),U.prototype={nodeType:s,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===_?this.insertBefore(t,null):function(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e),r=t.lastChild}return r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,B(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new x(this,function(e){var n=[];return L(e,function(r){r===e||r.nodeType!=s||"*"!==t&&r.tagName!=t||n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new x(this,function(n){var r=[];return L(n,function(i){i===n||i.nodeType!==s||"*"!==t&&i.namespaceURI!==t||"*"!==e&&i.localName!=e||r.push(i)}),r})}},M.prototype.getElementsByTagName=U.prototype.getElementsByTagName,M.prototype.getElementsByTagNameNS=U.prototype.getElementsByTagNameNS,i(U,O),J.prototype.nodeType=u,i(J,O),H.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(b[w])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},i(H,O),q.prototype={nodeName:"#text",nodeType:c,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},i(q,H),z.prototype={nodeName:"#comment",nodeType:d},i(z,H),W.prototype={nodeName:"#cdata-section",nodeType:l},i(W,H),V.prototype.nodeType=v,i(V,O),G.prototype.nodeType=m,i(G,O),Y.prototype.nodeType=p,i(Y,O),X.prototype.nodeType=f,i(X,O),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=_,i(Q,O),K.prototype.nodeType=h,i(K,O),Z.prototype.serializeToString=function(t,e,n){return tt.call(t,e,n)},O.prototype.toString=tt;try{if(Object.defineProperty){Object.defineProperty(x.prototype,"length",{get:function(){return A(this),this.$$length}}),Object.defineProperty(O.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case s:case _:var n=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case s:case _:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),rt=function(t,e,n){t["$$"+e]=n}}}catch(t){}n.DOMImplementation=$,n.XMLSerializer=Z},{}],58:[function(t,e,n){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+i.source+"*(?::"+r.source+i.source+"*)?$"),a=0,s=1,u=2,c=3,l=4,f=5,p=6,h=7;function d(){}function g(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function v(t,e,n,r,i,o){for(var d,g=++e,v=a;;){var _=t.charAt(g);switch(_){case"=":if(v===s)d=t.slice(e,g),v=c;else{if(v!==u)throw new Error("attribute equal must after attrName");v=c}break;case"'":case'"':if(v===c||v===s){if(v===s&&(o.warning('attribute value must after "="'),d=t.slice(e,g)),e=g+1,!((g=t.indexOf(_,e))>0))throw new Error("attribute value no end '"+_+"' match");m=t.slice(e,g).replace(/&#?\w+;/g,i),n.add(d,m,e-1),v=f}else{if(v!=l)throw new Error('attribute value must after "="');m=t.slice(e,g).replace(/&#?\w+;/g,i),n.add(d,m,e),o.warning('attribute "'+d+'" missed start quot('+_+")!!"),e=g+1,v=f}break;case"/":switch(v){case a:n.setTagName(t.slice(e,g));case f:case p:case h:v=h,n.closed=!0;case l:case s:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),v==a&&n.setTagName(t.slice(e,g)),g;case">":switch(v){case a:n.setTagName(t.slice(e,g));case f:case p:case h:break;case l:case s:"/"===(m=t.slice(e,g)).slice(-1)&&(n.closed=!0,m=m.slice(0,-1));case u:v===u&&(m=d),v==l?(o.warning('attribute "'+m+'" missed quot(")!!'),n.add(d,m.replace(/&#?\w+;/g,i),e)):("http://www.w3.org/1999/xhtml"===r[""]&&m.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+m+'" missed value!! "'+m+'" instead!!'),n.add(m,m,e));break;case c:throw new Error("attribute value missed!!")}return g;case"":_=" ";default:if(_<=" ")switch(v){case a:n.setTagName(t.slice(e,g)),v=p;break;case s:d=t.slice(e,g),v=u;break;case l:var m=t.slice(e,g).replace(/&#?\w+;/g,i);o.warning('attribute "'+m+'" missed quot(")!!'),n.add(d,m,e);case f:v=p}else switch(v){case u:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&d.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),n.add(d,d,e),e=g,v=s;break;case f:o.warning('attribute space is required"'+d+'"!!');case p:v=s,e=g;break;case c:v=l,e=g;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}g++}}function _(t,e,n){for(var r=t.tagName,i=null,o=t.length;o--;){var a=t[o],s=a.qName,u=a.value;if((p=s.indexOf(":"))>0)var c=a.prefix=s.slice(0,p),l=s.slice(p+1),f="xmlns"===c&&l;else l=s,c=null,f="xmlns"===s&&"";a.localName=l,!1!==f&&(null==i&&(i={},b(n,n={})),n[f]=i[f]=u,a.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(f,u))}for(o=t.length;o--;){(c=(a=t[o]).prefix)&&("xml"===c&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(a.uri=n[c||""]))}var p;(p=r.indexOf(":"))>0?(c=t.prefix=r.slice(0,p),l=t.localName=r.slice(p+1)):(c=null,l=t.localName=r);var h=t.uri=n[c||""];if(e.startElement(h,l,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=i,!0;if(e.endElement(h,l,r),i)for(c in i)e.endPrefixMapping(c)}function m(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=t.indexOf("</"+n+">",e),a=t.substring(e+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return e+1}function y(t,e,n,r){var i=r[n];return null==i&&((i=t.lastIndexOf("</"+n+">"))<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function b(t,e){for(var n in t)e[n]=t[n]}function w(t,e,n,r){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(i=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,i-e-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var i=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,i-e-9),n.endCDATA(),i+3}var o=function(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=e,i.exec(t);for(;n=i.exec(t);)if(r.push(n),n[1])return r}(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],u=a>3&&/^public$/i.test(o[2][0])&&o[3][0],c=a>4&&o[4][0],l=o[a-1];return n.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function N(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function S(t){}function T(t,e){return t.__proto__=e,t}d.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),b(e,e={}),function(t,e,n,r,i){function o(t){var e=t.slice(1,-1);return e in n?n[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(i.error("entity not found:"+t),t)}function a(e){if(e>d){var n=t.substring(d,e).replace(/&#?\w+;/g,o);f&&s(d),r.characters(n,0,e-d),d=e}}function s(e,n){for(;e>=c&&(n=l.exec(t));)u=n.index,c=u+n[0].length,f.lineNumber++;f.columnNumber=e-u+1}var u=0,c=0,l=/.*(?:\r\n?|\n)|.*$/g,f=r.locator,p=[{currentNSMap:e}],h={},d=0;for(;;){try{var b=t.indexOf("<",d);if(b<0){if(!t.substr(d).match(/^\s*$/)){var T=r.doc,E=T.createTextNode(t.substr(d));T.appendChild(E),r.currentElement=E}return}switch(b>d&&a(b),t.charAt(b+1)){case"/":var x=t.indexOf(">",b+3),A=t.substring(b+2,x),k=p.pop();x<0?(A=t.substring(b+2).replace(/[\s<].*/,""),i.error("end tag name: "+A+" is not complete:"+k.tagName),x=b+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),i.error("end tag name: "+A+" maybe not complete"),x=b+1+A.length);var C=k.localNSMap,D=k.tagName==A,I=D||k.tagName&&k.tagName.toLowerCase()==A.toLowerCase();if(I){if(r.endElement(k.uri,k.localName,A),C)for(var $ in C)r.endPrefixMapping($);D||i.fatalError("end tag name: "+A+" is not match the current start tagName:"+k.tagName)}else p.push(k);x++;break;case"?":f&&s(b),x=N(t,b,r);break;case"!":f&&s(b),x=w(t,b,r,i);break;default:f&&s(b);var O=new S,R=p[p.length-1].currentNSMap,x=v(t,b,O,R,o,i),L=O.length;if(!O.closed&&y(t,x,O.tagName,h)&&(O.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),f&&L){for(var M=g(f,{}),P=0;P<L;P++){var B=O[P];s(B.offset),B.locator=g(f,{})}r.locator=M,_(O,r,R)&&p.push(O),r.locator=f}else _(O,r,R)&&p.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?x++:x=m(t,x,O.tagName,o,r)}}catch(t){i.error("element parse error: "+t),x=-1}x>d?d=x:a(Math.max(b,d)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},S.prototype={setTagName:function(t){if(!o.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,n){if(!o.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},T({},T.prototype)instanceof T||(T=function(t,e){function n(){}for(e in n.prototype=e,n=new n,t)n[e]=t[e];return n}),n.XMLReader=d},{}],59:[function(t,e,n){!function(t){"use strict";function e(t){var e=Array.prototype.slice,n=t.length,r=function(){var i=e.call(arguments);return i.length<n?function(t,n){return function(){return n.apply(this,t.concat(e.call(arguments)))}}(i,r):t.apply(this,e.apply(arguments,[0,n]))};return r}var n=e(function(t,e){for(var n=0;n<e.length;n+=1)t(e[n],n,e)}),r=e(function(t,e,r){var i=e;return n(function(e,n){i=t(i,e,n)},r),i}),i=e(function(t,e){var r=new Array(e.length);return n(function(e,n){r[n]=t(e)},e),r}),o=e(function(t,e){var r=[];return n(function(e,n){t(e,n)&&r.push(e)},e),r});function a(){if(0===arguments.length)throw new Error("compose requires at least one argument");var t=Array.prototype.slice.call(arguments).reverse(),e=t[0],n=t.slice(1);return function(){return r(function(t,e){return e(t)},e.apply(null,arguments),n)}}var s=e(function(t,e){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1});var u=e(function(t,e){return e[t]});function c(t){return t.toString()}var l=e(function(t,e){return e.join(t)}),f=e(function(t,e,n){return t+n+e});function p(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}function h(){this.init()}function d(t){this.expression=t}function g(t,e,n){e in t||(t[e]=n)}function v(){}function _(t){arguments.length>0&&this.init(t)}function m(t){arguments.length>0&&this.init(t)}function y(t,e){arguments.length>0&&this.init(t,e)}function b(t,e){arguments.length>0&&this.init(t,e)}function w(t,e){arguments.length>0&&this.init(t,e)}function N(t,e){arguments.length>0&&this.init(t,e)}function S(t,e){arguments.length>0&&this.init(t,e)}function T(t,e){arguments.length>0&&this.init(t,e)}function E(t,e){arguments.length>0&&this.init(t,e)}function x(t,e){arguments.length>0&&this.init(t,e)}function A(t,e){arguments.length>0&&this.init(t,e)}function k(t,e){arguments.length>0&&this.init(t,e)}function C(t,e){arguments.length>0&&this.init(t,e)}function D(t,e){arguments.length>0&&this.init(t,e)}function I(t,e){arguments.length>0&&this.init(t,e)}function $(t,e){arguments.length>0&&this.init(t,e)}function O(t,e){arguments.length>0&&this.init(t,e)}function R(t,e,n){arguments.length>0&&this.init(t,e,n)}function L(t,e){arguments.length>0&&this.init(t,e)}function M(t,e,n){arguments.length>0&&this.init(t,e,n)}function P(t,e){arguments.length>0&&this.init(t,e)}function B(t){arguments.length>0&&this.init(t)}function j(t,e){arguments.length>0&&this.init(t,e)}h.prototype=new Object,h.prototype.constructor=h,h.superclass=Object.prototype,h.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(t){return new b(t[0],t[2])},this.reduceActions[5]=function(t){return new w(t[0],t[2])},this.reduceActions[7]=function(t){return new N(t[0],t[2])},this.reduceActions[8]=function(t){return new S(t[0],t[2])},this.reduceActions[10]=function(t){return new T(t[0],t[2])},this.reduceActions[11]=function(t){return new E(t[0],t[2])},this.reduceActions[12]=function(t){return new x(t[0],t[2])},this.reduceActions[13]=function(t){return new A(t[0],t[2])},this.reduceActions[15]=function(t){return new k(t[0],t[2])},this.reduceActions[16]=function(t){return new C(t[0],t[2])},this.reduceActions[18]=function(t){return new D(t[0],t[2])},this.reduceActions[19]=function(t){return new I(t[0],t[2])},this.reduceActions[20]=function(t){return new $(t[0],t[2])},this.reduceActions[22]=function(t){return new m(t[1])},this.reduceActions[24]=function(t){return new O(t[0],t[2])},this.reduceActions[25]=function(t){return new R(void 0,void 0,t[0])},this.reduceActions[27]=function(t){return t[0].locationPath=t[2],t[0]},this.reduceActions[28]=function(t){return t[0].locationPath=t[2],t[0].locationPath.steps.unshift(new M(M.DESCENDANTORSELF,P.nodeTest,[])),t[0]},this.reduceActions[29]=function(t){return new R(t[0],[],void 0)},this.reduceActions[30]=function(t){return K.instance_of(t[0],R)?(void 0==t[0].filterPredicates&&(t[0].filterPredicates=[]),t[0].filterPredicates.push(t[1]),t[0]):new R(t[0],[t[1]],void 0)},this.reduceActions[32]=function(t){return t[1]},this.reduceActions[33]=function(t){return new U(t[0])},this.reduceActions[34]=function(t){return new J(t[0])},this.reduceActions[36]=function(t){return new j(t[0],[])},this.reduceActions[37]=function(t){return new j(t[0],t[2])},this.reduceActions[38]=function(t){return[t[0]]},this.reduceActions[39]=function(t){return t[2].unshift(t[0]),t[2]},this.reduceActions[43]=function(t){return new L(!0,[])},this.reduceActions[44]=function(t){return t[1].absolute=!0,t[1]},this.reduceActions[46]=function(t){return new L(!1,[t[0]])},this.reduceActions[47]=function(t){return t[0].steps.push(t[2]),t[0]},this.reduceActions[49]=function(t){return new M(t[0],t[1],[])},this.reduceActions[50]=function(t){return new M(M.CHILD,t[0],[])},this.reduceActions[51]=function(t){return new M(t[0],t[1],t[2])},this.reduceActions[52]=function(t){return new M(M.CHILD,t[0],t[1])},this.reduceActions[54]=function(t){return[t[0]]},this.reduceActions[55]=function(t){return t[1].unshift(t[0]),t[1]},this.reduceActions[56]=function(t){return"ancestor"==t[0]?M.ANCESTOR:"ancestor-or-self"==t[0]?M.ANCESTORORSELF:"attribute"==t[0]?M.ATTRIBUTE:"child"==t[0]?M.CHILD:"descendant"==t[0]?M.DESCENDANT:"descendant-or-self"==t[0]?M.DESCENDANTORSELF:"following"==t[0]?M.FOLLOWING:"following-sibling"==t[0]?M.FOLLOWINGSIBLING:"namespace"==t[0]?M.NAMESPACE:"parent"==t[0]?M.PARENT:"preceding"==t[0]?M.PRECEDING:"preceding-sibling"==t[0]?M.PRECEDINGSIBLING:"self"==t[0]?M.SELF:-1},this.reduceActions[57]=function(t){return M.ATTRIBUTE},this.reduceActions[59]=function(t){return"comment"==t[0]?P.commentTest:"text"==t[0]?P.textTest:"processing-instruction"==t[0]?P.anyPiTest:"node"==t[0]?P.nodeTest:new P(-1,void 0)},this.reduceActions[60]=function(t){return new P.PITest(t[2])},this.reduceActions[61]=function(t){return t[1]},this.reduceActions[63]=function(t){return t[1].absolute=!0,t[1].steps.unshift(new M(M.DESCENDANTORSELF,P.nodeTest,[])),t[1]},this.reduceActions[64]=function(t){return t[0].steps.push(new M(M.DESCENDANTORSELF,P.nodeTest,[])),t[0].steps.push(t[2]),t[0]},this.reduceActions[65]=function(t){return new M(M.SELF,P.nodeTest,[])},this.reduceActions[66]=function(t){return new M(M.PARENT,P.nodeTest,[])},this.reduceActions[67]=function(t){return new B(t[1])},this.reduceActions[68]=function(t){return P.nameTestAny},this.reduceActions[69]=function(t){return new P.NameTestPrefixAny(t[0].split(":")[0])},this.reduceActions[70]=function(t){return new P.NameTestQName(t[0])}},h.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],h.actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!","                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  "," 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],h.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],h.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],h.DOUBLEDOT=2,h.DOUBLECOLON=3,h.DOUBLESLASH=4,h.NOTEQUAL=5,h.LESSTHANOREQUAL=6,h.GREATERTHANOREQUAL=7,h.AND=8,h.OR=9,h.MOD=10,h.DIV=11,h.MULTIPLYOPERATOR=12,h.FUNCTIONNAME=13,h.AXISNAME=14,h.LITERAL=15,h.NUMBER=16,h.ASTERISKNAMETEST=17,h.QNAME=18,h.NCNAMECOLONASTERISK=19,h.NODETYPE=20,h.PROCESSINGINSTRUCTIONWITHLITERAL=21,h.EQUALS=22,h.LESSTHAN=23,h.GREATERTHAN=24,h.PLUS=25,h.MINUS=26,h.BAR=27,h.SLASH=28,h.LEFTPARENTHESIS=29,h.RIGHTPARENTHESIS=30,h.COMMA=31,h.AT=32,h.LEFTBRACKET=33,h.RIGHTBRACKET=34,h.DOT=35,h.DOLLAR=36,h.prototype.tokenize=function(t){for(var e=[],n=[],r=t+"\0",i=0,o=r.charAt(i++);;){for(;" "==o||"\t"==o||"\r"==o||"\n"==o;)o=r.charAt(i++);if("\0"==o||i>=r.length)break;if("("!=o)if(")"!=o)if("["!=o)if("]"!=o)if("@"!=o)if(","!=o)if("|"!=o)if("+"!=o)if("-"!=o)if("="!=o)if("$"!=o)if("."!=o)if("'"!=o&&'"'!=o)if(o>="0"&&o<="9"){l=o;for(o=r.charAt(i++);o>="0"&&o<="9";)l+=o,o=r.charAt(i++);if("."==o&&r.charAt(i)>="0"&&r.charAt(i)<="9")for(l+=o,l+=r.charAt(i++),o=r.charAt(i++);o>="0"&&o<="9";)l+=o,o=r.charAt(i++);e.push(h.NUMBER),n.push(l)}else if("*"!=o)if(":"!=o||":"!=r.charAt(i))if("/"!=o)if("!"!=o||"="!=r.charAt(i))if("<"!=o)if(">"!=o){if("_"!=o&&!K.isLetter(o.charCodeAt(0)))throw new Error("Unexpected character "+o);var a=o;for(o=r.charAt(i++);K.isNCNameChar(o.charCodeAt(0));)a+=o,o=r.charAt(i++);if(e.length>0&&(s=e[e.length-1])!=h.AT&&s!=h.DOUBLECOLON&&s!=h.LEFTPARENTHESIS&&s!=h.LEFTBRACKET&&s!=h.AND&&s!=h.OR&&s!=h.MOD&&s!=h.DIV&&s!=h.MULTIPLYOPERATOR&&s!=h.SLASH&&s!=h.DOUBLESLASH&&s!=h.BAR&&s!=h.PLUS&&s!=h.MINUS&&s!=h.EQUALS&&s!=h.NOTEQUAL&&s!=h.LESSTHAN&&s!=h.LESSTHANOREQUAL&&s!=h.GREATERTHAN&&s!=h.GREATERTHANOREQUAL){if("and"==a){e.push(h.AND),n.push(a);continue}if("or"==a){e.push(h.OR),n.push(a);continue}if("mod"==a){e.push(h.MOD),n.push(a);continue}if("div"==a){e.push(h.DIV),n.push(a);continue}}if(":"==o){if("*"==r.charAt(i)){e.push(h.NCNAMECOLONASTERISK),n.push(a+":*"),i++,o=r.charAt(i++);continue}if("_"==r.charAt(i)||K.isLetter(r.charCodeAt(i))){for(a+=":",o=r.charAt(i++);K.isNCNameChar(o.charCodeAt(0));)a+=o,o=r.charAt(i++);if("("==o){e.push(h.FUNCTIONNAME),n.push(a);continue}e.push(h.QNAME),n.push(a);continue}if(":"==r.charAt(i)){e.push(h.AXISNAME),n.push(a);continue}}if("("==o){if("comment"==a||"text"==a||"node"==a){e.push(h.NODETYPE),n.push(a);continue}if("processing-instruction"==a){")"==r.charAt(i)?e.push(h.NODETYPE):e.push(h.PROCESSINGINSTRUCTIONWITHLITERAL),n.push(a);continue}e.push(h.FUNCTIONNAME),n.push(a);continue}e.push(h.QNAME),n.push(a)}else{if("="==r.charAt(i)){e.push(h.GREATERTHANOREQUAL),n.push(">="),i++,o=r.charAt(i++);continue}e.push(h.GREATERTHAN),n.push(">"),o=r.charAt(i++)}else{if("="==r.charAt(i)){e.push(h.LESSTHANOREQUAL),n.push("<="),i++,o=r.charAt(i++);continue}e.push(h.LESSTHAN),n.push("<"),o=r.charAt(i++)}else e.push(h.NOTEQUAL),n.push("!="),i++,o=r.charAt(i++);else{if("/"==(o=r.charAt(i++))){e.push(h.DOUBLESLASH),n.push("//"),o=r.charAt(i++);continue}e.push(h.SLASH),n.push("/")}else e.push(h.DOUBLECOLON),n.push("::"),i++,o=r.charAt(i++);else{var s;if(e.length>0&&(s=e[e.length-1])!=h.AT&&s!=h.DOUBLECOLON&&s!=h.LEFTPARENTHESIS&&s!=h.LEFTBRACKET&&s!=h.AND&&s!=h.OR&&s!=h.MOD&&s!=h.DIV&&s!=h.MULTIPLYOPERATOR&&s!=h.SLASH&&s!=h.DOUBLESLASH&&s!=h.BAR&&s!=h.PLUS&&s!=h.MINUS&&s!=h.EQUALS&&s!=h.NOTEQUAL&&s!=h.LESSTHAN&&s!=h.LESSTHANOREQUAL&&s!=h.GREATERTHAN&&s!=h.GREATERTHANOREQUAL){e.push(h.MULTIPLYOPERATOR),n.push(o),o=r.charAt(i++);continue}e.push(h.ASTERISKNAMETEST),n.push(o),o=r.charAt(i++)}else{for(var u=o,c="";i<r.length&&(o=r.charAt(i))!==u;)c+=o,i+=1;if(o!==u)throw Z.fromMessage("Unterminated string literal: "+u+c);i+=1,e.push(h.LITERAL),n.push(c),o=r.charAt(i++)}else{if("."==(o=r.charAt(i++))){e.push(h.DOUBLEDOT),n.push(".."),o=r.charAt(i++);continue}if(o>="0"&&o<="9"){var l="."+o;for(o=r.charAt(i++);o>="0"&&o<="9";)l+=o,o=r.charAt(i++);e.push(h.NUMBER),n.push(l);continue}e.push(h.DOT),n.push(".")}else e.push(h.DOLLAR),n.push(o),o=r.charAt(i++);else e.push(h.EQUALS),n.push(o),o=r.charAt(i++);else e.push(h.MINUS),n.push(o),o=r.charAt(i++);else e.push(h.PLUS),n.push(o),o=r.charAt(i++);else e.push(h.BAR),n.push(o),o=r.charAt(i++);else e.push(h.COMMA),n.push(o),o=r.charAt(i++);else e.push(h.AT),n.push(o),o=r.charAt(i++);else e.push(h.RIGHTBRACKET),n.push(o),o=r.charAt(i++);else e.push(h.LEFTBRACKET),n.push(o),o=r.charAt(i++);else e.push(h.RIGHTPARENTHESIS),n.push(o),o=r.charAt(i++);else e.push(h.LEFTPARENTHESIS),n.push(o),o=r.charAt(i++)}return e.push(1),n.push("[EOF]"),[e,n]},h.SHIFT="s",h.REDUCE="r",h.ACCEPT="a",h.prototype.parse=function(t){var e,n,r=this.tokenize(t);if(void 0!=r){e=r[0],n=r[1];var i,o,a=0,s=[],u=[],c=[];for(s.push(0),u.push(1),c.push("_S"),i=e[a],o=n[a++];;)switch(t=s[s.length-1],h.actionTable[t].charAt(i-1)){case h.SHIFT:u.push(-i),c.push(o),s.push(h.actionTableNumber[t].charCodeAt(i-1)-32),i=e[a],o=n[a++];break;case h.REDUCE:for(var l=h.productions[h.actionTableNumber[t].charCodeAt(i-1)-32][1],f=[],p=0;p<l;p++)u.pop(),f.unshift(c.pop()),s.pop();var g=s[s.length-1];u.push(h.productions[h.actionTableNumber[t].charCodeAt(i-1)-32][0]),void 0==this.reduceActions[h.actionTableNumber[t].charCodeAt(i-1)-32]?c.push(f[0]):c.push(this.reduceActions[h.actionTableNumber[t].charCodeAt(i-1)-32](f)),s.push(h.gotoTable[g].charCodeAt(h.productions[h.actionTableNumber[t].charCodeAt(i-1)-32][0]-2)-33);break;case h.ACCEPT:return new d(c.pop());default:throw new Error("XPath parse error")}}},d.prototype=new Object,d.prototype.constructor=d,d.superclass=Object.prototype,d.prototype.toString=function(){return this.expression.toString()},d.prototype.evaluate=function(t){return t.contextNode=t.expressionContextNode,t.contextSize=1,t.contextPosition=1,t.isHtml&&(g(t,"caseInsensitive",!0),g(t,"allowAnyNamespaceForNoPrefix",!0)),g(t,"caseInsensitive",!1),this.expression.evaluate(t)},d.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",d.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",v.prototype=new Object,v.prototype.constructor=v,v.superclass=Object.prototype,v.prototype.init=function(){},v.prototype.toString=function(){return"<Expression>"},v.prototype.evaluate=function(t){throw new Error("Could not evaluate expression.")},_.prototype=new v,_.prototype.constructor=_,_.superclass=v.prototype,_.prototype.init=function(t){this.rhs=t},m.prototype=new _,m.prototype.constructor=m,m.superclass=_.prototype,m.prototype.init=function(t){m.superclass.init.call(this,t)},m.prototype.evaluate=function(t){return this.rhs.evaluate(t).number().negate()},m.prototype.toString=function(){return"-"+this.rhs.toString()},y.prototype=new v,y.prototype.constructor=y,y.superclass=v.prototype,y.prototype.init=function(t,e){this.lhs=t,this.rhs=e},b.prototype=new y,b.prototype.constructor=b,b.superclass=y.prototype,b.prototype.init=function(t,e){b.superclass.init.call(this,t,e)},b.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},b.prototype.evaluate=function(t){var e=this.lhs.evaluate(t).bool();return e.booleanValue()?e:this.rhs.evaluate(t).bool()},w.prototype=new y,w.prototype.constructor=w,w.superclass=y.prototype,w.prototype.init=function(t,e){w.superclass.init.call(this,t,e)},w.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},w.prototype.evaluate=function(t){var e=this.lhs.evaluate(t).bool();return e.booleanValue()?this.rhs.evaluate(t).bool():e},N.prototype=new y,N.prototype.constructor=N,N.superclass=y.prototype,N.prototype.init=function(t,e){N.superclass.init.call(this,t,e)},N.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},N.prototype.evaluate=function(t){return this.lhs.evaluate(t).equals(this.rhs.evaluate(t))},S.prototype=new y,S.prototype.constructor=S,S.superclass=y.prototype,S.prototype.init=function(t,e){S.superclass.init.call(this,t,e)},S.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},S.prototype.evaluate=function(t){return this.lhs.evaluate(t).notequal(this.rhs.evaluate(t))},T.prototype=new y,T.prototype.constructor=T,T.superclass=y.prototype,T.prototype.init=function(t,e){T.superclass.init.call(this,t,e)},T.prototype.evaluate=function(t){return this.lhs.evaluate(t).lessthan(this.rhs.evaluate(t))},T.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},E.prototype=new y,E.prototype.constructor=E,E.superclass=y.prototype,E.prototype.init=function(t,e){E.superclass.init.call(this,t,e)},E.prototype.evaluate=function(t){return this.lhs.evaluate(t).greaterthan(this.rhs.evaluate(t))},E.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},x.prototype=new y,x.prototype.constructor=x,x.superclass=y.prototype,x.prototype.init=function(t,e){x.superclass.init.call(this,t,e)},x.prototype.evaluate=function(t){return this.lhs.evaluate(t).lessthanorequal(this.rhs.evaluate(t))},x.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},A.prototype=new y,A.prototype.constructor=A,A.superclass=y.prototype,A.prototype.init=function(t,e){A.superclass.init.call(this,t,e)},A.prototype.evaluate=function(t){return this.lhs.evaluate(t).greaterthanorequal(this.rhs.evaluate(t))},A.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},k.prototype=new y,k.prototype.constructor=k,k.superclass=y.prototype,k.prototype.init=function(t,e){k.superclass.init.call(this,t,e)},k.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().plus(this.rhs.evaluate(t).number())},k.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},C.prototype=new y,C.prototype.constructor=C,C.superclass=y.prototype,C.prototype.init=function(t,e){C.superclass.init.call(this,t,e)},C.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().minus(this.rhs.evaluate(t).number())},C.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},D.prototype=new y,D.prototype.constructor=D,D.superclass=y.prototype,D.prototype.init=function(t,e){D.superclass.init.call(this,t,e)},D.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().multiply(this.rhs.evaluate(t).number())},D.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},I.prototype=new y,I.prototype.constructor=I,I.superclass=y.prototype,I.prototype.init=function(t,e){I.superclass.init.call(this,t,e)},I.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().div(this.rhs.evaluate(t).number())},I.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},$.prototype=new y,$.prototype.constructor=$,$.superclass=y.prototype,$.prototype.init=function(t,e){$.superclass.init.call(this,t,e)},$.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().mod(this.rhs.evaluate(t).number())},$.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},O.prototype=new y,O.prototype.constructor=O,O.superclass=y.prototype,O.prototype.init=function(t,e){O.superclass.init.call(this,t,e)},O.prototype.evaluate=function(t){return this.lhs.evaluate(t).nodeset().union(this.rhs.evaluate(t).nodeset())},O.prototype.toString=function(){return i(c,[this.lhs,this.rhs]).join(" | ")},R.prototype=new v,R.prototype.constructor=R,R.superclass=v.prototype,R.prototype.init=function(t,e,n){R.superclass.init.call(this),this.filter=t,this.filterPredicates=e,this.locationPath=n},R.applyPredicates=function(t,e,n){return r(function(t,n){var r=e.extend({contextSize:t.length});return o(function(t,e){return R.predicateMatches(n,r.extend({contextNode:t,contextPosition:e+1}))},t)},n,t)},R.getRoot=function(t,e){var n=e[0];if(9===n.nodeType)return n;if(t.virtualRoot)return t.virtualRoot;var r=n.ownerDocument;if(r)return r;for(var i=n;null!=i.parentNode;)i=i.parentNode;return i},R.applyStep=function(t,e,n){var r=[];switch(e.contextNode=n,t.axis){case M.ANCESTOR:if(e.contextNode===e.virtualRoot)break;for(i=2==e.contextNode.nodeType?R.getOwnerElement(e.contextNode):e.contextNode.parentNode;null!=i&&(t.nodeTest.matches(i,e)&&r.push(i),i!==e.virtualRoot);)i=i.parentNode;break;case M.ANCESTORORSELF:for(var i=e.contextNode;null!=i&&(t.nodeTest.matches(i,e)&&r.push(i),i!==e.virtualRoot);i=2==i.nodeType?R.getOwnerElement(i):i.parentNode);break;case M.ATTRIBUTE:var o=e.contextNode.attributes;if(null!=o)for(var a=0;a<o.length;a++){i=o.item(a);t.nodeTest.matches(i,e)&&r.push(i)}break;case M.CHILD:for(i=e.contextNode.firstChild;null!=i;i=i.nextSibling)t.nodeTest.matches(i,e)&&r.push(i);break;case M.DESCENDANT:for(var s=[e.contextNode.firstChild];s.length>0;)for(i=s.pop();null!=i;)t.nodeTest.matches(i,e)&&r.push(i),null!=i.firstChild?(s.push(i.nextSibling),i=i.firstChild):i=i.nextSibling;break;case M.DESCENDANTORSELF:t.nodeTest.matches(e.contextNode,e)&&r.push(e.contextNode);for(s=[e.contextNode.firstChild];s.length>0;)for(i=s.pop();null!=i;)t.nodeTest.matches(i,e)&&r.push(i),null!=i.firstChild?(s.push(i.nextSibling),i=i.firstChild):i=i.nextSibling;break;case M.FOLLOWING:if(e.contextNode===e.virtualRoot)break;s=[];null!=e.contextNode.firstChild?s.unshift(e.contextNode.firstChild):s.unshift(e.contextNode.nextSibling);for(i=e.contextNode.parentNode;null!=i&&9!=i.nodeType&&i!==e.virtualRoot;i=i.parentNode)s.unshift(i.nextSibling);do{for(i=s.pop();null!=i;)t.nodeTest.matches(i,e)&&r.push(i),null!=i.firstChild?(s.push(i.nextSibling),i=i.firstChild):i=i.nextSibling}while(s.length>0);break;case M.FOLLOWINGSIBLING:if(e.contextNode===e.virtualRoot)break;for(i=e.contextNode.nextSibling;null!=i;i=i.nextSibling)t.nodeTest.matches(i,e)&&r.push(i);break;case M.NAMESPACE:var u={};if(1==e.contextNode.nodeType){u.xml=d.XML_NAMESPACE_URI,u.xmlns=d.XMLNS_NAMESPACE_URI;for(i=e.contextNode;null!=i&&1==i.nodeType;i=i.parentNode)for(a=0;a<i.attributes.length;a++){var c=i.attributes.item(a),l=String(c.name);if("xmlns"==l)void 0==u[""]&&(u[""]=c.value);else if(l.length>6&&"xmlns:"==l.substring(0,6)){void 0==u[f=l.substring(6,l.length)]&&(u[f]=c.value)}}for(var f in u){var p=new W(f,u[f],e.contextNode);t.nodeTest.matches(p,e)&&r.push(p)}}break;case M.PARENT:i=null,e.contextNode!==e.virtualRoot&&(i=2==e.contextNode.nodeType?R.getOwnerElement(e.contextNode):e.contextNode.parentNode),null!=i&&t.nodeTest.matches(i,e)&&r.push(i);break;case M.PRECEDING:s=null!=e.virtualRoot?[e.virtualRoot]:[function(t){for(;t&&t.parentNode;)t=t.parentNode;return t}(e.contextNode)];t:for(;s.length>0;)for(i=s.pop();null!=i;){if(i==e.contextNode)break t;t.nodeTest.matches(i,e)&&r.unshift(i),null!=i.firstChild?(s.push(i.nextSibling),i=i.firstChild):i=i.nextSibling}break;case M.PRECEDINGSIBLING:if(e.contextNode===e.virtualRoot)break;for(i=e.contextNode.previousSibling;null!=i;i=i.previousSibling)t.nodeTest.matches(i,e)&&r.push(i);break;case M.SELF:t.nodeTest.matches(e.contextNode,e)&&r.push(e.contextNode)}return r},R.applySteps=function(t,e,n){return r(function(t,n){return[].concat.apply([],i(function(t){return R.applyPredicates(n.predicates,e,R.applyStep(n,e,t))},t))},n,t)},R.prototype.applyFilter=function(t,e){if(!this.filter)return{nodes:[t.contextNode]};var n=this.filter.evaluate(t);if(!K.instance_of(n,z)){if(null!=this.filterPredicates&&this.filterPredicates.length>0||null!=this.locationPath)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:n}}return{nodes:R.applyPredicates(this.filterPredicates||[],e,n.toUnsortedArray())}},R.applyLocationPath=function(t,e,n){if(!t)return n;var r=t.absolute?[R.getRoot(e,n)]:n;return R.applySteps(t.steps,e,r)},R.prototype.evaluate=function(t){var e=p(new V,t),n=this.applyFilter(t,e);if("nonNodes"in n)return n.nonNodes;var r=new z;return r.addArray(R.applyLocationPath(this.locationPath,e,n.nodes)),r},R.predicateMatches=function(t,e){var n=t.evaluate(e);return K.instance_of(n,J)?e.contextPosition==n.numberValue():n.booleanValue()},R.predicateString=a(f("[","]"),c),R.predicatesString=a(l(""),i(R.predicateString)),R.prototype.toString=function(){if(void 0!=this.filter){var t=c(this.filter);return K.instance_of(this.filter,U)?f("'","'",t):void 0!=this.filterPredicates&&this.filterPredicates.length?f("(",")",t)+R.predicatesString(this.filterPredicates):void 0!=this.locationPath?t+(this.locationPath.absolute?"":"/")+c(this.locationPath):t}return c(this.locationPath)},R.getOwnerElement=function(t){if(t.ownerElement)return t.ownerElement;try{if(t.selectSingleNode)return t.selectSingleNode("..")}catch(t){}for(var e=(9==t.nodeType?t:t.ownerDocument).getElementsByTagName("*"),n=0;n<e.length;n++)for(var r=e.item(n),i=r.attributes,o=0;o<i.length;o++){if(i.item(o)===t)return r}return null},L.prototype=new Object,L.prototype.constructor=L,L.superclass=Object.prototype,L.prototype.init=function(t,e){this.absolute=t,this.steps=e},L.prototype.toString=function(){return(this.absolute?"/":"")+i(c,this.steps).join("/")},M.prototype=new Object,M.prototype.constructor=M,M.superclass=Object.prototype,M.prototype.init=function(t,e,n){this.axis=t,this.nodeTest=e,this.predicates=n},M.prototype.toString=function(){return M.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+R.predicatesString(this.predicates)},M.ANCESTOR=0,M.ANCESTORORSELF=1,M.ATTRIBUTE=2,M.CHILD=3,M.DESCENDANT=4,M.DESCENDANTORSELF=5,M.FOLLOWING=6,M.FOLLOWINGSIBLING=7,M.NAMESPACE=8,M.PARENT=9,M.PRECEDING=10,M.PRECEDINGSIBLING=11,M.SELF=12,M.STEPNAMES=r(function(t,e){return t[e[0]]=e[1],t},{},[[M.ANCESTOR,"ancestor"],[M.ANCESTORORSELF,"ancestor-or-self"],[M.ATTRIBUTE,"attribute"],[M.CHILD,"child"],[M.DESCENDANT,"descendant"],[M.DESCENDANTORSELF,"descendant-or-self"],[M.FOLLOWING,"following"],[M.FOLLOWINGSIBLING,"following-sibling"],[M.NAMESPACE,"namespace"],[M.PARENT,"parent"],[M.PRECEDING,"preceding"],[M.PRECEDINGSIBLING,"preceding-sibling"],[M.SELF,"self"]]),P.prototype=new Object,P.prototype.constructor=P,P.superclass=Object.prototype,P.prototype.init=function(t,e){this.type=t,this.value=e},P.prototype.toString=function(){return"<unknown nodetest type>"},P.prototype.matches=function(t,e){console.warn("unknown node test type")},P.NAMETESTANY=0,P.NAMETESTPREFIXANY=1,P.NAMETESTQNAME=2,P.COMMENT=3,P.TEXT=4,P.PI=5,P.NODE=6,P.isNodeType=function(t){return a(s(t),u("nodeType"))},P.makeNodeTestType=function(t,e,n){var r=n||function(){};for(var i in r.prototype=new P(e.type),r.prototype.constructor=t,e)r.prototype[i]=e[i];return r},P.makeNodeTypeTest=function(t,e,n){return new(P.makeNodeTestType(t,{matches:P.isNodeType(e),toString:(r=n,function(){return r})}));var r},P.hasPrefix=function(t){return t.prefix||-1!==(t.nodeName||t.tagName).indexOf(":")},P.isElementOrAttribute=P.isNodeType([1,2]),P.nameSpaceMatches=function(t,e,n){var r=n.namespaceURI||"";if(!t)return!r||e.allowAnyNamespaceForNoPrefix&&!P.hasPrefix(n);var i=e.namespaceResolver.getNamespace(t,e.expressionContextNode);if(null==i)throw new Error("Cannot resolve QName "+t);return i===r},P.localNameMatches=function(t,e,n){var r=n.localName||n.nodeName;return e.caseInsensitive?t.toLowerCase()===r.toLowerCase():t===r},P.NameTestPrefixAny=P.makeNodeTestType(P.NAMETESTPREFIXANY,{matches:function(t,e){return P.isElementOrAttribute(t)&&P.nameSpaceMatches(this.prefix,e,t)},toString:function(){return this.prefix+":*"}},function(t){this.prefix=t}),P.NameTestQName=P.makeNodeTestType(P.NAMETESTQNAME,{matches:function(t,e){return P.isNodeType([1,2,W.XPATH_NAMESPACE_NODE])(t)&&P.nameSpaceMatches(this.prefix,e,t)&&P.localNameMatches(this.localName,e,t)},toString:function(){return this.name}},function(t){var e=t.split(":");this.name=t,this.prefix=e.length>1?e[0]:null,this.localName=e[e.length>1?1:0]}),P.PITest=P.makeNodeTestType(P.PI,{matches:function(t,e){return P.isNodeType([7])(t)&&(t.target||t.nodeName)===this.name},toString:function(){return f('processing-instruction("','")',this.name)}},function(t){this.name=t}),P.nameTestAny=P.makeNodeTypeTest(P.NAMETESTANY,[1,2,W.XPATH_NAMESPACE_NODE],"*"),P.textTest=P.makeNodeTypeTest(P.TEXT,[3,4],"text()"),P.commentTest=P.makeNodeTypeTest(P.COMMENT,[8],"comment()"),P.nodeTest=P.makeNodeTypeTest(P.NODE,[1,2,3,4,7,8,9],"node()"),P.anyPiTest=P.makeNodeTypeTest(P.PI,[7],"processing-instruction()"),B.prototype=new v,B.prototype.constructor=B,B.superclass=v.prototype,B.prototype.init=function(t){this.variable=t},B.prototype.toString=function(){return"$"+this.variable},B.prototype.evaluate=function(t){var e=K.resolveQName(this.variable,t.namespaceResolver,t.contextNode,!1);if(null==e[0])throw new Error("Cannot resolve QName "+fn);var n=t.variableResolver.getVariable(e[1],e[0]);if(!n)throw Z.fromMessage("Undeclared variable: "+this.toString());return n},j.prototype=new v,j.prototype.constructor=j,j.superclass=v.prototype,j.prototype.init=function(t,e){this.functionName=t,this.arguments=e},j.prototype.toString=function(){for(var t=this.functionName+"(",e=0;e<this.arguments.length;e++)e>0&&(t+=", "),t+=this.arguments[e].toString();return t+")"},j.prototype.evaluate=function(t){var e=Y.getFunctionFromContext(this.functionName,t);if(!e)throw new Error("Unknown function "+this.functionName);var n=[t].concat(this.arguments);return e.apply(t.functionResolver.thisArg,n)};var F=new Object;function U(t){arguments.length>0&&this.init(t)}function J(t){arguments.length>0&&this.init(t)}function H(t){arguments.length>0&&this.init(t)}function q(t){this.init(t)}function z(){this.init()}function W(t,e,n){this.isXPathNamespace=!0,this.ownerDocument=n.ownerDocument,this.nodeName="#namespace",this.prefix=t,this.localName=t,this.namespaceURI=e,this.nodeValue=e,this.ownerElement=n,this.nodeType=W.XPATH_NAMESPACE_NODE}function V(t,e,n){this.variableResolver=null!=t?t:new G,this.namespaceResolver=null!=e?e:new X,this.functionResolver=null!=n?n:new Y}function G(){}function Y(t){this.thisArg=null!=t?t:Q,this.functions=new Object,this.addStandardFunctions()}function X(){}F.equals=function(t,e){return t.equals(e)},F.notequal=function(t,e){return t.notequal(e)},F.lessthan=function(t,e){return t.lessthan(e)},F.greaterthan=function(t,e){return t.greaterthan(e)},F.lessthanorequal=function(t,e){return t.lessthanorequal(e)},F.greaterthanorequal=function(t,e){return t.greaterthanorequal(e)},U.prototype=new v,U.prototype.constructor=U,U.superclass=v.prototype,U.prototype.init=function(t){this.str=String(t)},U.prototype.toString=function(){return this.str},U.prototype.evaluate=function(t){return this},U.prototype.string=function(){return this},U.prototype.number=function(){return new J(this.str)},U.prototype.bool=function(){return new H(this.str)},U.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},U.prototype.stringValue=function(){return this.str},U.prototype.numberValue=function(){return this.number().numberValue()},U.prototype.booleanValue=function(){return this.bool().booleanValue()},U.prototype.equals=function(t){return K.instance_of(t,H)?this.bool().equals(t):K.instance_of(t,J)?this.number().equals(t):K.instance_of(t,z)?t.compareWithString(this,F.equals):new H(this.str==t.str)},U.prototype.notequal=function(t){return K.instance_of(t,H)?this.bool().notequal(t):K.instance_of(t,J)?this.number().notequal(t):K.instance_of(t,z)?t.compareWithString(this,F.notequal):new H(this.str!=t.str)},U.prototype.lessthan=function(t){return this.number().lessthan(t)},U.prototype.greaterthan=function(t){return this.number().greaterthan(t)},U.prototype.lessthanorequal=function(t){return this.number().lessthanorequal(t)},U.prototype.greaterthanorequal=function(t){return this.number().greaterthanorequal(t)},J.prototype=new v,J.prototype.constructor=J,J.superclass=v.prototype,J.prototype.init=function(t){this.num="string"==typeof t?this.parse(t):Number(t)},J.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,J.prototype.parse=function(t){return this.numberFormat.test(t)?parseFloat(t):Number.NaN},J.prototype.toString=function(){var t=this.num.toString();return-1!==t.indexOf("e-")?function(t){for(var e=t.split("e-"),n=e[0].replace(".",""),r=Number(e[1]),i=0;i<r-1;i+=1)n="0"+n;return"0."+n}(t):-1!==t.indexOf("e")?function(t){for(var e=t.split("e"),n=e[0].replace(".",""),r=Number(e[1])+1-n.length,i=0;i<r;i+=1)n+="0";return n}(t):t},J.prototype.evaluate=function(t){return this},J.prototype.string=function(){return new U(this.toString())},J.prototype.number=function(){return this},J.prototype.bool=function(){return new H(this.num)},J.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},J.prototype.stringValue=function(){return this.string().stringValue()},J.prototype.numberValue=function(){return this.num},J.prototype.booleanValue=function(){return this.bool().booleanValue()},J.prototype.negate=function(){return new J(-this.num)},J.prototype.equals=function(t){return K.instance_of(t,H)?this.bool().equals(t):K.instance_of(t,U)?this.equals(t.number()):K.instance_of(t,z)?t.compareWithNumber(this,F.equals):new H(this.num==t.num)},J.prototype.notequal=function(t){return K.instance_of(t,H)?this.bool().notequal(t):K.instance_of(t,U)?this.notequal(t.number()):K.instance_of(t,z)?t.compareWithNumber(this,F.notequal):new H(this.num!=t.num)},J.prototype.lessthan=function(t){return K.instance_of(t,z)?t.compareWithNumber(this,F.greaterthan):K.instance_of(t,H)||K.instance_of(t,U)?this.lessthan(t.number()):new H(this.num<t.num)},J.prototype.greaterthan=function(t){return K.instance_of(t,z)?t.compareWithNumber(this,F.lessthan):K.instance_of(t,H)||K.instance_of(t,U)?this.greaterthan(t.number()):new H(this.num>t.num)},J.prototype.lessthanorequal=function(t){return K.instance_of(t,z)?t.compareWithNumber(this,F.greaterthanorequal):K.instance_of(t,H)||K.instance_of(t,U)?this.lessthanorequal(t.number()):new H(this.num<=t.num)},J.prototype.greaterthanorequal=function(t){return K.instance_of(t,z)?t.compareWithNumber(this,F.lessthanorequal):K.instance_of(t,H)||K.instance_of(t,U)?this.greaterthanorequal(t.number()):new H(this.num>=t.num)},J.prototype.plus=function(t){return new J(this.num+t.num)},J.prototype.minus=function(t){return new J(this.num-t.num)},J.prototype.multiply=function(t){return new J(this.num*t.num)},J.prototype.div=function(t){return new J(this.num/t.num)},J.prototype.mod=function(t){return new J(this.num%t.num)},H.prototype=new v,H.prototype.constructor=H,H.superclass=v.prototype,H.prototype.init=function(t){this.b=Boolean(t)},H.prototype.toString=function(){return this.b.toString()},H.prototype.evaluate=function(t){return this},H.prototype.string=function(){return new U(this.b)},H.prototype.number=function(){return new J(this.b)},H.prototype.bool=function(){return this},H.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},H.prototype.stringValue=function(){return this.string().stringValue()},H.prototype.numberValue=function(){return this.number().numberValue()},H.prototype.booleanValue=function(){return this.b},H.prototype.not=function(){return new H(!this.b)},H.prototype.equals=function(t){return K.instance_of(t,U)||K.instance_of(t,J)?this.equals(t.bool()):K.instance_of(t,z)?t.compareWithBoolean(this,F.equals):new H(this.b==t.b)},H.prototype.notequal=function(t){return K.instance_of(t,U)||K.instance_of(t,J)?this.notequal(t.bool()):K.instance_of(t,z)?t.compareWithBoolean(this,F.notequal):new H(this.b!=t.b)},H.prototype.lessthan=function(t){return this.number().lessthan(t)},H.prototype.greaterthan=function(t){return this.number().greaterthan(t)},H.prototype.lessthanorequal=function(t){return this.number().lessthanorequal(t)},H.prototype.greaterthanorequal=function(t){return this.number().greaterthanorequal(t)},H.true_=new H(!0),H.false_=new H(!1),q.prototype=new Object,q.prototype.constructor=q,q.superclass=Object.prototype,q.prototype.init=function(t){this.left=null,this.right=null,this.node=t,this.depth=1},q.prototype.balance=function(){var t=null==this.left?0:this.left.depth,e=null==this.right?0:this.right.depth;if(t>e+1)(null==this.left.left?0:this.left.left.depth)<(null==this.left.right?0:this.left.right.depth)&&this.left.rotateRR(),this.rotateLL();else if(t+1<e){var n=null==this.right.right?0:this.right.right.depth;(null==this.right.left?0:this.right.left.depth)>n&&this.right.rotateLL(),this.rotateRR()}},q.prototype.rotateLL=function(){var t=this.node,e=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=e,this.right.node=t,this.right.updateInNewLocation(),this.updateInNewLocation()},q.prototype.rotateRR=function(){var t=this.node,e=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=e,this.left.node=t,this.left.updateInNewLocation(),this.updateInNewLocation()},q.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},q.prototype.getDepthFromChildren=function(){this.depth=null==this.node?0:1,null!=this.left&&(this.depth=this.left.depth+1),null!=this.right&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)},q.prototype.add=function(t){if(t===this.node)return!1;var e=function(t,e){if(t===e)return 0;if(t.compareDocumentPosition){var n=t.compareDocumentPosition(e);return 1&n?1:10&n?1:20&n?-1:0}for(var r=0,i=0,o=t;null!=o;o=o.parentNode||o.ownerElement)r++;for(var a=e;null!=a;a=a.parentNode||a.ownerElement)i++;if(r>i){for(;r>i;)t=t.parentNode||t.ownerElement,r--;if(t===e)return 1}else if(i>r){for(;i>r;)e=e.parentNode||e.ownerElement,i--;if(t===e)return-1}for(var s=t.parentNode||t.ownerElement,u=e.parentNode||e.ownerElement;s!==u;)e=u,s=(t=s).parentNode||t.ownerElement,u=e.parentNode||e.ownerElement;var c=K.isAttribute(t),l=K.isAttribute(e);if(c&&!l)return-1;if(!c&&l)return 1;if(s)for(var f=c?s.attributes:s.childNodes,p=f.length,h=0;h<p;h+=1){var d=f[h];if(d===t)return-1;if(d===e)return 1}throw new Error("Unexpected: could not determine node order")}(t,this.node),n=!1;return-1==e?null==this.left?(this.left=new q(t),n=!0):(n=this.left.add(t))&&this.balance():1==e&&(null==this.right?(this.right=new q(t),n=!0):(n=this.right.add(t))&&this.balance()),n&&this.getDepthFromChildren(),n},z.prototype=new v,z.prototype.constructor=z,z.superclass=v.prototype,z.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},z.prototype.toString=function(){var t=this.first();return null==t?"":this.stringForNode(t)},z.prototype.evaluate=function(t){return this},z.prototype.string=function(){return new U(this.toString())},z.prototype.stringValue=function(){return this.toString()},z.prototype.number=function(){return new J(this.string())},z.prototype.numberValue=function(){return Number(this.string())},z.prototype.bool=function(){return new H(this.booleanValue())},z.prototype.booleanValue=function(){return!!this.size},z.prototype.nodeset=function(){return this},z.prototype.stringForNode=function(t){return 9==t.nodeType||1==t.nodeType||11===t.nodeType?this.stringForContainerNode(t):2===t.nodeType?t.value||t.nodeValue:t.isNamespaceNode?t.namespace:t.nodeValue},z.prototype.stringForContainerNode=function(t){for(var e="",n=t.firstChild;null!=n;n=n.nextSibling){var r=n.nodeType;1!==r&&3!==r&&4!==r&&9!==r&&11!==r||(e+=this.stringForNode(n))}return e},z.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new q(this.nodes[0]);for(var t=1;t<this.nodes.length;t+=1)this.tree.add(this.nodes[t])}return this.tree},z.prototype.first=function(){var t=this.buildTree();if(null==t)return null;for(;null!=t.left;)t=t.left;return t.node},z.prototype.add=function(t){for(var e=0;e<this.nodes.length;e+=1)if(t===this.nodes[e])return;this.tree=null,this.nodes.push(t),this.size+=1},z.prototype.addArray=function(t){var e=this;n(function(t){e.add(t)},t)},z.prototype.toArray=function(){var t=[];return this.toArrayRec(this.buildTree(),t),t},z.prototype.toArrayRec=function(t,e){null!=t&&(this.toArrayRec(t.left,e),e.push(t.node),this.toArrayRec(t.right,e))},z.prototype.toUnsortedArray=function(){return this.nodes.slice()},z.prototype.compareWithString=function(t,e){for(var n=this.toUnsortedArray(),r=0;r<n.length;r++){var i=n[r],o=e(new U(this.stringForNode(i)),t);if(o.booleanValue())return o}return new H(!1)},z.prototype.compareWithNumber=function(t,e){for(var n=this.toUnsortedArray(),r=0;r<n.length;r++){var i=n[r],o=e(new J(this.stringForNode(i)),t);if(o.booleanValue())return o}return new H(!1)},z.prototype.compareWithBoolean=function(t,e){return e(this.bool(),t)},z.prototype.compareWithNodeSet=function(t,e){for(var n=this.toUnsortedArray(),r=function(t,n){return e(n,t)},i=0;i<n.length;i++){var o=new U(this.stringForNode(n[i])),a=t.compareWithString(o,r);if(a.booleanValue())return a}return new H(!1)},z.compareWith=e(function(t,e){return K.instance_of(e,U)?this.compareWithString(e,t):K.instance_of(e,J)?this.compareWithNumber(e,t):K.instance_of(e,H)?this.compareWithBoolean(e,t):this.compareWithNodeSet(e,t)}),z.prototype.equals=z.compareWith(F.equals),z.prototype.notequal=z.compareWith(F.notequal),z.prototype.lessthan=z.compareWith(F.lessthan),z.prototype.greaterthan=z.compareWith(F.greaterthan),z.prototype.lessthanorequal=z.compareWith(F.lessthanorequal),z.prototype.greaterthanorequal=z.compareWith(F.greaterthanorequal),z.prototype.union=function(t){var e=new z;return e.addArray(this.toUnsortedArray()),e.addArray(t.toUnsortedArray()),e},W.prototype=new Object,W.prototype.constructor=W,W.superclass=Object.prototype,W.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},V.prototype=new Object,V.prototype.constructor=V,V.superclass=Object.prototype,V.prototype.extend=function(t){return p(new V,this,t)},G.prototype=new Object,G.prototype.constructor=G,G.superclass=Object.prototype,G.prototype.getVariable=function(t,e){return null},Y.prototype=new Object,Y.prototype.constructor=Y,Y.superclass=Object.prototype,Y.prototype.addStandardFunctions=function(){this.functions["{}last"]=Q.last,this.functions["{}position"]=Q.position,this.functions["{}count"]=Q.count,this.functions["{}id"]=Q.id,this.functions["{}local-name"]=Q.localName,this.functions["{}namespace-uri"]=Q.namespaceURI,this.functions["{}name"]=Q.name,this.functions["{}string"]=Q.string,this.functions["{}concat"]=Q.concat,this.functions["{}starts-with"]=Q.startsWith,this.functions["{}contains"]=Q.contains,this.functions["{}substring-before"]=Q.substringBefore,this.functions["{}substring-after"]=Q.substringAfter,this.functions["{}substring"]=Q.substring,this.functions["{}string-length"]=Q.stringLength,this.functions["{}normalize-space"]=Q.normalizeSpace,this.functions["{}translate"]=Q.translate,this.functions["{}boolean"]=Q.boolean_,this.functions["{}not"]=Q.not,this.functions["{}true"]=Q.true_,this.functions["{}false"]=Q.false_,this.functions["{}lang"]=Q.lang,this.functions["{}number"]=Q.number,this.functions["{}sum"]=Q.sum,this.functions["{}floor"]=Q.floor,this.functions["{}ceiling"]=Q.ceiling,this.functions["{}round"]=Q.round},Y.prototype.addFunction=function(t,e,n){this.functions["{"+t+"}"+e]=n},Y.getFunctionFromContext=function(t,e){var n=K.resolveQName(t,e.namespaceResolver,e.contextNode,!1);if(null===n[0])throw new Error("Cannot resolve QName "+name);return e.functionResolver.getFunction(n[1],n[0])},Y.prototype.getFunction=function(t,e){return this.functions["{"+e+"}"+t]},X.prototype=new Object,X.prototype.constructor=X,X.superclass=Object.prototype,X.prototype.getNamespace=function(t,e){if("xml"==t)return d.XML_NAMESPACE_URI;if("xmlns"==t)return d.XMLNS_NAMESPACE_URI;for(9==e.nodeType?e=e.documentElement:2==e.nodeType?e=R.getOwnerElement(e):1!=e.nodeType&&(e=e.parentNode);null!=e&&1==e.nodeType;){for(var n=e.attributes,r=0;r<n.length;r++){var i=n.item(r),o=i.name||i.nodeName;if("xmlns"===o&&""===t||o==="xmlns:"+t)return String(i.value||i.nodeValue)}e=e.parentNode}return null};var Q=new Object;Q.last=function(t){if(1!=arguments.length)throw new Error("Function last expects ()");return new J(t.contextSize)},Q.position=function(t){if(1!=arguments.length)throw new Error("Function position expects ()");return new J(t.contextPosition)},Q.count=function(){var t,e=arguments[0];if(2!=arguments.length||!K.instance_of(t=arguments[1].evaluate(e),z))throw new Error("Function count expects (node-set)");return new J(t.size)},Q.id=function(){var t,e=arguments[0];if(2!=arguments.length)throw new Error("Function id expects (object)");t=arguments[1].evaluate(e);for(var n=(t=K.instance_of(t,z)?t.toArray().join(" "):t.stringValue()).split(/[\x0d\x0a\x09\x20]+/),r=new z,i=9==e.contextNode.nodeType?e.contextNode:e.contextNode.ownerDocument,o=0;o<n.length;o++){var a;null!=(a=i.getElementById?i.getElementById(n[o]):K.getElementById(i,n[o]))&&(r.add(a),0)}return r},Q.localName=function(t,e){var n;if(1==arguments.length)n=t.contextNode;else{if(2!=arguments.length)throw new Error("Function local-name expects (node-set?)");n=e.evaluate(t).first()}return new U(null==n?"":n.localName||n.baseName||n.target||n.nodeName||"")},Q.namespaceURI=function(){var t,e=arguments[0];if(1==arguments.length)t=e.contextNode;else{if(2!=arguments.length)throw new Error("Function namespace-uri expects (node-set?)");t=arguments[1].evaluate(e).first()}return new U(null==t?"":t.namespaceURI)},Q.name=function(){var t,e=arguments[0];if(1==arguments.length)t=e.contextNode;else{if(2!=arguments.length)throw new Error("Function name expects (node-set?)");t=arguments[1].evaluate(e).first()}return null==t?new U(""):1==t.nodeType?new U(t.nodeName):2==t.nodeType?new U(t.name||t.nodeName):7===t.nodeType?new U(t.target||t.nodeName):null==t.localName?new U(""):new U(t.localName)},Q.string=function(){var t=arguments[0];if(1==arguments.length)return new U(z.prototype.stringForNode(t.contextNode));if(2==arguments.length)return arguments[1].evaluate(t).string();throw new Error("Function string expects (object?)")},Q.concat=function(t){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var e="",n=1;n<arguments.length;n++)e+=arguments[n].evaluate(t).stringValue();return new U(e)},Q.startsWith=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function startsWith expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),n=arguments[2].evaluate(t).stringValue();return new H(e.substring(0,n.length)==n)},Q.contains=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function contains expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),n=arguments[2].evaluate(t).stringValue();return new H(-1!==e.indexOf(n))},Q.substringBefore=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function substring-before expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),n=arguments[2].evaluate(t).stringValue();return new U(e.substring(0,e.indexOf(n)))},Q.substringAfter=function(){var t=arguments[0];if(3!=arguments.length)throw new Error("Function substring-after expects (string, string)");var e=arguments[1].evaluate(t).stringValue(),n=arguments[2].evaluate(t).stringValue();if(0==n.length)return new U(e);var r=e.indexOf(n);return new U(-1==r?"":e.substring(r+n.length))},Q.substring=function(){var t=arguments[0];if(3!=arguments.length&&4!=arguments.length)throw new Error("Function substring expects (string, number, number?)");var e=arguments[1].evaluate(t).stringValue(),n=Math.round(arguments[2].evaluate(t).numberValue())-1,r=4==arguments.length?n+Math.round(arguments[3].evaluate(t).numberValue()):void 0;return new U(e.substring(n,r))},Q.stringLength=function(){var t,e=arguments[0];if(1==arguments.length)t=z.prototype.stringForNode(e.contextNode);else{if(2!=arguments.length)throw new Error("Function string-length expects (string?)");t=arguments[1].evaluate(e).stringValue()}return new J(t.length)},Q.normalizeSpace=function(){var t,e=arguments[0];if(1==arguments.length)t=z.prototype.stringForNode(e.contextNode);else{if(2!=arguments.length)throw new Error("Function normalize-space expects (string?)");t=arguments[1].evaluate(e).stringValue()}for(var n=0,r=t.length-1;K.isSpace(t.charCodeAt(r));)r--;for(var i="";n<=r&&K.isSpace(t.charCodeAt(n));)n++;for(;n<=r;)if(K.isSpace(t.charCodeAt(n)))for(i+=" ";n<=r&&K.isSpace(t.charCodeAt(n));)n++;else i+=t.charAt(n),n++;return new U(i)},Q.translate=function(t,e,n,o){if(4!=arguments.length)throw new Error("Function translate expects (string, string, string)");var a=e.evaluate(t).stringValue(),s=n.evaluate(t).stringValue(),u=o.evaluate(t).stringValue(),c=r(function(t,e,n){return e in t||(t[e]=n>u.length?"":u[n]),t},{},s);return new U(l("",i(function(t){return t in c?c[t]:t},a)))},Q.boolean_=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(t).bool()},Q.not=function(t,e){if(2!=arguments.length)throw new Error("Function not expects (object)");return e.evaluate(t).bool().not()},Q.true_=function(){if(1!=arguments.length)throw new Error("Function true expects ()");return H.true_},Q.false_=function(){if(1!=arguments.length)throw new Error("Function false expects ()");return H.false_},Q.lang=function(){var t,e=arguments[0];if(2!=arguments.length)throw new Error("Function lang expects (string)");for(var n=e.contextNode;null!=n&&9!=n.nodeType;n=n.parentNode){var r=n.getAttributeNS(d.XML_NAMESPACE_URI,"lang");if(null!=r){t=String(r);break}}if(null==t)return H.false_;var i=arguments[1].evaluate(e).stringValue();return new H(t.substring(0,i.length)==i&&(t.length==i.length||"-"==t.charAt(i.length)))},Q.number=function(){var t=arguments[0];if(1!=arguments.length&&2!=arguments.length)throw new Error("Function number expects (object?)");return 1==arguments.length?new J(z.prototype.stringForNode(t.contextNode)):arguments[1].evaluate(t).number()},Q.sum=function(){var t,e=arguments[0];if(2!=arguments.length||!K.instance_of(t=arguments[1].evaluate(e),z))throw new Error("Function sum expects (node-set)");t=t.toUnsortedArray();for(var n=0,r=0;r<t.length;r++)n+=new J(z.prototype.stringForNode(t[r])).numberValue();return new J(n)},Q.floor=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function floor expects (number)");return new J(Math.floor(arguments[1].evaluate(t).numberValue()))},Q.ceiling=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function ceiling expects (number)");return new J(Math.ceil(arguments[1].evaluate(t).numberValue()))},Q.round=function(){var t=arguments[0];if(2!=arguments.length)throw new Error("Function round expects (number)");return new J(Math.round(arguments[1].evaluate(t).numberValue()))};var K=new Object;K.isAttribute=function(t){return t&&(2===t.nodeType||t.ownerElement)},K.splitQName=function(t){var e=t.indexOf(":");return-1==e?[null,t]:[t.substring(0,e),t.substring(e+1)]},K.resolveQName=function(t,e,n,r){var i=K.splitQName(t);return null!=i[0]?i[0]=e.getNamespace(i[0],n):r?(i[0]=e.getNamespace("",n),null==i[0]&&(i[0]="")):i[0]="",i},K.isSpace=function(t){return 9==t||13==t||10==t||32==t},K.isLetter=function(t){return t>=65&&t<=90||t>=97&&t<=122||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=255||t>=256&&t<=305||t>=308&&t<=318||t>=321&&t<=328||t>=330&&t<=382||t>=384&&t<=451||t>=461&&t<=496||t>=500&&t<=501||t>=506&&t<=535||t>=592&&t<=680||t>=699&&t<=705||902==t||t>=904&&t<=906||908==t||t>=910&&t<=929||t>=931&&t<=974||t>=976&&t<=982||986==t||988==t||990==t||992==t||t>=994&&t<=1011||t>=1025&&t<=1036||t>=1038&&t<=1103||t>=1105&&t<=1116||t>=1118&&t<=1153||t>=1168&&t<=1220||t>=1223&&t<=1224||t>=1227&&t<=1228||t>=1232&&t<=1259||t>=1262&&t<=1269||t>=1272&&t<=1273||t>=1329&&t<=1366||1369==t||t>=1377&&t<=1414||t>=1488&&t<=1514||t>=1520&&t<=1522||t>=1569&&t<=1594||t>=1601&&t<=1610||t>=1649&&t<=1719||t>=1722&&t<=1726||t>=1728&&t<=1742||t>=1744&&t<=1747||1749==t||t>=1765&&t<=1766||t>=2309&&t<=2361||2365==t||t>=2392&&t<=2401||t>=2437&&t<=2444||t>=2447&&t<=2448||t>=2451&&t<=2472||t>=2474&&t<=2480||2482==t||t>=2486&&t<=2489||t>=2524&&t<=2525||t>=2527&&t<=2529||t>=2544&&t<=2545||t>=2565&&t<=2570||t>=2575&&t<=2576||t>=2579&&t<=2600||t>=2602&&t<=2608||t>=2610&&t<=2611||t>=2613&&t<=2614||t>=2616&&t<=2617||t>=2649&&t<=2652||2654==t||t>=2674&&t<=2676||t>=2693&&t<=2699||2701==t||t>=2703&&t<=2705||t>=2707&&t<=2728||t>=2730&&t<=2736||t>=2738&&t<=2739||t>=2741&&t<=2745||2749==t||2784==t||t>=2821&&t<=2828||t>=2831&&t<=2832||t>=2835&&t<=2856||t>=2858&&t<=2864||t>=2866&&t<=2867||t>=2870&&t<=2873||2877==t||t>=2908&&t<=2909||t>=2911&&t<=2913||t>=2949&&t<=2954||t>=2958&&t<=2960||t>=2962&&t<=2965||t>=2969&&t<=2970||2972==t||t>=2974&&t<=2975||t>=2979&&t<=2980||t>=2984&&t<=2986||t>=2990&&t<=2997||t>=2999&&t<=3001||t>=3077&&t<=3084||t>=3086&&t<=3088||t>=3090&&t<=3112||t>=3114&&t<=3123||t>=3125&&t<=3129||t>=3168&&t<=3169||t>=3205&&t<=3212||t>=3214&&t<=3216||t>=3218&&t<=3240||t>=3242&&t<=3251||t>=3253&&t<=3257||3294==t||t>=3296&&t<=3297||t>=3333&&t<=3340||t>=3342&&t<=3344||t>=3346&&t<=3368||t>=3370&&t<=3385||t>=3424&&t<=3425||t>=3585&&t<=3630||3632==t||t>=3634&&t<=3635||t>=3648&&t<=3653||t>=3713&&t<=3714||3716==t||t>=3719&&t<=3720||3722==t||3725==t||t>=3732&&t<=3735||t>=3737&&t<=3743||t>=3745&&t<=3747||3749==t||3751==t||t>=3754&&t<=3755||t>=3757&&t<=3758||3760==t||t>=3762&&t<=3763||3773==t||t>=3776&&t<=3780||t>=3904&&t<=3911||t>=3913&&t<=3945||t>=4256&&t<=4293||t>=4304&&t<=4342||4352==t||t>=4354&&t<=4355||t>=4357&&t<=4359||4361==t||t>=4363&&t<=4364||t>=4366&&t<=4370||4412==t||4414==t||4416==t||4428==t||4430==t||4432==t||t>=4436&&t<=4437||4441==t||t>=4447&&t<=4449||4451==t||4453==t||4455==t||4457==t||t>=4461&&t<=4462||t>=4466&&t<=4467||4469==t||4510==t||4520==t||4523==t||t>=4526&&t<=4527||t>=4535&&t<=4536||4538==t||t>=4540&&t<=4546||4587==t||4592==t||4601==t||t>=7680&&t<=7835||t>=7840&&t<=7929||t>=7936&&t<=7957||t>=7960&&t<=7965||t>=7968&&t<=8005||t>=8008&&t<=8013||t>=8016&&t<=8023||8025==t||8027==t||8029==t||t>=8031&&t<=8061||t>=8064&&t<=8116||t>=8118&&t<=8124||8126==t||t>=8130&&t<=8132||t>=8134&&t<=8140||t>=8144&&t<=8147||t>=8150&&t<=8155||t>=8160&&t<=8172||t>=8178&&t<=8180||t>=8182&&t<=8188||8486==t||t>=8490&&t<=8491||8494==t||t>=8576&&t<=8578||t>=12353&&t<=12436||t>=12449&&t<=12538||t>=12549&&t<=12588||t>=44032&&t<=55203||t>=19968&&t<=40869||12295==t||t>=12321&&t<=12329},K.isNCNameChar=function(t){return t>=48&&t<=57||t>=1632&&t<=1641||t>=1776&&t<=1785||t>=2406&&t<=2415||t>=2534&&t<=2543||t>=2662&&t<=2671||t>=2790&&t<=2799||t>=2918&&t<=2927||t>=3047&&t<=3055||t>=3174&&t<=3183||t>=3302&&t<=3311||t>=3430&&t<=3439||t>=3664&&t<=3673||t>=3792&&t<=3801||t>=3872&&t<=3881||46==t||45==t||95==t||K.isLetter(t)||t>=768&&t<=837||t>=864&&t<=865||t>=1155&&t<=1158||t>=1425&&t<=1441||t>=1443&&t<=1465||t>=1467&&t<=1469||1471==t||t>=1473&&t<=1474||1476==t||t>=1611&&t<=1618||1648==t||t>=1750&&t<=1756||t>=1757&&t<=1759||t>=1760&&t<=1764||t>=1767&&t<=1768||t>=1770&&t<=1773||t>=2305&&t<=2307||2364==t||t>=2366&&t<=2380||2381==t||t>=2385&&t<=2388||t>=2402&&t<=2403||t>=2433&&t<=2435||2492==t||2494==t||2495==t||t>=2496&&t<=2500||t>=2503&&t<=2504||t>=2507&&t<=2509||2519==t||t>=2530&&t<=2531||2562==t||2620==t||2622==t||2623==t||t>=2624&&t<=2626||t>=2631&&t<=2632||t>=2635&&t<=2637||t>=2672&&t<=2673||t>=2689&&t<=2691||2748==t||t>=2750&&t<=2757||t>=2759&&t<=2761||t>=2763&&t<=2765||t>=2817&&t<=2819||2876==t||t>=2878&&t<=2883||t>=2887&&t<=2888||t>=2891&&t<=2893||t>=2902&&t<=2903||t>=2946&&t<=2947||t>=3006&&t<=3010||t>=3014&&t<=3016||t>=3018&&t<=3021||3031==t||t>=3073&&t<=3075||t>=3134&&t<=3140||t>=3142&&t<=3144||t>=3146&&t<=3149||t>=3157&&t<=3158||t>=3202&&t<=3203||t>=3262&&t<=3268||t>=3270&&t<=3272||t>=3274&&t<=3277||t>=3285&&t<=3286||t>=3330&&t<=3331||t>=3390&&t<=3395||t>=3398&&t<=3400||t>=3402&&t<=3405||3415==t||3633==t||t>=3636&&t<=3642||t>=3655&&t<=3662||3761==t||t>=3764&&t<=3769||t>=3771&&t<=3772||t>=3784&&t<=3789||t>=3864&&t<=3865||3893==t||3895==t||3897==t||3902==t||3903==t||t>=3953&&t<=3972||t>=3974&&t<=3979||t>=3984&&t<=3989||3991==t||t>=3993&&t<=4013||t>=4017&&t<=4023||4025==t||t>=8400&&t<=8412||8417==t||t>=12330&&t<=12335||12441==t||12442==t||183==t||720==t||721==t||903==t||1600==t||3654==t||3782==t||12293==t||t>=12337&&t<=12341||t>=12445&&t<=12446||t>=12540&&t<=12542},K.coalesceText=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(3==e.nodeType||4==e.nodeType){var n=e.nodeValue,r=e;for(e=e.nextSibling;null!=e&&(3==e.nodeType||4==e.nodeType);){n+=e.nodeValue;var i=e;e=e.nextSibling,i.parentNode.removeChild(i)}if(4==r.nodeType){var o=r.parentNode;if(null==r.nextSibling)o.removeChild(r),o.appendChild(o.ownerDocument.createTextNode(n));else{var a=r.nextSibling;o.removeChild(r),o.insertBefore(o.ownerDocument.createTextNode(n),a)}}else r.nodeValue=n;if(null==e)break}else 1==e.nodeType&&K.coalesceText(e)},K.instance_of=function(t,e){for(;null!=t;){if(t.constructor===e)return!0;if(t===Object)return!1;t=t.constructor.superclass}return!1},K.getElementById=function(t,e){if(1==t.nodeType&&(t.getAttribute("id")==e||t.getAttributeNS(null,"id")==e))return t;for(var n=t.firstChild;null!=n;n=n.nextSibling){var r=K.getElementById(n,e);if(null!=r)return r}return null};var Z=function(){function t(e,n,r){var i=Error.call(this,function(e,n){var r=n?": "+n.toString():"";switch(e){case t.INVALID_EXPRESSION_ERR:return"Invalid expression"+r;case t.TYPE_ERR:return"Type error"+r}return null}(e,n)||r);return i.code=e,i.exception=n,i}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.superclass=Error,t.prototype.toString=function(){return this.message},t.fromMessage=function(e,n){return new t(null,n,e)},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,t}();function tt(t,e,n){this.xpath=n.parse(t),this.context=new V,this.context.namespaceResolver=new et(e)}function et(t){this.xpathNSResolver=t}function nt(t){this.node=t,this.namespaceResolver=new X}function rt(t,e){switch(e==rt.ANY_TYPE&&(t.constructor===U?e=rt.STRING_TYPE:t.constructor===J?e=rt.NUMBER_TYPE:t.constructor===H?e=rt.BOOLEAN_TYPE:t.constructor===z&&(e=rt.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=e,e){case rt.NUMBER_TYPE:return void(this.numberValue=t.numberValue());case rt.STRING_TYPE:return void(this.stringValue=t.stringValue());case rt.BOOLEAN_TYPE:return void(this.booleanValue=t.booleanValue());case rt.ANY_UNORDERED_NODE_TYPE:case rt.FIRST_ORDERED_NODE_TYPE:if(t.constructor===z)return void(this.singleNodeValue=t.first());break;case rt.UNORDERED_NODE_ITERATOR_TYPE:case rt.ORDERED_NODE_ITERATOR_TYPE:if(t.constructor===z)return this.invalidIteratorState=!1,this.nodes=t.toArray(),void(this.iteratorIndex=0);break;case rt.UNORDERED_NODE_SNAPSHOT_TYPE:case rt.ORDERED_NODE_SNAPSHOT_TYPE:if(t.constructor===z)return this.nodes=t.toArray(),void(this.snapshotLength=this.nodes.length)}throw new Z(Z.TYPE_ERR)}function it(t,e){t.createExpression=function(t,n){try{return new tt(t,n,e)}catch(t){throw new Z(Z.INVALID_EXPRESSION_ERR,t)}},t.createNSResolver=function(t){return new nt(t)},t.evaluate=function(n,r,i,o,a){if(o<0||o>9)throw{code:0,toString:function(){return"Request type not supported"}};return t.createExpression(n,i,e).evaluate(r,o,a)}}tt.prototype={},tt.prototype.constructor=tt,tt.superclass=Object.prototype,tt.getOwnerDocument=function(t){return 9===t.nodeType?t:t.ownerDocument},tt.detectHtmlDom=function(t){if(!t)return!1;var e=tt.getOwnerDocument(t);try{return e.implementation.hasFeature("HTML","2.0")}catch(t){return!0}},tt.prototype.evaluate=function(t,e,n){return this.context.expressionContextNode=t,this.context.caseInsensitive=tt.detectHtmlDom(t),new rt(this.xpath.evaluate(this.context),e)},et.prototype={},et.prototype.constructor=et,et.superclass=Object.prototype,et.prototype.getNamespace=function(t,e){return null==this.xpathNSResolver?null:this.xpathNSResolver.lookupNamespaceURI(t)},nt.prototype={},nt.prototype.constructor=nt,nt.superclass=Object.prototype,nt.prototype.lookupNamespaceURI=function(t){return this.namespaceResolver.getNamespace(t,this.node)},rt.prototype={},rt.prototype.constructor=rt,rt.superclass=Object.prototype,rt.prototype.iterateNext=function(){if(this.resultType!=rt.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=rt.ORDERED_NODE_ITERATOR_TYPE)throw new Z(Z.TYPE_ERR);return this.nodes[this.iteratorIndex++]},rt.prototype.snapshotItem=function(t){if(this.resultType!=rt.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=rt.ORDERED_NODE_SNAPSHOT_TYPE)throw new Z(Z.TYPE_ERR);return this.nodes[t]},rt.ANY_TYPE=0,rt.NUMBER_TYPE=1,rt.STRING_TYPE=2,rt.BOOLEAN_TYPE=3,rt.UNORDERED_NODE_ITERATOR_TYPE=4,rt.ORDERED_NODE_ITERATOR_TYPE=5,rt.UNORDERED_NODE_SNAPSHOT_TYPE=6,rt.ORDERED_NODE_SNAPSHOT_TYPE=7,rt.ANY_UNORDERED_NODE_TYPE=8,rt.FIRST_ORDERED_NODE_TYPE=9;try{var ot=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(ot=!1)}catch(t){}ot&&it(document,new h)}catch(t){}it(t,new h),function(){var e=new h,n=new X,r=new Y,i=new G;function o(t){return{getNamespace:function(e,r){return t(e,r)||n.getNamespace(e,r)}}}function a(t){return t&&"function"==typeof t.getNamespace?o((e=t).getNamespace.bind(e)):"function"==typeof t?o(t):"object"==typeof t?(r=t,o(function(t){return r[t]})):n;var e,r}function s(t){if(null===t||void 0===t||t instanceof U||t instanceof H||t instanceof J||t instanceof z)return t;switch(typeof t){case"string":return new U(t);case"boolean":return new H(t);case"number":return new J(t)}var e=new z;return e.addArray([].concat(t)),e}function u(t){return{getFunction:function(e,n){var i=t(e,n);return i?function(t){return function(e){var n=Array.prototype.slice.call(arguments,1).map(function(t){return t.evaluate(e)});return s(t.apply(this,[].concat(e,n)))}}(i):r.getFunction(e,n)}}}function c(t){return t&&"function"==typeof t.getFunction?u((e=t).getFunction.bind(e)):"function"==typeof t?u(t):"object"==typeof t?(n=t,u(function(t){return n[t]})):r;var e,n}function l(t){return{getVariable:function(e,n){return s(t(e,n))}}}function f(t,e,n){t in n&&(e[t]=n[t])}function p(t){var e=new V;return t?(e.namespaceResolver=a(t.namespaces),e.functionResolver=c(t.functions),e.variableResolver=function(t){if(t){if("function"==typeof t.getVariable)return l(t.getVariable.bind(t));if("function"==typeof t)return l(t);if("object"==typeof t)return l(function(e){return t[e]})}return i}(t.variables),e.expressionContextNode=t.node,f("allowAnyNamespaceForNoPrefix",e,t),f("isHtml",e,t)):e.namespaceResolver=n,e}var d={evaluate:function(t){return function(t,e){var n=p(e);return t.evaluate(n)}(this.expression,t)},evaluateNumber:function(t){return this.evaluate(t).numberValue()},evaluateString:function(t){return this.evaluate(t).stringValue()},evaluateBoolean:function(t){return this.evaluate(t).booleanValue()},evaluateNodeSet:function(t){return this.evaluate(t).nodeset()},select:function(t){return this.evaluateNodeSet(t).toArray()},select1:function(t){return this.select(t)[0]}};t.parse=function(t){var n=e.parse(t);return Object.create(d,{expression:{value:n}})}}(),t.XPath=d,t.XPathParser=h,t.XPathResult=rt,t.Step=M,t.NodeTest=P,t.BarOperation=O,t.NamespaceResolver=X,t.FunctionResolver=Y,t.VariableResolver=G,t.Utilities=K,t.XPathContext=V,t.XNodeSet=z,t.XBoolean=H,t.XString=U,t.XNumber=J,t.select=function(e,n,r){return t.selectWithResolver(e,n,null,r)},t.useNamespaces=function(e){var n={mappings:e||{},lookupNamespaceURI:function(t){return this.mappings[t]}};return function(e,r,i){return t.selectWithResolver(e,r,n,i)}},t.selectWithResolver=function(t,e,n,r){var i=new tt(t,n,new h),o=rt.ANY_TYPE,a=i.evaluate(e,o,null);return a.resultType==rt.STRING_TYPE?a=a.stringValue:a.resultType==rt.NUMBER_TYPE?a=a.numberValue:a.resultType==rt.BOOLEAN_TYPE?a=a.booleanValue:(a=a.nodes,r&&(a=a[0])),a},t.select1=function(e,n){return t.select(e,n,!0)}}(void 0===n?{}:n)},{}],60:[function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,a={},s=0,u=0;function c(t){var e="";do{e=i[t%o]+e,t=Math.floor(t/o)}while(t>0);return e}function l(){var t=c(+new Date);return t!==r?(s=0,r=t):t+"."+c(s++)}for(;u<o;u++)a[i[u]]=u;l.encode=c,l.decode=function(t){var e=0;for(u=0;u<t.length;u++)e=e*o+a[t.charAt(u)];return e},e.exports=l},{}],61:[function(t,e,n){var r=t("bson-objectid"),i=t("socket.io-client"),o=(t("querystring"),t("xpath")),a=t("xmldom").DOMParser,s=t("lodash"),u=(()=>{var t=null;const e={unready:"#60A7FF",pending:"#A3D39B",pause:"#ff75c9",running:"#ffee58",collapsed:"#e0412b",succeed:"#41EB4A"},n={ready:"#ffee58",pending:"#A3D39B",received:"#41EB4A",failed:"#e0412b",origin:"#60A7FF",optional:"#9bc8ff",input:"#FF8034"},u={link:e.unready,manualLink:"#0949ff",event:n.origin,states:e.unready,optional:n.optional},c="READY",l="PENDING",f="RECEIVED",p="FAILED",h="COLLAPSED",d="END",g="FINISHED",v="PAUSE",_="UNREADY",m="PENDING",y="PAUSE",b="RUNNING",w="COLLAPSED",N="12px 微软雅黑";var S=function(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;return function(t){var n=t.toLowerCase();if(n&&e.test(n)){if(4===n.length){for(var r="#",i=1;i<4;i+=1)r+=n.slice(i,i+1).concat(n.slice(i,i+1));n=r}var o=[];for(let t=1;t<7;t+=2)o.push(parseInt("0x"+n.slice(t,t+2)));return"RGB("+o.join(",")+")"}return n}(t).match(/RGB\((.+)\)/)[1]},T=function(){$(".contextMenu li").hide(),$(".contextMenu").hide()},E=function(t,e){for(var n=0;n<t.length;n++)if(t[n]._id==e)return t[n];return null},x=function(t){var e={};if("container"==t.elementType){for(var n in t)"function"!=typeof t[n]&&"childs"!=n&&"messageBus"!=n&&(e[n]=t[n]);if(e.childsID=[],t.childs&&void 0!=t.childs)for(var r=0;r<t.childs.length;r++)e.childsID.push(t.childs[r]._id)}else if("link"==t.elementType)for(var i in t)"function"!=typeof t[i]&&"messageBus"!=i&&("nodeA"==i?e.nodeAID=t[i]._id:"nodeZ"==i?e.nodeZID=t[i]._id:e[i]=t[i]);else if("node"==t.elementType)for(var o in t)"function"!=typeof t[o]&&"messageBus"!=o&&"inLinks"!=o&&"outLinks"!=o&&(e[o]=t[o]),"paint"==o&&(e[o]=t[o]);else if("scene"==t.elementType)for(var a in t)"function"!=typeof t[a]&&"stage"!=a&&"childs"!=a&&"currentElement"!=a&&"selectedElements"!=a&&"messageBus"!=a&&"mouseOverelement"!=a&&"mousecoord"!=a&&"operations"!=a&&"propertiesStack"!=a&&"serializedProperties"!=a&&"zIndexArray"!=a&&"mouseDownEvent"!=a&&"zIndexMap"!=a&&(e[a]=t[a]);return e},A=function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return t()+t(!0)+t(!0)+t()},k=function(){return Math.max.apply(null,$.map($("body > *"),function(t,e){if("absolute"==$(t).css("position")||"relative"==$(t).css("position")||"fixed"==$(t).css("position"))return parseInt($(t).css("z-index"))||1}))},C=function(t,e){for(let r=0;r<e.length;r++){var n=e[r].to;if(n.MSID==t.__MSID&&n.eventName==t.__eventName&&n.stateID==t.__stateID)return!0}return!1},D=function(t,e,n,r){e-=20;var i=function(t,e,n){for(var r=0,i=t.length-1;r<=i;){var o=Math.floor((r+i)/2),a=n.measureText(t.substr(0,o)).width,s=n.measureText(t.substr(0,o+1)).width;if(a<=e&&s>e)return o;a<e?r=o+1:i=o-1}return-1},o=document.getElementById("canvas").getContext("2d"),a=[],s=0,u=Math.floor(n/12)-2;for(r&&(o.font=r);-1!==(s=i(t,e,o));)a.push(t.substr(0,s)),t=t.substr(s);return t&&a.push(t),a.length>u&&(a=a.slice(0,u-1)).push("..."),a.join("\n")},I=function(t,e){try{var n=(new a).parseFromString(t),r=o.select("/ModelClass/Behavior/DatasetDeclarations/DatasetDeclaration[@name='"+e+"']",n);return 0==r.length&&(r=o.select("/ModelClass/Behavior/RelatedDatasets/DatasetItem[@name='"+e+"']",n)),r=(r=(r=(r=r.toString()).replace(/\"/g,"&quot")).replace(/</g,"&lt")).replace(/>/g,"&gt")}catch(t){return null}};return{__menuID:null,__hasChanged:!1,__stage:null,__scene:null,__toolMode:null,__mode:"view",__type:null,__solution:{layoutCfg:{scene:null,nodeList:[],containerList:[],linkList:[]},solutionCfg:{relationList:[],serviceList:[]},solutionInfo:{author:[],desc:null,name:null},time:null},__task:{taskCfg:{dataList:[],solutionID:null,driver:null},taskState:null,taskInfo:{name:null,desc:null,author:[]},time:null,MSState:[]},__user:{},__nodeList:[],__linkList:[],__containerList:[],__currentNode:null,__isValid:!0,init:function(t,e){var n=this;this.__mode=t,this.__type=e,n.__initDomLayout(),CanvasRenderingContext2D.prototype.wrapText=function(t,e,n){var r=t.split("\n");if(void 0==r||null==r)return!1;var i=0,o=r.length,a=0;for(maxText=r[0];i<o;i++){var s=r[i],u=s.length;u>=a&&(a=u,maxText=s)}var c=this.measureText(maxText).width,l=1.35*this.measureText("元").width;n+=l/2/1.35;for(var f=0;f<r.length;f++){var p=r[f];this.fillText(p,-c/2,n-r.length*l/2),n+=l}},this.__stage=new JTopo.Stage($("#canvas")[0]),this.__scene=new JTopo.Scene,this.__stage.add(this.__scene),this.__stage.setCenter(0,0),this.__stage.wheelZoom=.85,this.__scene.mode="normal",this.__bindStageEvent(this.__stage),this.__bindSceneEvent(this.__scene),this.__bindToolbarEvent(),this.__bindMenuEvent(),this.addLinkRoleManuel(),"view"==t?($("#edit-mode-toolbar").remove(),$("#configure-mode-toolbar").remove()):"edit"==t?$("#configure-mode-toolbar").remove():"configure"==t&&$("#edit-mode-toolbar").remove(),"task"==e?$("#task-legend").show():"solution"==e&&$("#solution-legend").show(),this.initLegend(),window.onbeforeunload=function(t){if("view"!=n.__mode&&n.__hasChanged)return"Configuration has changed, close will not save these changes!"}},__initDomLayout:function(){var t=location.href;function e(){if(window.innerWidth<500)for(let t=0;t<$(".toggle-sidebar-btn").length;t++)$($(".toggle-sidebar-btn")[t]).css("margin-left",0);else{var t=$(".sidebar:visible").attr("id");$('.toggle-sidebar-btn[data-target="#'+t+'"]').css("margin-left","350px");for(let t=0;t<$(".sidebar:hidden").length;t++){var e=$($(".sidebar:hidden")[t]).attr("id");$('.toggle-sidebar-btn[data-target="#'+e+'"]').css("margin-left",0)}}}function n(){var t=0,e=window.innerWidth;t=$(".sidebar:visible").length?350:0,e<500&&(t=0),e>500?($("#canvas-div").css("margin-left",t),$("#canvas-div").css("clear","none"),$("section").css("overflow","hidden")):($("#canvas-div").css("margin-left",t),$("#canvas-div").css("clear","left"),$("section").css("overflow","auto")),$("#canvas").attr("width",""+$("#canvas-div").width()),$("#canvas").attr("height",""+$("#canvas-div").height())}e(),n(),$(window).resize(function(){e(),n()}),$(".toggle-sidebar-btn").click(function(t){var r=$(".sidebar");if($(this).find("i").hasClass("fa-chevron-right"))for(let t=0;t<r.length;t++)"#"+$(r[t]).attr("id")!=$(this).attr("data-target")?$(r[t]).attr("class","sidebar myCollapsed"):$($(this).attr("data-target")).attr("class","sidebar");else if($(this).find("i").hasClass("fa-chevron-left"))for(let t=0;t<r.length;t++)"#"+$(r[t]).attr("id")!=$(this).attr("data-target")||$($(this).attr("data-target")).attr("class","sidebar myCollapsed");var i=$(".toggle-sidebar-btn");if($(this).find("i").hasClass("fa-chevron-right"))for(let t=0;t<i.length;t++)i[t]!=this?$(i[t]).find("i").attr("class","fa fa-chevron-right"):$(this).find("i").attr("class","fa fa-chevron-left");else if($(this).find("i").hasClass("fa-chevron-left"))for(let t=0;t<i.length;t++)i[t]!=this||$(this).find("i").attr("class","fa fa-chevron-right");n(),e()}),-1!=t.indexOf("integration/solution/edit")&&($("#div-model-Node").toggleClass("myCollapsed"),$("#div-AggreMS").toggleClass("myCollapsed"),$("#toggle-model-node-sidebar-btn").find("i").toggleClass("fa-chevron-left fa-chevron-right"),$("#toggle-cart-sidebar-btn").find("i").toggleClass("fa-chevron-left fa-chevron-right"),n(),e())},__bindToolbarEvent:function(){var t=this;let e;$("#toolbar button").click(function(){switch(void 0!==$(this).attr("data-toggle")&&"button"==$(this).attr("data-toggle")&&($(this).hasClass("active")?$("#hand-tool").addClass("active"):$("#toolbar button").removeClass("active")),$(this).attr("id")){case"del-all-tool":"solution"==t.__type&&"edit"==t.__mode&&(t.__scene.clear(),t.__toolMode="normal",t.__scene.mode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active"));break;case"back-pos-tool":t.__scene.scaleX=1,t.__scene.scaleY=1,t.__scene.translateX=$("#canvas-div").width()/2,t.__scene.translateY=$("#canvas-div").height()/2,t.__stage.paint(),t.__toolMode="normal",t.__scene.mode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active");break;case"display-toggle-tool":$(this).hasClass("active")?(t.__scene.mode="normal",t.__toolMode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active")):(t.__scene.mode="select",t.__toolMode="normal");break;case"zoomIn-tool":$(this).hasClass("active")?(t.__toolMode="normal",t.__scene.mode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active")):(t.__toolMode="zoomIn",t.__scene.mode="normal");break;case"zoomOut-tool":$(this).hasClass("active")?(t.__toolMode="normal",t.__scene.mode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active")):(t.__toolMode="zoomOut",t.__scene.mode="normal");break;case"hand-tool":$(this).hasClass("active")?(t.__scene.mode="select",t.__toolMode="normal"):(t.__scene.mode="normal",t.__toolMode="normal");break;case"select-tool":$(this).hasClass("active")?(t.__scene.mode="normal",t.__toolMode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active")):(t.__scene.mode="select",t.__toolMode="normal");break;case"edit-tool":$(this).hasClass("active")?(t.__scene.mode="normal",t.__toolMode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active")):(t.__scene.mode="edit",t.__toolMode="normal");break;case"del-tool":$(this).hasClass("active")?(t.__toolMode="normal",t.__scene.mode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active")):(t.__toolMode="delete",t.__scene.mode="normal");break;case"link-tool":$(this).hasClass("active")?(t.__toolMode="normal",t.__scene.mode="normal",$("#toolbar button").removeClass("active"),$("#hand-tool").addClass("active")):(t.__toolMode="link",t.__scene.mode="normal");break;case"run-tool":t.run();break;case"saveas-solution-tool":(e=t.__setUser())&&($("#save-aggre-solution-modal").modal("show"),t.__bindSaveSolutionEvent(1));break;case"save-solution-tool":$("#save-aggre-solution-modal").on("shown.bs.modal",function(t){$("#solutionName").focus()}),(e=t.__setUser())&&($("#save-aggre-solution-modal").modal("show"),t.__bindSaveSolutionEvent(0));break;case"save-task-tool":$("#save-aggre-task-modal").modal("show"),t.__bindSaveTaskEvent(0);break;case"saveas-img-solution-tool":$("#canvas-div").width(),$("#canvas-div").height();t.__stage.saveImageInfo();break;case"configure-tool":var n=null,r=window.location.href.indexOf("_id=");-1==r?__addNotice(__NoticeType.warning,"Please create a solution and save first!"):n=window.location.href.substr(r+4,24);var i="/integration/task/new?solutionID="+n;window.location.href=i}}),$("#hand-tool").click()},__bindMenuEvent:function(){var t=this;"task"==this.__type?$(".solution-menu").remove():"solution"==this.__type&&$(".task-menu").remove(),"view"==this.__mode?($(".edit-mode-menu").remove(),$(".configure-mode-menu").remove()):"edit"==this.__mode?($(".view-mode-menu").remove(),$(".configure-mode-menu").remove()):"configure"==this.__mode&&($(".edit-mode-menu").remove(),$(".view-mode-menu").remove()),$(".contextMenu li").on("click",function(t){T()}),$("#show-data-menu").on("click",function(e){t.__buildEventDetail()}),$("#remove-data-menu").on("click",function(e){t.__currentNode.dispatchEvent("remove data")}),$("#configure-data-menu").on("click",function(t){}),$("#del-ms-menu").on("click",function(e){t.removeServiceRole(t.__currentNode)}),$("#addbreak-ms-menu").on("click",function(n){var r=t.__currentNode;if($("#taskID-input").length&&$("#taskID-input").attr("value")&&void 0!=$("#taskID-input").attr("value"))$.ajax({url:"/integration/task/breakpoint?ac=add",method:"POST",contentType:"application/json;charset=utf-8",dataType:"json",data:JSON.stringify({taskID:t.__task._id,MSID:r.__MSID})}).done(function(n){if(n.error)__addNotice(__NoticeType.warning,"Add break point failed<br><pre>"+JSON.stringify(n.error,null,4)+"</pre>");else if("success"==n.result){var i=t.__task.MSState;for(let t=0;t<i.length;t++)if(i[t].MSID==r.__MSID){i[t].state=y;break}r.fillColor=S(e.pause),r.__pause=!0,__addNotice(__NoticeType.notice,"Add break point successed!")}else __addNotice(__NoticeType.notice,"Can't add a break point to a running model!")}).error(function(t){__addNotice(__NoticeType.warning,"Add break point failed<br><pre>"+JSON.stringify(t,null,4)+"</pre>")});else{var i=t.__task.MSState;for(let t=0;t<i.length;t++)if(i[t].MSID==r.__MSID){i[t].state=y;break}r.fillColor=S(e.pause),r.__pause=!0}}),$("#removebreak-ms-menu").on("click",function(n){var r=t.__currentNode;if($("#taskID-input").length&&$("#taskID-input").attr("value")&&void 0!=$("#taskID-input").attr("value"))$.ajax({url:"/integration/task/breakpoint?ac=remove",method:"POST",contentType:"application/json;charset=utf-8",dataType:"json",data:JSON.stringify({taskID:t.__task._id,MSID:r.__MSID})}).done(function(n){if(n.error)__addNotice(__NoticeType.warning,"Remove break point failed<br><pre>"+JSON.stringify(n.error,null,4)+"</pre>");else if("success"==n.result){var i=t.__task.MSState;for(let t=0;t<i.length;t++)if(i[t].MSID==r.__MSID){i[t].state=_;break}r.fillColor=S(e.unready),r.__pause=!1,__addNotice(__NoticeType.notice,"Remove break point successed!")}}).error(function(t){__addNotice(__NoticeType.warning,"Remove break point failed<br><pre>"+JSON.stringify(t,null,4)+"</pre>")});else{var i=t.__task.MSState;for(let t=0;t<i.length;t++)if(i[t].MSID==r.__MSID){i[t].state=_;break}r.fillColor=S(e.unready),r.__pause=!1}}),$("#toggle-direction-ms-menu").on("click",function(e){var n=t.__solution.solutionCfg.serviceList,r=t.__currentNode,i=s.find(n,t=>t._id===r.__MSID);let o=r.inLinks[0].nodeA,a=r.outLinks[0].nodeZ,u=s.cloneDeep(o);r.__text;"src2udx"===r.__callType?(r.__callType="udx2src",i.callType="udx2src",i.CDL.StateGroup.States[0].Events[0].name="UDX",i.CDL.StateGroup.States[0].Events[1].name="Source"):"udx2src"===r.__callType&&(r.__callType="src2udx",i.callType="src2udx",i.CDL.StateGroup.States[0].Events[0].name="Source",i.CDL.StateGroup.States[0].Events[1].name="UDX"),o.__text=a.__text,o.__eventName=a.__eventName,a.__text=u.__text,a.__eventName=u.__eventName,changeText=(t=>{t.text=D(t.__text,t.width,t.height,N)}),changeText(o),changeText(a),t.__stage.paint()})},__bindStageEvent:function(t){var e=this;t.addEventListener("mouseup",function(t){void 0!==e.__toolMode&&("zoomIn"==e.__toolMode?e.__stage.zoomOut(.85):"zoomOut"==e.__toolMode&&e.__stage.zoomIn(.85))})},__bindSceneEvent:function(e){var n=this;e.addEventListener("mouseup",function(t){(null==t.target||t.target instanceof JTopo.Container||t.target instanceof JTopo.Link)&&T()}),e.addEventListener("mouseup",function(e){var r=e.target;null==e.target&&(t=null),0==e.button?"solution"===n.__type&&"edit"===n.__mode&&r&&"link"==r.elementType&&"CUSTOM"==r.__linkType&&"delete"==n.__toolMode&&(n.__hasChanged=!0,n.removeRelationByJTopoID(n.__scene,r._id),n.__removeJTopoElementByID(n.__scene,r._id)):2==e.button&&(null!=r||t||$("#hand-tool").click())}),e.addEventListener("mousewheel",function(t){"solution"==n.__type&&(n.__hasChanged=!0)}),e.addEventListener("mousedrag",function(t){"solution"==n.__type&&(n.__hasChanged=!0);var e=t.target;if(null!=e&&e instanceof JTopo.Node&&"edit"==n.__scene.mode){var r=null,i=null;"STATES"==e.__nodeType?(r=e.width,i=e.height):i=r=2*e.radius,e.text=D(e.__text,r,i,N),n.__stage.paint()}})},__bindContainerEvent:function(t){},__bindNodeEvent:function(e){var r=this,i=e.__nodeType;e.addEventListener("mouseup",function(t){if(2==t.button){if(T(),"STATES"!=e.__nodeType)"INPUT"!=e.__nodeType&&"CONTROL"!=e.__nodeType||C(e,r.__solution.solutionCfg.relationList)||(e.__isInput&&e.__gdid?($("#remove-data-menu").show(),$("#show-data-menu").show()):($("#show-data-menu").show(),$("#configure-data-menu").show()));else if("STATES"==e.__nodeType){var n=r.__task.MSState,i=null;for(let t=0;t<n.length;t++)if(n[t].MSID==this.__MSID){i=n[t];break}null==i||i.state==_?$("#addbreak-ms-menu").show():null!=i&&i.state!=y||$("#removebreak-ms-menu").show(),"model"==e.__serviceType||("data map"==e.__serviceType?$("#toggle-direction-ms-menu").show():e.__serviceType)}o=e.__nodeType,a=null,"STATES"==o?a="stateContextMenu":"INPUT"==o||"OUTPUT"==o||"CONTROL"==o?a="eventContextMenu":"STAGE"==o&&(a="stageContextMenu"),$("#"+a).css({top:event.clientY,left:event.clientX}).show(),r.__currentNode=e}else 0==t.button&&T();var o,a}),"edit"==r.__mode&&"solution"==r.__type&&e.addEventListener("mouseup",function(t){2==t.button||0==t.button&&"STATES"==e.__nodeType&&"delete"==r.__toolMode&&r.removeServiceRole(t.target)}),"INPUT"==i||"OUTPUT"==i||"CONTROL"==i?e.addEventListener("dbclick",function(n){t=null,r.__currentNode=e,r.__buildEventDetail()}):"STATES"==i&&e.addEventListener("dbclick",function(n){t=null,r.__currentNode=e,r.__buildStatesDetail()}),e.addEventListener("mouseover",function(t){if(this&&this instanceof JTopo.Node){var e=null;"STATES"==this.__nodeType?(e=this.width,this.height):e=2*this.radius-3,this.text=D(this.__text,e,9999,N),r.__stage.paint()}}),e.addEventListener("mouseout",function(t){if(this&&this instanceof JTopo.Node){var e=null,n=null;"STATES"==this.__nodeType?(e=this.width,n=this.height):n=e=2*this.radius-3,this.text=D(this.__text,e,n,N),r.__stage.paint()}}),e.addEventListener("remove data",function(t){var i=r.__task.MSState,o=!1;for(let t=0;t<i.length;t++)if(i[t].MSID==e.__MSID){if(i[t].state==_||i[t].state==y||i[t].state==w){o=!0;break}break}if(o){if(confirm("Are you sure to delete this configured data?")){r.__hasChanged=!0;var a=this.__MSID+"___"+this.__stateID+"___"+this.__eventName;a=a.replace(/\s/g,"-"),$("#"+a+"-download-div").remove();var s=r.__task.taskCfg.dataList;for(let t=0;t<s.length;t++)if(s[t].gdid==this.__gdid){s.splice(t,1);break}this.__gdid=null;var u=S(null!=this.__optional&&1==this.__optional?n.optional:n.origin);this.fillColor=u,r.__stage.paint()}}else __addNotice(__NoticeType.warning,"Can't remove this data!")}),e.addEventListener("mousedrag",function(t){"solution"==r.__type&&(r.__hasChanged=!0)})},__setUser:function(){let t=this,e=localStorage.getItem("jwt"),n=localStorage.getItem("user");return n&&e?(n=JSON.parse(n),(e=JSON.parse(e)).expires>Date.now()?(t.__user=n,!0):($("#signin-a").click(),!1)):($("#signin-a").click(),!1)},__setAuthor:function(){let t=s.get(this,"__solution.solutionInfo.author");$("#solution-author").empty(),s.map(t,t=>{let e;e=t.avatar?`<span class="avatar" title="${t.username}" data-toggle='tooltip'>`+`<img src="data:image/png;base64,${t.avatar}">`+"</span>":t.username?`<span class="avatar" title="${t.username}" data-toggle='tooltip'>`+t.username+"</span>":"",$("#solution-author").append(e)}),t=s.get(this,"__task.taskInfo.author"),$("#task-author").empty(),s.map(t,t=>{let e;e=t.avatar?`<span class="avatar" title="${t.username}" data-toggle='tooltip'>`+`<img src="data:image/png;base64,${t.avatar}">`+"</span>":t.username?`<span class="avatar" title="${t.username}" data-toggle='tooltip'>`+t.username+"</span>":"",$("#task-author").append(e)})},__bindSaveSolutionEvent:function(t){var e=this;$("#save-aggre-form").validate({onfocusout:function(t){$(t).valid()},focusInvalid:!0,submitHandler:function(n){var r=e.exportSolution();r.solutionInfo||(r.solutionInfo={}),r.solutionInfo.name=$("#solutionName").val(),r.solutionInfo.desc=$("#solutionDesc").val();let i={_id:e.__user._id,username:e.__user.username,avatar:e.__user.avatar};r.solutionInfo.author||(r.solutionInfo.author=[]),s.find(r.solutionInfo.author,t=>t._id===e.__user._id)||r.solutionInfo.author.push(i),$("#loading-div").show(),$("#submit-form-btn").attr("disabled",!0),$.ajax({url:"/integration/solution?isSaveAs="+t,data:JSON.stringify(r),contentType:"application/json;charset=utf-8",type:"POST",dataType:"json"}).done(function(t){t.error?($("#loading-div").hide(),$("#submit-form-btn").attr("disabled",!1),$.gritter.add({title:"Warning：",text:"Save solution failed!<br><pre>"+JSON.stringify(t.error,null,4)+"</pre>",sticky:!1,time:2e3})):(e.__setAuthor(),e.__hasChanged=!1,$("#loading-div").hide(),$("#submit-form-btn").attr("disabled",!1),$("#save-aggre-solution-modal").modal("hide"),$("#solutionID-input").attr("value",t._id),$("#solution-name").append(r.solutionInfo.name),$("#solution-info").css("display","block"),$.gritter.add({title:"Notice:",text:"Save solution success!",sticky:!1,time:2e3}),window.location="/integration/solution/edit?_id="+t._id)}).fail(function(t){$("#loading-div").hide(),$("#submit-form-btn").attr("disabled",!1),$.gritter.add({title:"Warning:",text:"Save solution failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>",sticky:!1,time:2e3})})}})},__bindSaveTaskEvent:function(t,e){var n=this;$("#save-aggre-form").validate({onfocusout:function(t){$(t).valid()},focusInvalid:!0,submitHandler:function(r){var i=n.exportTask();i.taskInfo||(i.taskInfo={}),i.taskInfo.name=$("#taskName").val(),i.taskInfo.desc=$("#taskDesc").val();let o={_id:n.__user._id,username:n.__user.username,avatar:n.__user.avatar};i.taskInfo.author||(i.taskInfo.author=[]),s.find(i.taskInfo.author,t=>t._id===n.__user._id)||i.taskInfo.author.push(o),$("#loading-div").show(),$("#submit-form-btn").attr("disabled",!0),$.ajax({url:"/integration/task?isSaveAs="+t,data:JSON.stringify(i),contentType:"application/json;charset=utf-8",type:"POST",dataType:"json"}).done(function(r){if(r.error)$("#loading-div").hide(),$("#submit-form-btn").attr("disabled",!1),$.gritter.add({title:"Warning：",text:"Save task failed!<br><pre>"+JSON.stringify(r.error,null,4)+"</pre>",sticky:!1,time:2e3});else{if(n.__setAuthor(),n.__hasChanged=!1,$("#loading-div").hide(),$("#submit-form-btn").attr("disabled",!1),$("#save-aggre-task-modal").modal("hide"),$("#taskID-input").attr("value",r._id),$("#task-name").empty(),$("#task-name").append(i.taskInfo.name),$("#task-info").css("display","block"),$.gritter.add({title:"Notice:",text:"Save task success!",sticky:!1,time:2e3}),e)return n.run();"/integration/task/new"==window.location.pathname&&(window.location.href="/integration/task/edit?_id="+r._id),t&&(window.location.search="?_id="+r._id)}}).fail(function(t){$("#loading-div").hide(),$("#submit-form-btn").attr("disabled",!1),$.gritter.add({title:"Warning:",text:"Save task failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>",sticky:!1,time:2e3})})}})},__addJTopoNode:function(t,e,r,i,o,a){var s=null,c=1==o?1:2-o;"STATES"==i?((s=new JTopo.Node(r)).borderRadius=5,s.borderWidth=0,s.borderColor="0,0,0",s.fillColor=S(u.states),s.setSize(115,70),s.layout={type:"tree",direction:"right",width:33*c*2,height:33*c*4}):((s=new JTopo.CircleNode(r)).radius=33,s.borderWidth=0,s.borderColor="0,0,0",s.fillColor=S(a&&1==a?n.optional:u.event)),t&&e&&s.setCenterLocation(t,e),s.alpha=1,s.textPosition="Middle_Center",s.font=N,s.fontColor="30,30,30",s.showSelected=!0,s.dragable=!0,s.editAble=!1,s.scaleX=o,s.scaleY=o,s._id=A();var l=null,f=null;return"STATES"==i?(l=s.width,f=s.height):f=l=2*s.radius-3,s.__text=r,s.text=D(r,l,f,N),s.paintText=function(t){var e=this.text;if(null!=e&&""!=e){t.beginPath(),t.font=this.font;var n=t.measureText(e).width,r=t.measureText("田").width;t.fillStyle="rgba("+this.fontColor+", "+this.alpha+")";var i=this.getTextPostion(this.textPosition,n,r);t.wrapText(e,i.x,i.y),t.closePath()}},this.__scene.add(s),s},__addJTopoLink:function(t,e){var n=new JTopo.Link(t,e);return n.arrowsRadius=7,n.lineWidth=2,n.bundleOffset=60,n.bundleGap=15,n.strokeColor="96, 168, 255",n._id=t._id+"__"+e._id,this.__scene.add(n),n},__addJTopoContainer:function(){var t=new JTopo.Container;return t._id=A(),t.alpha=0,this.__scene.add(t),t},addLinkRoleManuel:function(){var e=this,n=this.__scene,r=new JTopo.Node("tempA");r.setSize(1,1);var i=new JTopo.Node("tempZ");i.setSize(1,1);var o=new JTopo.Link(r,i);o.lineWidth=2,n.mouseup(function(a){if("link"==e.__toolMode){if(2==a.button)return t=null,void n.remove(o);if(null!=a.target&&a.target instanceof JTopo.Node)if(null==t){if("STATES"==a.target.__nodeType)return t=null,void n.remove(o);t=a.target,n.add(o),r.setLocation(a.x,a.y),i.setLocation(a.x,a.y)}else if(t!==a.target){var s=a.target;if(!e.validateLink(t,s))return t=null,void n.remove(o);var c=e.__addRelation(t,s),l=new JTopo.Link(t,s);l.arrowsRadius=7,l.lineWidth=2,l.bundleOffset=60,l.bundleGap=15,l.strokeColor=S(u.manualLink),l._id=t._id+"__"+s._id,l.__linkType="CUSTOM",l.__relationID=c._id,n.add(l),t=null,n.remove(o),e.__hasChanged=!0}else t=null;else t=null,n.remove(o)}}),n.mousedown(function(r){"link"==e.__toolMode&&(null!=r.target&&r.target!==t&&r.target!==o||n.remove(o))}),n.mousemove(function(t){"link"==e.__toolMode&&i.setLocation(t.x,t.y)})},__addRelation:function(t,e){var n={_id:t.__MSID+"__"+e.__MSID,from:{MSID:t.__MSID,stateID:t.__stateID,eventName:t.__eventName},to:{MSID:e.__MSID,stateID:e.__stateID,eventName:e.__eventName}};return this.__solution.solutionCfg.relationList.push(n),n},__addJTopoElementByJSON:function(t){var e=null,n=this.__nodeList;if("link"==t.elementType){var r=E(n,t.nodeAID),i=E(n,t.nodeZID);for(var o in e=new JTopo.Link(r,i),t)"strokeColor"!=o?e[o]=t[o]:"CUSTOM"==t.__linkType?e.strokeColor=S(u.manualLink):e.strokeColor=S(u.link);this.__linkList.push(e)}else if("container"==t.elementType){e=new JTopo.Container;for(let n in t)e[n]=t[n];if(t.childsID&&void 0!=t.childsID)for(var a=0;a<t.childsID.length;a++){var s=E(n,t.childsID[a]);s&&void 0!=s&&e.add(s)}this.__bindContainerEvent(e),this.__containerList.push(e)}else if("node"==t.elementType){e="STATES"==t.__nodeType?new JTopo.Node:new JTopo.CircleNode;for(let n in t)e[n]=t[n];var c=null,l=null;"STATES"==t.__nodeType?(c=e.width,l=e.height):l=c=2*e.radius-3,t.__text?e.__text=t.__text:e.__text=t.text,e.text=D(e.__text,c,l,N),e.paintText=function(t){var e=this.text;if(null!=e&&""!=e){t.beginPath(),t.font=this.font;var n=t.measureText(e).width,r=t.measureText("田").width;t.fillStyle="rgba("+this.fontColor+", "+this.alpha+")";var i=this.getTextPostion(this.textPosition,n,r);t.wrapText(e,i.x,i.y),t.closePath()}},this.__bindNodeEvent(e),this.__nodeList.push(e)}else if("scene"==t.elementType){for(let e in t)this.__scene[e]=t[e];return}this.__scene.add(e)},__buildEventDetail:function(){var t=this.__currentNode,e=this,r=(t.__nodeType,t.__MSID+"___"+t.__stateID+"___"+t.__eventName);r=r.replace(/\s/g,"-");var i=function(){if(t.__gdid){var n,i,o=e.__getNodeStub(t);o&&o.from&&("LOCAL"===o.from.posType?(n=`/integration/data/${o.from.id}`,i=`/visualizations?data-service=/integration/data/${o.from.id}`):"MSC"===o.from.posType?(n=`http://${o.from.host}:${o.from.port}/geodata/${o.from.id}`,i=`/visualizations?data-service=http://${o.from.host}:${o.from.port}/geodata/${o.from.id}`):"DSC"===o.from.posType&&(n=`http://${o.from.host}:${o.from.port}/user/download?dataId=${o.from.id}`,i=`/visualizations?data-service=http://${o.from.host}:${o.from.port}/user/download?dataId=${o.from.id}`)),$("#"+r+"-download-data").length?$("#"+r+"-visualization-data").length:($("#"+r+"-download-div").remove(),$(`<div id="${r}-download-div">\n                                <p style="margin-top: 10px"><b>Download data: </b>&nbsp;&nbsp;\n                                    <button id="${r}-download-data" class="btn btn-default btn-xs down-event-btn">Download</button>\n                                </p>\n                                <p style="margin-top: 10px"><b>Data visualization: </b>&nbsp;&nbsp;\n                                    <button id="${r}-visualization-data" class="btn btn-default btn-xs down-event-btn">Visualization</button>\n                                </p>\n                            </div>`).appendTo($("#"+r)),$("#"+r+"-visualization-data").on("click",function(){null==e.__task._id||void 0==e.__task._id?$("#save-aggre-task-modal").modal("show"):window.open(i)}),$("#"+r+"-download-data").on("click",function(){null==e.__task._id||void 0==e.__task._id?$("#save-aggre-task-modal").modal("show"):n?window.open(n):alert("could not found the data!")}))}};if($("#"+r).length)$("#"+r).parent().show(),$("#"+r).parent().css("z-index",k()+1);else{var o=function(t,e,n,r,i){for(var o=null,a=0;a<i.length;a++)if(i[a]._id==r){o=i[a];break}if(!o)return null;if("model"==t){let t=o.MDL,r=(t.ModelClass.Behavior.RelatedDatasets.DatasetItem,t.ModelClass.Behavior.StateGroup.States.State),i=null,a=null;if(r instanceof Array)for(let t=0;t<r.length;t++)r[t]._$.id==e&&(i=r[t]);else r._$.id==e&&(i=r);var s=i.Event;if(s instanceof Array){for(var u=0;u<s.length;u++)if(s[u]._$.name==n){a=s[u];break}}else s._$.name==n&&(a=s);var c=null;return"response"==a._$.type?void 0!==a.ResponseParameter?c=a.ResponseParameter._$.datasetReference:void 0!==a.ControlParameter&&(c=a.ControlParameter._$.datasetReference):"noresponse"==a._$.type&&(c=a.DispatchParameter._$.datasetReference),{schema:I(o.MDLStr,c),event:a}}if("data map"==t||"data refactor"==t){let t=null,r=null,i=null,a=o.CDL.StateGroup.States,s=o.CDL.SchemaGroup;for(let t=0;t<a.length;t++)if(a[t].id==e){for(let e=0;e<a[t].Events.length;e++)if(a[t].Events[e].name==n){r=a[t].Events[e],i=a[t].Events[e].datasetReference;break}break}if(null!=i)for(let e=0;e<s.length;e++)if(s[e].name==i){t=s[e].schema;break}return{schema:t,event:r}}}(t.__serviceType,t.__stateID,t.__eventName,t.__MSID,e.__solution.solutionCfg.serviceList),a=null;if(null==o)a=$('<div id="'+r+'" class="data-info-dialog" title="Data Information">Unknown data schema</div>');else{var u=null,l=null,f=null,p=null,h=null;"model"==t.__serviceType?(u=o.event._$.name,l="response"==o.event._$.type?"Input":"Output",f=o.event._$.description,p=__isTrue(o.event._$.optional),h='<p><b>UDX Schema: </b></p><pre style="width:100%;max-height:300px">'+o.schema+"</pre>"):"data refactor"==t.__serviceType?(u=o.event.name,l=o.event.type,f=o.event.description,p=__isTrue(o.event.optional),h=""):"data map"==t.__serviceType&&(u=o.event.name,l=o.event.type,f=o.event.description,p=__isTrue(o.event.optional),h=""),a=$('<div id="'+r+'" class="data-info-dialog" title="Data Information"><p><b>Name: </b><span>'+u+"</span></p><p><b>Type: </b><span>"+l+"</span></p><p><b>Description: </b><span>"+f+"</span></p><p><b>Optional: </b><span>"+p+"</span></p>"+h+"</div>")}if(a.appendTo($("#aggreDIV")),a.dialog({width:350,modal:!1,create:function(){$(this).css("maxHeight",500)}}),$("#"+r).parent().addClass("dataInfo-ui-dialog"),"configure"==this.__mode){var d=e.__task.MSState,g=null;for(let e=0;e<d.length;e++)if(d[e].MSID==t.__MSID){g=d[e];break}if(!(null!=g&&g.state!=_&&g.state!=y||"INPUT"!=t.__nodeType&&"CONTROL"!=t.__nodeType||C(t,e.__solution.solutionCfg.relationList))){$(`\n                                <div style='margin-bottom: 10px;'>\n                                    <p><b>Upload data: </b></p>\n                                    <input id="${r}-upload-data" name="myfile" type="file" class="file">\n                                </div>\n                            `).appendTo(a),$(`\n                                <div style='margin-bottom: 10px;'>\n                                    <p><b>Select data: </b></p>\n                                    <span class='select-data-input-group'>\n                                        <div tabindex='2' id='${r}-upload-data-input' type='text'></div>\n                                        \n                                        <span>\n                                            <span tabindex="500" id='${r}-delete' title="Clear selected files" style='display: none;margin-right: -5px; border-radius: 0; border-left: none;' class="btn btn-default fileinput-remove fileinput-remove-button">\n                                                <i class="glyphicon glyphicon-trash"></i>\n                                            </span>\n                                            <button class='btn btn-primary' id="${r}-select-data">\n                                                <i class="glyphicon glyphicon-folder-open"></i>\n                                            </button>\n                                        </span>\n                                    </div>\n                                </div>\n                            `).appendTo(a);const o=localStorage.getItem("DSC"),u=(JSON.parse(o),"106.14.78.235"),l="8899";$(`#${r}-delete`).on("click",()=>{$(`#${r}-delete`).hide(),$(`#${r}-upload-data-input`).empty(),$(`#${r}-download-div`).remove(),t.__gdid=null,t.__isInput=!1,t.fillColor=S(n.origin);var i=e.__task.taskCfg.dataList;s.remove(i,e=>e.MSID===t.__MSID&&e.eventName===t.__eventName&&e.stateID===t.__stateID)}),$(`#${r}-select-data`).on("click",()=>{window.currentDataId=r;let o=`http://${u}:${l}/user/filemanager?parent-origin=${window.origin}`;window.open(o,"self-filemanager-dlg","height=500,width=900,top=100,left=100");window.addEventListener("message",o=>{if(console.log(o.origin),o.origin===`http://${u}:${l}`){let d=JSON.parse(o.data);if("filemanager"===d.code){$(`#${r}-upload-data-input`).append(d.msg.filename),$(`#${r}-delete`).show(),e.__hasChanged=!0;for(var a=e.__getServiceByID(t.__MSID),s={from:{host:u,port:l,posType:"DSC",id:d.msg.oid},to:{host:a.host,port:a.port,serviceType:a.serviceType},state:c,isInput:!0,isMid:!1,fname:d.msg.filename,MSID:t.__MSID,stateID:t.__stateID,eventName:t.__eventName},f=!1,p=e.__task.taskCfg.dataList,h=0;h<p.length;h++)if(p[h].MSID==t.__MSID&&p[h].stateID==t.__stateID&&p[h].eventName==t.__eventName){p[h].id=d.msg.oid,f=!0;break}return f||p.push(s),t.__isInput=!0,t.__gdid=d.msg.oid,t.fillColor=S(n.input),i(),void $.gritter.add({title:"Notice:",text:"Select data success!",sticky:!1,time:2e3})}}})}),$("#"+r+"-upload-data").fileinput({uploadUrl:"/integration/data",allowedFileExtensions:[],aploadAsync:!0,showPreview:!1,showUpload:!0,showRemove:!0,showClose:!1,showUploadedThumbs:!1,autoReplace:!0,maxFileCount:1,uploadLabel:"",removeLabel:"",cancelLabel:"",browseLabel:""}).on("fileselect",function(e,n,i){$("#"+r+" .fileinput-remove-button").on("click",function(e){t.__gdid=null,$("#"+r+"-download-div").remove()})}).on("fileuploaded",function(r,o,a,s){if("suc"==o.response.res){e.__hasChanged=!0;for(var u=o.response.gd_id,l=o.response.fname,f=e.__getServiceByID(t.__MSID),p={from:{host:"localhost",port:"",posType:"LOCAL",id:u},to:{host:f.host,port:f.port,serviceType:f.serviceType},state:c,isInput:!0,isMid:!1,fname:l,MSID:t.__MSID,stateID:t.__stateID,eventName:t.__eventName},h=!1,d=e.__task.taskCfg.dataList,g=0;g<d.length;g++)if(d[g].MSID==t.__MSID&&d[g].stateID==t.__stateID&&d[g].eventName==t.__eventName){d[g].id=u,h=!0;break}h||d.push(p),t.__isInput=!0,t.__gdid=u,t.fillColor=S(n.input),i(),$.gritter.add({title:"Notice:",text:"Upload data success!",sticky:!1,time:2e3})}else $.gritter.add({title:"Warning:",text:"Upload data failed!",sticky:!1,time:2e3})}).on("fileerror",function(t,e){$.gritter.add({title:"Warning:",text:"<pre>"+JSON.stringify(error,null,4)+"</pre>",sticky:!1,time:2e3})})}}$(".ui-dialog-titlebar-close").click(function(t){$(this).parent().parent().hide()})}i()},__buildStatesDetail:function(){var t=this.__currentNode,e=(t.__nodeType,t.__MSID+"-states-dialog");if($("#"+e).length)$("#"+e).parent().show(),$("#"+e).parent().css("z-index",k()+1);else{var n=function(t,e,n){for(var r=null,i=0;i<n.length;i++)if(n[i]._id==e){r=n[i];break}if(!r)return null;if("model"==t){var o=[],a=r.MDL,s=a.ModelClass.Behavior.StateGroup.States.State,u=a.ModelClass.AttributeSet;if(s)if(s instanceof Array)for(let t=0;t<s.length;t++)o.push(s[t]._$);else o.push(s._$);var c=u.Categories.Category,l={principle:c._$.principle,path:c._$.path},f=u.LocalAttributes.LocalAttribute,p=null;return f&&(p=f instanceof Array?f:[f]),a.ModelClass.Runtime,{attributeSet:{categories:l,localAttributes:p},host:r.host,port:r.port,states:o}}return"data map"==t||"data refactor"==t?{DS:r.DS,host:r.host,port:r.port}:void 0}(t.__serviceType,t.__MSID,this.__solution.solutionCfg.serviceList),r=null;if(null==n)r=$('<div id="'+e+'" class="service-info-dialog" title="Service Information">Parse model service language failed!</div>');else if("model"==t.__serviceType){var i=n.attributeSet.categories,o=n.attributeSet.localAttributes,a=n.states;(r=$('<div id="'+e+'" class="service-info-dialog" title="Service Information"><div id="'+e+'-Categories"><h4>Categories:</h4><p><b>Principle: </b><span>'+i.principle+"</span></p><p><b>Path: </b><span>"+i.path+'</span></p></div><hr style="opacity: 0.3"><div id="'+e+'-LocalAttributes"><h4>LocalAttributes:</h4><ul id="'+e+'-tab" class="nav nav-tabs"></ul><div id="'+e+'-tab-content" class="tab-content"></div></div><hr style="opacity: 0.3"><div id="'+e+'-States"><h4>State list:</h4><div id="'+e+'-states-div"></div><div><hr style="opacity: 0.3"><h4>Position:</h4><p><b>Host:</b><span> '+n.host+"</span></p><p><b>Port:</b><span> "+n.port+"</span></p></div></div></div>")).appendTo($("#aggreDIV"));for(let t=0;t<o.length;t++)if(o[t].Keywords&&o[t].Abstract){var s=""==o[t]._$.localName?"Undefined":o[t]._$.localName;$("#"+e+"-tab").append($('<li><a href="'+o[t]._$.local+'" data-toggle="tab">'+s+"</span></li>")),$("#"+e+"-tab-content").append($('<div class="tab-pane fade" id="'+o[t]._$.local+'"></div>')),o[t].Keywords&&$("#"+o[t]._$.local).append('<p style="padding-top: 10px"><b>Keywords: </b><span>'+o[t].Keywords+"</span></p>"),o[t].Abstract&&$("#"+o[t]._$.local).append("<p><b>Abstract: </b><span>"+o[t].Abstract+"</span></p>")}var u=$("#"+e+"-tab li a");for(let t=0;t<u.length;t++)u[t].blur();0==$("#"+e+"-tab").children().length&&$("#-LocalAttributes").empty(),$($("#"+e+"-tab").children()[0]).addClass("active"),$($("#"+e+"-tab-content").children()[0]).addClass("in active");for(let t=0;t<a.length;t++)$("#"+e+"-states-div").append($("<p><b>State name: </b>"+a[t].name+"</p><p><b>State type: </b>"+a[t].type+"</p><p><b>State description: </b>"+a[t].description+"</p>"))}else"data refactor"!=t.__serviceType&&"data map"!=t.__serviceType||(r=$('<div id="'+e+'" class="service-info-dialog" title="Service Information"><p><b>Name: </b><span>'+n.DS.name+"</span></p><p><b>Author: </b><span>"+n.DS.author+"</span></p><p><b>Time: </b><span>"+n.DS.datetime+"</span></p><p><b>Description: </b><span>"+n.DS.description+"</span></p><p><b>Detail: </b><span>"+n.DS.details+"</span></p><p><b>Direction: </b><span>"+t.__callType+"</span></p><p><b>Host:</b> <span> "+n.host+"</span></p><p><b>Port:</b><span> "+n.port+"</span></p></div>"));r.dialog({width:350,modal:!1,create:function(){$(this).css("maxHeight",500)}}),$("#"+e).parent().find(".ui-dialog-title").css("font-size","18px"),$("#"+e).parent().addClass("dataInfo-ui-dialog"),$(".ui-dialog-titlebar-close").click(function(t){$(this).parent().parent().hide()})}},__removeJTopoElementByID:function(t,e){if(0==t.childs.length)return-1;for(var n=0;n<t.childs.length;n++)if(t.childs[n]._id==e)return t.remove(t.childs[n]),1;return 0},__removeJTopoContainer:function(t,e){for(var n=0;n<e.childs.length;n++)"node"==e.childs[n].elementType&&t.remove(e.childs[n]);t.remove(e)},removeRelationByJTopoID:function(t,e){for(var n=0;n<t.childs.length;n++)if(t.childs[n]._id==e){for(var r=t.childs[n],i=r.nodeA.__MSID+"__"+r.nodeZ.__MSID,o=this.__solution.solutionCfg.relationList,a=0;a<o.length;a++)if(o[a]._id==i)return void o.splice(a,1);break}},removeRelationByMSID:function(t){for(var e=this.__solution.solutionCfg.relationList,n=0;n<e.length;n++){var r=e[n];r.from.MSID!=t&&r.to.MSID!=t||e.splice(n,1)}},__getJTopoElementByID:function(t,e){var n=t.childs;if(0==n.length)return null;for(var r=0;r<n.length;r++)if(n[r]._id==e&&"container"!=n[r].elementType)return n[r];return null},__getServiceByID:function(t){for(var e=this.__solution.solutionCfg.serviceList,n=0;n<e.length;n++)if(e[n]._id==t)return e[n];return null},__addModelService:function(t){t.id&&delete t.id;var e=function(t){var e=[],n=t.ModelClass.Behavior.StateGroup.States.State;n instanceof Array||(n=[n]);for(let t=0;t<n.length;t++){var r=n[t],i=r._$.id,o=r.Event;o instanceof Array||(o=[o]);for(let t=0;t<o.length;t++)o[t].stateID=i;e=e.concat(o)}return e}(t.MDL),n=e.length,i=n<=4?1:Math.pow(.99,n),o=1===i?1:2-i,a=$("#canvas-div").width()/2,s=$("#canvas-div").height()/2,u=this.__addJTopoContainer(),c=(window.event.layerX-a)/this.__scene.scaleX-this.__scene.translateX+a,l=(window.event.layerY-s)/this.__scene.scaleY-this.__scene.translateY+s,f=this.__addJTopoNode(c,l,t.MS.ms_model.m_name,"STATES",i),p=JSON.parse(JSON.stringify(t));p._id=r().str,this.__solution.solutionCfg.serviceList.push(p),f.__MSID=p._id,f.__nodeType="STATES",f.__containerID=u._id,f.__serviceType="model",this.__task.MSState.push({state:_,MSID:p._id,host:p.host,port:p.port,serviceType:p.serviceType}),this.__bindNodeEvent(f),u.add(f);for(var h=0,d=0,g=0;g<n;g++)void 0!==e[g].ResponseParameter?h++:void 0!==e[g].DispatchParameter?0:void 0!==e[g].ControlParameter&&d++;for(var v=148.5*o*this.__scene.scaleX,m=82.5*o*this.__scene.scaleY,y=0,b=0;b<n;b++){var w=null,N=null,S=null,T=null;void 0!==e[b].DispatchParameter?T="OUTPUT":(N=(window.event.layerX-v-a)/this.__scene.scaleX-this.__scene.translateX+a,S=(window.event.layerY-((h+d-1)/2-y)*m-s)/this.__scene.scaleY-this.__scene.translateY+s,void 0!==e[b].ResponseParameter?T="INPUT":void 0!==e[b].ControlParameter&&(T="CONTROL"),y++);var E=e[b]._$.optional;E=__isTrue(E),(w=this.__addJTopoNode(N,S,e[b]._$.name,T,i,E)).__nodeType=T,w.__MSID=p._id,w.__stateID=e[b].stateID,w.__eventName=e[b]._$.name,w.__optional=E,w.__serviceType="model",this.__bindNodeEvent(w),u.add(w),void 0!==e[b].DispatchParameter?this.__addJTopoLink(f,w).__linkType="OUT":this.__addJTopoLink(w,f).__linkType="IN"}JTopo.layout.layoutNode(this.__scene,f,!0)},__convert2SADLService:function(t){var e=null;return"model"==t.serviceType?e=t:"data map"==t.serviceType?e={_id:r().str,host:t.host,port:t.port,serviceType:t.serviceType,DS:{_id:t._id,name:t.name,description:t.description,uname:t.uname,uemail:t.uemail,author:t.author,datetime:t.datetime,available:t.available,details:t.details,uid:t.uid,associate:t.associate,delete:t.delete,deletetime:t.deletetime},CDL:{SchemaGroup:[],StateGroup:{StateTransitions:{},States:[{id:"data map state",name:"Default",type:"basic",description:"",Events:[{type:"in",name:"Source",description:"input data",optional:0,datasetReference:""},{type:"out",name:"UDX",description:"output data",optional:0,datasetReference:""}]}]}}}:"data refactor"==t.serviceType&&(e={_id:r().str,host:t.host,port:t.port,serviceType:t.serviceType,DS:{_id:t.refactorId,method:t.name,name:t.method.$.name,class:t.method.$.class,description:t.method.$.description},CDL:{SchemaGroup:[],StateGroup:{StateTransitions:{},States:[{id:"data refactor state",name:"Default",type:"basic",description:"",Events:s.map(t.method.Params,t=>({type:t.$.type,description:t.$.description,name:t.$.name,optional:0,datasetReference:t.$.schema}))}]}}}),e},__addDataMapService:function(t){t.callType="src2udx",this.__solution.solutionCfg.serviceList.push(t),this.__task.MSState.push({state:_,MSID:t._id,host:t.host,port:t.port,serviceType:t.serviceType});var e=$("#canvas-div").width()/2,n=$("#canvas-div").height()/2,r=this.__addJTopoContainer(),i=(window.event.layerX-e)/this.__scene.scaleX-this.__scene.translateX+e,o=(window.event.layerY-n)/this.__scene.scaleY-this.__scene.translateY+n,a=t.DS.name,s=this.__addJTopoNode(i,o,a,"STATES",1);s.__MSID=t._id,s.__nodeType="STATES",s.__containerID=r._id,s.__serviceType=t.serviceType,s.__callType="src2udx",this.__bindNodeEvent(s),r.add(s);for(var u=148.5*this.__scene.scaleX,c=82.5*this.__scene.scaleY,l=t.CDL.StateGroup.States[0],f=l.Events,p=0;p<f.length;p++){var h=null,d=null,g=null,v=null;"out"==f[p].type?v="OUTPUT":(d=(window.event.layerX-u-e)/this.__scene.scaleX-this.__scene.translateX+e,g=(window.event.layerY-0*c-n)/this.__scene.scaleY-this.__scene.translateY+n,v="INPUT");var m=f[p].optional;m="0"!=m&&0!=m&&0!=m,(h=this.__addJTopoNode(d,g,f[p].name,v,1,m)).__nodeType=v,h.__MSID=t._id,h.__stateID=l.id,h.__eventName=f[p].name,h.__optional=m,h.__serviceType=t.serviceType,this.__bindNodeEvent(h),r.add(h),"out"==f[p].type?this.__addJTopoLink(s,h).__linkType="OUT":this.__addJTopoLink(h,s).__linkType="IN"}JTopo.layout.layoutNode(this.__scene,s,!0)},__addDataRefactorService:function(t){this.__solution.solutionCfg.serviceList.push(t),this.__task.MSState.push({state:_,MSID:t._id,host:t.host,port:t.port,serviceType:t.serviceType});var e=$("#canvas-div").width()/2,n=$("#canvas-div").height()/2,r=this.__addJTopoContainer(),i=(window.event.layerX-e)/this.__scene.scaleX-this.__scene.translateX+e,o=(window.event.layerY-n)/this.__scene.scaleY-this.__scene.translateY+n,a=t.DS.name,s=this.__addJTopoNode(i,o,a,"STATES",1);s.__MSID=t._id,s.__nodeType="STATES",s.__containerID=r._id,s.__serviceType=t.serviceType,this.__bindNodeEvent(s),r.add(s);for(var u=148.5*this.__scene.scaleX,c=82.5*this.__scene.scaleY,l=t.CDL.StateGroup.States[0],f=l.Events,p=0;p<f.length;p++){var h=null,d=null,g=null,v=null;"out"==f[p].type?v="OUTPUT":(d=(window.event.layerX-u-e)/this.__scene.scaleX-this.__scene.translateX+e,g=(window.event.layerY-0*c-n)/this.__scene.scaleY-this.__scene.translateY+n,v="INPUT");var m=f[p].optional;m="0"!=m&&0!=m&&0!=m,(h=this.__addJTopoNode(d,g,f[p].name,v,1,m)).__nodeType=v,h.__MSID=t._id,h.__stateID=l.id,h.__eventName=f[p].name,h.__optional=m,h.__serviceType=t.serviceType,this.__bindNodeEvent(h),r.add(h),"out"==f[p].type?this.__addJTopoLink(s,h).__linkType="OUT":this.__addJTopoLink(h,s).__linkType="IN"}JTopo.layout.layoutNode(this.__scene,s,!0)},addServiceRole:function(t){this.__hasChanged=!0,"model"==(t=this.__convert2SADLService(t)).serviceType?this.__addModelService(t):"data map"==t.serviceType?this.__addDataMapService(t):"data refactor"==t.serviceType&&this.__addDataRefactorService(t)},removeServiceRole:function(t){this.__hasChanged=!0;for(var e=this.__scene.childs,n=this.__solution.solutionCfg.serviceList,r=0;r<n.length;r++)if(n[r]._id==t.__MSID){n.splice(r,1);break}for(var i=0;i<e.length;i++)if("container"==e[i].elementType&&e[i]._id==t.__containerID){this.__removeJTopoContainer(this.__scene,e[i]);break}this.removeRelationByMSID(t.__MSID),this.__stage.paint()},__getLayoutCfg:function(){this.__scene.mode="normal";for(var t={linkList:[],containerList:[],nodeList:[],scene:x(this.__scene)},e=0;e<this.__scene.childs.length;e++){var n=this.__scene.childs[e],r=x(n);"container"==n.elementType?t.containerList.push(r):"link"==n.elementType?t.linkList.push(r):"node"==n.elementType&&t.nodeList.push(r)}return t},__getSolutionCfg:function(){return{serviceList:this.__solution.solutionCfg.serviceList,relationList:this.__solution.solutionCfg.relationList}},__getNodeStub:function(t){return this.__task,s.find(this.__task.taskCfg.dataList,e=>e.MSID===t.__MSID&&e.stateID===t.__stateID&&e.eventName===t.__eventName)},__importRoleByJSON:function(t){for(var e=0;e<t.length;e++)this.__addJTopoElementByJSON(t[e])},__importDataList:function(){var t=this.__task.taskCfg.dataList,e=this.__scene.childs;for(let i=0;i<e.length;i++){let o=e[i];if("node"==o.elementType)for(let e=0;e<t.length;e++){var r=t[e];o.__MSID==r.MSID&&o.__stateID==r.stateID&&o.__eventName==r.eventName&&(r.state&&(r.isInput?(o.__isInput=r.isInput,o.fillColor=S(n.input)):o.fillColor=S(n[r.state.toLowerCase()])),o.__gdid=r.id)}}this.__stage.paint()},__importStatesState:function(){var t=this.__task.MSState,n=this.__scene.childs;for(let i=0;i<n.length;i++){let o=n[i];if("node"==o.elementType&&"STATES"==o.__nodeType)for(let n=0;n<t.length;n++){var r=t[n];o.__MSID==r.MSID&&r.state&&(o.fillColor=S(e[r.state.toLowerCase()]),o.__state=r.state)}}this.__stage.paint()},exportSolution:function(){let t;return $("#solutionID-input").length&&$("#solutionID-input").attr("value")&&void 0!=$("#solutionID-input").attr("value")&&(t=$("#solutionID-input").attr("value")),{_id:t,layoutCfg:this.__getLayoutCfg(),solutionCfg:this.__getSolutionCfg(),solutionInfo:this.__solution.solutionInfo}},importSolution:function(){var t=this.__solution,e=t.layoutCfg.scene;this.__addJTopoElementByJSON(e);var n=t.layoutCfg.containerList,r=t.layoutCfg.nodeList,i=t.layoutCfg.linkList;if(this.__importRoleByJSON(r),this.__importRoleByJSON(n),this.__importRoleByJSON(i),this.__stage.paint(),-1!=location.href.indexOf("integration/task/new")){var o=this.__task.MSState,a=this.__solution.solutionCfg.serviceList;for(let t=0;t<a.length;t++)o.push({MSID:a[t]._id,state:"UNREADY",host:a[t].host,port:a[t].port,serviceType:a[t].serviceType})}},importTask:function(){this.importSolution(),this.__importDataList(),this.__importStatesState()},initLegend:function(){if("solution"==this.__type){let t=$("#solution-table tr");for(let e=0;e<t.length;e++){let n=$(t[e]).find("td:nth-child(1) div"),r=n.attr("class");r&&n.css("background",u[r])}}else if("task"==this.__type){let t=$("#event-table tr");for(let e=0;e<t.length;e++){let r=$(t[e]).find("td:nth-child(1) div"),i=r.attr("class");r.css("background",n[i])}let r=$("#states-table tr");for(let t=0;t<r.length;t++){let n=$(r[t]).find("td:nth-child(1) div"),i=n.attr("class");n.css("background",e[i])}}},initImport:function(t,e){if(this.__setUser(),"SOLUTION"==t){this.__solution=e;let t=this.__solution;$("#config-tag").css("display","block"),$("#task-info").length&&$("#task-info").css("display","none"),$("#solution-name").empty(),$("#solution-name").append(t.solutionInfo.name),$("#solutionID-input").attr("value",t._id),$("#solutionName").attr("value",t.solutionInfo.name),$("#solutionDesc").html(t.solutionInfo.desc)}else if("TASK"==t){this.__task=e,this.__solution=e.solutionDetail;let t=this.__task,n=this.__solution;$("#config-tag").css("display","block"),$("#solution-name").empty(),$("#solution-name").append(n.solutionInfo.name),$("#solutionID-input").attr("value",n._id),$("#taskID-info").css("display","block"),$("#task-name").empty(),$("#task-name").append(t.taskInfo.name),$("#taskID-input").attr("value",t._id),$("#taskName").attr("value",t.taskInfo.name),$("#taskDesc").html(t.taskInfo.desc),this.registerSocket()}this.__setAuthor()},exportTask:function(){var t=[],e=this.__task.taskCfg.dataList;for(let n=0;n<e.length;n++)e[n].isInput&&t.push(e[n]);return __task={taskCfg:{dataList:t,solutionID:this.__solution._id,driver:"DataDriver"},taskInfo:this.__task.taskInfo,taskState:"CONFIGURED",MSState:this.__task.MSState},$("#taskID-input").length&&$("#taskID-input").attr("value")&&void 0!=$("#taskID-input").attr("value")&&(__task._id=$("#taskID-input").attr("value")),__task},run:function(){var t=this;$("#taskID-input").length&&$("#taskID-input").attr("value")&&void 0!=$("#taskID-input").attr("value")?(t.__isValid||$.gritter.add({title:"Warning:",text:"Start integration task failed! <br><pre>"+JSON.stringify(res.error,null,4)+"</pre>",sticky:!1,time:2e3}),$.ajax({url:"/integration/task/run",data:JSON.stringify(t.exportTask()),contentType:"application/json;charset=utf-8",type:"POST",dataType:"json"}).done(function(t){t.error?$.gritter.add({title:"Warning:",text:"Start integration task failed! <br><pre>"+JSON.stringify(t.error,null,4)+"</pre>",sticky:!1,time:2e3}):($.gritter.add({title:"Notice:",text:"Start integration task successed, please check the run state at times!",sticky:!1,time:2e3}),"/integration/task/edit"!=window.location.pathname&&window.location.query!="?_id="+t._id&&(window.location.href="/integration/task/edit?_id="+t._id))}).fail(function(t){$.gritter.add({title:"Warning:",text:"Start integration task failed! <br><pre>"+JSON.stringify(t,null,4)+"</pre>",sticky:!1,time:2e3})})):($("#save-aggre-task-modal").modal("show"),t.__bindSaveTaskEvent(0,!0))},validateEvent:function(){},validateLink:function(t,e){return"OUTPUT"==e.__nodeType||"STATES"==e.__nodeType?($.gritter.add({title:"Warning:",text:"To node must be input!",sticky:!1,time:2e3}),!1):"OUTPUT"==t.__nodeType||($.gritter.add({title:"Warning:",text:"From node must be output!",sticky:!1,time:2e3}),!1)},__updateNodeState:function(t){"STATES"==t.__nodeType?t.fillColor=S(e[t.__state.toLowerCase()]):(1==t.__isInput&&t.__state==f?t.fillColor=S(n.input):t.fillColor=S(n[t.__state.toLowerCase()]),t.__state),this.__stage.paint()},__getEventNode:function(t,e,n){var r=this.__nodeList;for(let i=0;i<r.length;i++){let o=r[i];if(o.__MSID==t&&o.__stateID==e&&o.__eventName==n)return o}return null},__getStatesNode:function(t){var e=this.__nodeList;for(let n=0;n<e.length;n++){let r=e[n];if(r.__MSID==t&&"STATES"==r.__nodeType)return r}return null},__updateDataListState:function(t){for(let n=0;n<t.length;n++)for(let r=0;r<this.__task.taskCfg.dataList.length;r++){var e=this.__task.taskCfg.dataList[r];if(e.id==t[n].gdid&&e.MSID==t[n].MSID){if(t[n].error){e.state=p;let r=this.__getEventNode(e.MSID,e.stateID,e.eventName);r.__state=e.state,r.__gdid=null,this.__updateNodeState(r),$.gritter.add({title:"Warning:",text:"Dispatch data failed!<br><pre>"+JSON.stringify(t[n].error,null,4)+"</pre>",sticky:!1,time:2e3})}else{e.state=l;let t=this.__getEventNode(e.MSID,e.stateID,e.eventName);t.__state=e.state,t.__gdid=e.id,this.__updateNodeState(t)}break}}},__updateDataState:function(t,e){if(e){let t=this.__getEventNode(e.MSID,e.stateID,e.eventName);t&&(t.__state=e.state,t.__gdid=e.id,t.__isInput=e.isInput,this.__updateNodeState(t))}else for(let e=0;e<this.__task.taskCfg.dataList.length;e++){var n=this.__task.taskCfg.dataList[e];if(n.MSID==t.MSID&&t.stateID==n.stateID&&t.eventName==n.eventName){n.state=t.state;let e=this.__getEventNode(n.MSID,n.stateID,n.eventName);e.__state=n.state,e.__gdid=n.id,e.__isInput=n.isInput,this.__updateNodeState(e);break}}},__updateByDispatchedRst:function(t){},__updateByDownloadedRst:function(t){},registerSocket:function(){var t=this;socket=i("/integrate/task"),socket.on("connect",function(){console.log("socket connected to server"),socket.emit("dispatch room",t.__task._id)}),socket.on("disconnect",function(){console.log("disconnected")}),socket.on("error",function(t){console.log(JSON.parse(t))}),socket.on("data dispatched",function(e){e=JSON.parse(e),console.log("data dispatched",e),e.error?$.gritter.add({title:"Warning:",text:"Dispatch data failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3}):t.__updateDataListState(e.dispatchRst)}),socket.on("data downloaded",function(e){e=JSON.parse(e),console.log("data downloaded",e),e.error?$.gritter.add({title:"Warning:",text:"Download data failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3}):t.__updateDataState(e.downloadRst)}),socket.on("service starting",function(e){if(e=JSON.parse(e),console.log("service starting",e),e.error)$.gritter.add({title:"Warning:",text:"Start service failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3});else{var n=t.__getStatesNode(e.MSinsID);n.__state=m,t.__updateNodeState(n)}}),socket.on("service started",function(e){e=JSON.parse(e),console.log("service started",e);let n=t.__getStatesNode(e.MSinsID);e.error?(n.__state=w,t.__updateNodeState(n),$.gritter.add({title:"Warning:",text:"Dispatch data failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3})):(n.__state=b,t.__updateNodeState(n))}),socket.on("service stoped",function(e){if(e=JSON.parse(e),console.log("service stoped",e),e.error)$.gritter.add({title:"Warning:",text:"Dispatch data failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3});else{var n=t.__getStatesNode(e.MSinsID);n.__state=e.MSState,t.__updateNodeState(n),t.__task.taskCfg.dataList=t.__task.taskCfg.dataList.concat(e.newDataList);for(let n=0;n<e.newDataList.length;n++)t.__updateDataState(null,e.newDataList[n])}}),socket.on("update task state",function(t){t=JSON.parse(t),console.log("update task state",t),t.error&&__addNotice(__NoticeType.warning,"<pre>"+JSON.stringify(t.error,null,4)+"</pre>");var e=t.taskState;e==g?$.gritter.add({title:"Notice:",text:"Task finished!",sticky:!1,time:2e3}):e==d?$.gritter.add({title:"Notice:",text:"Task run to the end, please upload the essential input data to continue!",sticky:!1,time:2e3}):e==h?$.gritter.add({title:"Warning:",text:"Task collapsed. Maybe caused by unsuited input data or model error!",sticky:!1,time:2e3}):e==v&&$.gritter.add({title:"Notice:",text:"Task paused, please cancel the break points to continue!",sticky:!1,time:2e3})})}}})();e.exports=u},{"bson-objectid":7,lodash:29,querystring:41,"socket.io-client":42,xmldom:56,xpath:59}],62:[function(t,e,n){var r,i;e.exports=(r=null,i=null,{init:function(){new this.networkList("model-networkList"),new this.networkList("data-networkList"),r=$$("mylist-model-networkList"),i=$$("mylist-data-networkList"),this.bindSubmit()},networkList:function(t){var e,n,r=function(){$$("mylist-"+t).add({host:$$("myform-"+t).getValues().host,port:$$("myform-"+t).getValues().port})},i=function(){var e=$$("mylist-"+t).getSelectedId();webix.confirm({title:"Delete",text:"Are you sure you want to delete the selected item?",callback:function(n){n&&$$("mylist-"+t).remove(e)}})};return e=$(".networkList").width(),n=webix.ui({container:t,width:e,rows:[{view:"toolbar",id:"mybar-"+t,elements:[{view:"button",value:"Add",width:70,click:r},{view:"button",value:"Delete",width:70,click:i}]},{cols:[{view:"form",id:"myform-"+t,width:200,elements:[{view:"text",name:"host",placeholder:"Host"},{view:"text",name:"port",placeholder:"Port"}]},{view:"list",id:"mylist-"+t,template:"#host# : #port#",select:!0,height:400,data:[]}]}]}),$$("mylist-"+t).attachEvent("onAfterSelect",function(e){$$("myform-"+t).setValues({title:$$("mylist-"+t).getItem(e).host,year:$$("mylist-"+t).getItem(e).port})}),n},adjustStyle:function(){},__exportData:function(){var t=[],e=[],n={},o=$("#networkInfo-form").serializeArray();for(let t=0;t<o.length;t++)n[o[t].name]=o[t].value;for(var a=r.getFirstId();a;){var s=r.getItem(a);t.push({host:s.host,port:s.port}),a=r.getNextId(a)}for(var u=i.getFirstId();u;){var c=i.getItem(u);e.push({host:c.host,port:c.port}),u=i.getNextId(u)}return{networkInfo:n,modelServices:t,dataServices:e}},bindSubmit:function(){var t=this;$("#networkInfo-form").validate({onfocusout:function(t){$(t).valid()},focusInvalid:!0,submitHandler:function(e){var n=t.__exportData();$.ajax({url:"/integration/network",type:"POST",data:JSON.stringify(n),contentType:"application/json;charset=utf-8",dataType:"json"}).done(function(t){t.error?__addNotice(__NoticeType.warning,"Fail to create a new integrate network!<br><pre>"+JSON.stringify(t.error,null,4)+"</pre>"):__addNotice(__NoticeType.notice,"Create integrate network success!")}).fail(function(t){__addNotice(__NoticeType.warning,"Fail to create a new integrate network!<br><pre>"+JSON.stringify(t,null,4)+"</pre>")})}})}})},{}],63:[function(t,e,n){var r=t("./CanvasJS");e.exports=(__HeaderHeight=40,__SubHeaderHeight=40,__webixModelList=null,__webixDataList=null,__webixSelectedModelList=null,__webixSelectedDataMapList=null,__webixSelectedDataRefactorList=null,adjustWebixTreeHeight=(t=>{let e=$($$(t).$view).find(".webix_scroll_cont").height();e<400&&($$(t).define("height",e),$$(t).resize())}),onTreeItemChecked=((t,e,n)=>{t.attachEvent("onItemClick",function(n){let r=!1,i=this.getChecked();for(let t=0;t<i.length;t++)if(i[t]==n){r=!0;break}r?this.uncheckItem(n):this.checkItem(n),e&&(t.getItem(n).open?t.close(n):t.open(n))}),t.attachEvent("onItemCheck",function(t){0==this.getChecked().length?$(n.$view).find("button").attr("disabled",!0):$(n.$view).find("button").attr("disabled",!1)})}),getServiceListDetail=((t,e,n)=>{$("#global-loading-div").show(),$.ajax({url:"/integration/network/serviceListDetail?type="+t,type:"GET",dataType:"json",data:{services:_.map(e,t=>({_id:t._id,host:t.host,port:t.port}))}}).done(function(t){return $("#global-loading-div").hide(),_.map(e,e=>{_.map(t.serviceListDetail,t=>{e._id===t.detail._id&&(t.detail.MS=e)})}),n(null,t.serviceListDetail)}).fail(function(t){return $("#global-loading-div").hide(),__addNotice(__NoticeType.warning,"Get services detail information failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>"),n(t)})}),ajaxGetServices=((t,e)=>{"model"==t?formID="#div-model-Node form":"data"!=t&&"data map"!=t&&"data refactor"!=t||(formID="#div-data-Node form");let n=__serialize(formID);$.ajax({url:`/integration/network/services?type=${t}&${$(formID).serialize()}`,type:"GET",dataType:"json"}).done(function(r){if($("#global-loading-div").hide(),r.error)return __addNotice(__NoticeType.warning,"Fail to get "+t+" services of '"+n.host+"'!<br><pre>"+JSON.stringify(r.error,null,4)+"</pre>"),e(r.error);{__addNotice(__NoticeType.notice,"Fetch "+t+" services successed!");let i={host:n.host,port:n.port,serviceList:r.services};return e(null,t,i)}}).fail(function(n){return $("#global-loading-div").hide(),__addNotice(__NoticeType.warning,"Fetch "+t+" services failed!<br><pre>"+JSON.stringify(n,null,4)+"</pre>"),e(n)})}),{__buildTab12List:function(t,e,n){let r=this;if("model"==t){let t=__webixModelList.getChildViews();for(let e=0;e<t.length;e++)t[e].collapse();let n="#value#",i=__webixModelList,o=(__webixSelectedModelList,e.serviceList),a=$$("div-model-list-accordion").config.width,s={id:e.host+":"+e.port,view:"accordionitem",header:e.host+":"+e.port,headerHeight:__HeaderHeight,headerAltHeight:__HeaderHeight,body:{rows:[{rows:[{id:e.host+"-"+e.port+"-filter",view:"text",placeholder:"Filter",width:a},{id:e.host+"-"+e.port+"-tree",view:"tree",select:!0,multiselect:!0,autoheight:!0,maxHeight:400,editable:!1,data:o,filterMode:{showSubItems:!0,level:1},template:"{common.checkbox()}<span>"+n+"</span>"}]},{margin:15,cols:[{},{id:e.host+"-"+e.port+"-btn",view:"button",value:"Add",width:80,inputWidth:60}]}]}};i.addView(s),adjustWebixTreeHeight(e.host+"-"+e.port+"-tree"),$$(e.host+"-"+e.port+"-filter").attachEvent("onTimedKeyPress",function(){$$(e.host+"-"+e.port+"-tree").filter(n,this.getValue())});let u=$$(e.host+"-"+e.port+"-btn"),c=$$(e.host+"-"+e.port+"-tree");onTreeItemChecked(c,!1,u),u.attachEvent("onItemClick",function(){r.__addSelectedClick("model",c,e.host,e.port)})}else if("data"==t){let t=__webixDataList.getChildViews();for(let e=0;e<t.length;e++)t[e].collapse();let n="#name#",i=e.serviceList.dataMapServices,o=e.serviceList.refactorServices;null!=i.error&&__addNotice(__NoticeType.warning,"Fetch data services failed!<br><pre>"+JSON.stringify(i.error,null,4)+"</pre>"),null!=o.error&&__addNotice(__NoticeType.warning,"Fetch data services failed!<br><pre>"+JSON.stringify(o.error,null,4)+"</pre>");let a=i.error?{template:"Error"}:0===i.data.length?{template:"No data"}:{id:e.host+"-"+e.port+"-data-map-tree",view:"tree",select:!0,type:{height:"auto"},multiselect:!0,minHeight:150,autoheight:!0,editable:!1,data:i.data,filterMode:{showSubItems:!0,level:1},template:" {common.checkbox()}<span>"+n+"</span>"},s=o.error?{template:"Error"}:0===o.data.length?{template:"No data"}:{id:e.host+"-"+e.port+"-data-refactor-tree",view:"tree",template:(t,e)=>1===t.$level?e.icon(t,e)+"<span>"+t.name+"</span>":e.icon(t,e)+e.checkbox(t,e)+"<span>"+t.name+"</span>",editable:!1,select:!0,type:{height:"auto"},multiselect:!0,minHeight:150,autoheight:!0,data:_.map(o.data,t=>({id:t._id,name:t.name,webix_kids:!0})),filterMode:{showSubItems:!0,level:1}},u={id:e.host+":"+e.port,view:"accordionitem",header:e.host+":"+e.port,headerHeight:__HeaderHeight,headerAltHeight:__HeaderHeight,adjust:!0,body:{rows:[{height:400,rows:[{rows:[{autoheight:!0,template:"Data Map List"},a]},{view:"resizer"},{rows:[{autoheight:!0,template:"Data Refactor List"},s]}]},{minHeight:40,cols:[{},{id:e.host+"-"+e.port+"-data-btn",view:"button",value:"Add",width:80,inputWidth:60}]}]}};__webixDataList.addView(u),adjustWebixTreeHeight(e.host+"-"+e.port+"-data-map-tree"),adjustWebixTreeHeight(e.host+"-"+e.port+"-data-refactor-tree");let c=$$(e.host+"-"+e.port+"-data-btn"),l=$$(e.host+"-"+e.port+"-data-map-tree"),f=$$(e.host+"-"+e.port+"-data-refactor-tree");null==i.error&&0!=i.data.length&&onTreeItemChecked(l,!1,c),!o.error&&o.data.length&&(onTreeItemChecked(f,!0,c),webix.extend(f,webix.ProgressBar),f.attachEvent("onDataRequest",t=>{f.getItem(t),f.showProgress(),webix.delay(()=>{webix.ajax().get("/integration/network/dataRefactorMethods",{host:e.host,port:e.port,id:t}).then(e=>{f.hideProgress();let n=e.json();if(n.error)__addNotice(__NoticeType.warning,"Fetch data refactor methods failed!<br><pre>"+JSON.stringify(n.error,null,4)+"</pre>");else{_.isArray(n.methods.Method)||(n.methods.Method=[n.methods.Method]);let e=_.map(n.methods.Method,e=>({method:e,id:e.$.name,name:e.$.name,refactorId:t}));f.parse({parent:t,data:e})}}).fail(t=>{f.hideProgress(),__addNotice(__NoticeType.warning,"Fetch data refactor methods failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>")})})})),c.attachEvent("onItemClick",function(){r.__addSelectedClick("data map",l,e.host,e.port),r.__addSelectedClick("data refactor",f,e.host,e.port)})}n&&n()},__addSelectedClick:function(t,e,n,r){let i,o=this;var a;getNewItems=(()=>{let o=[],a=e.getChecked();for(let u=0;u<a.length;u++){let c=!1,l=e.getItem(a[u]);if(1===l.$level&&"data refactor"===t)continue;let f=i.getFirstId();for(;f;){if(i.getItem(f)._id==l._id){c=!0;break}f=i.getNextId(f)}if(!c){l.serviceType=t,l.host=n,l.port=r;var s=_.cloneDeep(l);delete s.$count,delete s.$level,delete s.$parent,delete s.id,o.push(s)}}return 0==o.length?(__addNotice(__NoticeType.notice,`No ${t} services selected!`),[]):o}),"model"==t?(i=__webixSelectedModelList,a=getNewItems(),getServiceListDetail(t,a,(e,n)=>{for(let e=0;e<n.length;e++)n[e].error?__addNotice(__NoticeType.warning,"Failed to get service detail!<br><pre>"+JSON.stringify(n[e].error)+"</pre>"):(n[e].detail.serviceType=t,i.add(n[e].detail));i.refresh(),$("#webix-AggreMS-list .webix_list_item").attr("draggable",!0),o.__Dnd().init(),__addNotice(__NoticeType.notice,"Add model services succeed!")})):("data map"==t?i=__webixSelectedDataMapList:"data refactor"==t&&(i=__webixSelectedDataRefactorList),a=getNewItems(),_.map(a,t=>{i.add(t)}),i.refresh(),$("#webix-AggreMS-list .webix_list_item").attr("draggable",!0),o.__Dnd().init(),__addNotice(__NoticeType.notice,`Add ${t} services succeed!`))},__Dnd:function(){return{init:function(){$("#canvas").unbind(),this.src=$(".webix_list_item"),this.dst=$("#canvas"),$(this.src).on("dragstart",this.onDragStart),$(this.dst).on("dragenter",this.onDragEnter),$(this.dst).on("dragover",this.onDragOver),$(this.dst).on("dragleave",this.onDragLeave),$(this.dst).on("drop",this.onDrop)},onDragStart:function(t){function e(t,e){for(;void 0!=t&&null!=t&&"BODY"!=t.tagName.toUpperCase();){if(t==e)return!0;t=t.parentNode}return!1}console.log("in drag start");let n=__webixSelectedModelList.$view,r=__webixSelectedDataMapList.$view,i=__webixSelectedDataRefactorList.$view,o=null;e(t.target,n)?o="model":e(t.target,r)?o="data map":e(t.target,i)&&(o="data refactor");let a=$(t.target).index()+"---"+o;return t.dataTransfer=t.originalEvent.dataTransfer,t.dataTransfer.setData("text/plain",a),!0},onDragEnter:function(t){return!0},onDragLeave:function(t){return!0},onDragOver:function(t){return!1},onDrop:function(t){console.log("in drag stop"),t.dataTransfer=t.originalEvent.dataTransfer;let e=t.dataTransfer.getData("text/plain");(e=e.split("---"))[0]=+e[0];let n=e[1],i=null;"model"==n?i=__webixSelectedModelList:"data map"==n?i=__webixSelectedDataMapList:"data refactor"==n&&(i=__webixSelectedDataRefactorList);let o=i.getItem(i.getIdByIndex(e[0]));r.addServiceRole(o)}}},init:function(){let t=this;webix.locale.pager={first:"<<",last:">>",next:">",prev:"<"},__webixModelList=new this.initTab12("div-model-list"),__webixDataList=new this.initTab12("div-data-list"),this.initTab3(),this.requestServiceList("model",function(e,n){e||t.__buildTab12List("model",n)}),this.requestServiceList("data",function(e,n){e||t.__buildTab12List("data",n)})},initTab12:function(t){return function(){let e=null,n=null;return e=$("#div-model-Node .sidebar-body").width(),n=window.innerHeight-163,webix.ui({container:t,view:"scrollview",scroll:!1,width:e,height:n,body:{rows:[{id:t+"-accordion",view:"accordion",multi:!0,rows:[]}]}}),$$(t+"-accordion")}()},requestServiceList:function(t,e){let n=null;"model"==t?n="#div-model-Node form":"data"==t&&(n="#div-data-Node form"),$(n).validate({onfocusout:function(t){$(t).valid()},focusInvalid:!0,submitHandler:function(n){__serialize(n),$("#global-loading-div").show(),ajaxGetServices(t,function(t,n,r){t?e(t):e(null,r)})}})},initTab3:function(){let t=$("#div-model-Node h4").height(),e=$("#div-model-Node h4").css("padding-top");e=+e.replace("px","");let n=$("#div-model-Node h4").css("margin-top");n=+n.replace("px","");let r=$("#div-AggreMS h").width()-1,i=window.innerHeight-t-2*e-2*n-20;webix.ui({id:"tab3",type:"space",container:"webix-AggreMS-list",view:"scrollview",scroll:"xy",width:r,height:i,body:{id:"services-accordion",view:"accordion",width:r,multi:!0,rows:[{id:"model-services-accordion-item",view:"accordionitem",header:"Selected model services",headerHeight:__HeaderHeight,headerAltHeight:__HeaderHeight,width:r,collapsed:!1,body:{id:"model-services-list",view:"list",autoheight:!0,yCount:6,select:!1,multiselect:!1,scroll:!0,editable:!1,data:[],template:function(t){return t.MS.ms_model.m_name}}},{id:"data-map-services-accordion-item",view:"accordionitem",header:"Selected data map services",headerHeight:__HeaderHeight,headerAltHeight:__HeaderHeight,width:r,collapsed:!1,body:{id:"data-map-services-list",view:"list",autoheight:!0,yCount:6,select:!1,multiselect:!1,scroll:"y",editable:!1,data:[],template:function(t){return t.name}}},{id:"data-refactor-services-accordion-item",view:"accordionitem",header:"Selected data refactor services",headerHeight:__HeaderHeight,headerAltHeight:__HeaderHeight,width:r,maxHeight:300,collapsed:!1,body:{id:"data-refactor-services-list",view:"list",select:!0,multiselect:!1,scroll:"y",editable:!1,data:[],template:function(t){return t.name}}}]}}),__webixSelectedModelList=$$("model-services-list"),__webixSelectedDataMapList=$$("data-map-services-list"),__webixSelectedDataRefactorList=$$("data-refactor-services-list")},importLayoutBySolution:function(t){let e=this;this.init();let n=[],r=t.solutionCfg.serviceList;for(let t=0;t<r.length;t++){let e=!1;for(let i=0;i<n.length;i++)n[i].host==r[t].host&&n[i].port==r[t].port&&(e=!0);e||n.push({host:r[t].host,port:r[t].port,serviceType:r[t].serviceType})}window.importNode={count:n.length,index:0};for(let t=0;t<n.length;t++){let i=n[t].serviceType;"model"==i?($("#model-host").attr("value",n[t].host),$("#model-port").attr("value",n[t].port),n[t].widgetType="",n[t].serviceName="MS",n[t].submitType="model"):($("#data-host").attr("value",n[t].host),$("#data-port").attr("value",n[t].port),n[t].serviceName="DS",n[t].submitType="data-map","data map"==i?n[t].widgetType="-data-map":"data refactor"==i&&(n[t].widgetType="-data-refactor")),ajaxGetServices(i,function(i,o,a){i?console.log(i):e.__buildTab12List(o,a,function(){let i=$$(n[t].host+"-"+n[t].port+n[t].widgetType+"-tree");for(let e=0;e<r.length;e++)if(r[e].host==n[t].host&&r[e].port==n[t].port){let o=i.getFirstId();for(;o;){if(item=i.getItem(o),item._id==r[e][n[t].serviceName]._id){i.checkItem(o);break}o=i.getNextId(o)}}let o=$$(n[t].host+"-"+n[t].port+n[t].widgetType+"-btn");$(o.$view).click(function(r){r.preventDefault(),r.stopPropagation(),e.__addSelectedClick(n[t].serviceType,i,n[t].host,n[t].port)}),$(o.$view).click()})})}}})},{"./CanvasJS":61}],64:[function(t,e,n){var r,i,o=(r=null,i=null,{init:function(){var t=this;$.ajax({url:"/integration/solution/all",data:{isComplete:!1},type:"GET",dataType:"json"}).done(function(e){e.error?$.gritter.add({title:"Warning:",text:"Get solution library failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3}):(i=e.solutionsSegment,_.map(i,t=>{t.authorName=_.reduce(t.author,(t,e,n)=>t+=e.username?e.username+", ":"",""),t.authorName=t.authorName.substr(0,t.authorName.length-2)}),t.__buildSolutionList())}).fail(function(t){$.gritter.add({title:"Warning:",text:"Get solution library failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>",sticky:!1,time:2e3})})},__buildSolutionList:function(){var t=$("#solution-list").width(),e=[{id:"name",header:["Name",{content:"textFilter",placeholder:"Filter"}],adjust:!0},{id:"authorName",header:["Author",{content:"textFilter",placeholder:"Filter"}],adjust:!0},{id:"desc",header:"Description",minWidth:150,fillspace:!0},{id:"time",header:"Create Time",adjust:!0}];e.push({id:"operate",header:"Operate",template:function(t){return"<div><button class='btn btn-default btn-xs solution-operation-btn solution-detail-btn' title='solution detail'><i class='fa fa-info'></i></button><button class='btn btn-default btn-xs solution-operation-btn solution-edit-btn' title='edit solution'><i class='fa fa-pencil-square'></i></button><button class='btn btn-default btn-xs solution-operation-btn solution-configure-btn' title='configure this solution as a task'><i class='fa fa-cogs'></i></button><button class='btn btn-default btn-xs solution-operation-btn solution-delete-btn' title='delete solution'><i class='fa fa-trash'></i></button></div>"},adjust:!0}),webix.locale.pager={first:"<<",last:">>",next:">",prev:"<"},r=webix.ui({container:"solution-list",view:"datatable",pager:{template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",container:"solution-list-pager",size:12,group:5,adjust:!0},width:t,height:600,minheight:600,autoheight:!0,resizeColumn:!0,select:!1,editable:!1,columns:e,data:i}),this.__bindDetailBtnEvent(),this.__bindEditBtnEvent(),this.__bindDeleteBtnEvent(),this.__bindConfigureBtnEvent(),this.__bindResizeEvent()},__bindResizeEvent:function(){var t=function(){r.define("width",$("#solution-list").width()),r.resize()};$(".header-section .toggle-btn").on("click",function(){t()}),window.onresize=function(){t()}},__bindDetailBtnEvent:function(){r.on_click["solution-detail-btn"]=function(t,e,n){var r=this.getItem(e.row);window.open("/integration/solution/detail?_id="+r._id)}},__bindEditBtnEvent:function(){r.on_click["solution-edit-btn"]=function(t,e,n){var r=this.getItem(e.row);window.open("/integration/solution/edit?_id="+r._id)}},__bindConfigureBtnEvent:function(){r.on_click["solution-configure-btn"]=function(t,e,n){var r=this.getItem(e.row);window.open("/integration/task/new?solutionID="+r._id)}},__bindDeleteBtnEvent:function(){var t=this;r.on_click["solution-delete-btn"]=function(e,n,r){if(confirm("Are you sure to delete this solution?")){var i=this.getItem(n.row),o=n.row;$.ajax({url:"/integration/solution",data:{_id:i._id},type:"DELETE",dataType:"json"}).done(function(e){e.error?$.gritter.add({title:"Warning:",text:"Delete solution failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3}):(t.__deleteSolutionTableByID(o),$.gritter.add({title:"Notice:",text:"Delete solution success!",sticky:!1,time:2e3}))}).fail(function(t){$.gritter.add({title:"Warning:",text:"Delete solution failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>",sticky:!1,time:2e3})})}}},__deleteSolutionTableByID:function(t){r.remove(t)}});e.exports=o},{}],65:[function(t,e,n){var r,i,o=(r=null,i=null,{init:function(){var t=this;$.ajax({url:"/integration/task/all",data:{isComplete:!1},type:"GET",dataType:"json"}).done(function(e){e.error?$.gritter.add({title:"Warning:",text:"Get task list failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3}):(i=e.tasksSegment,_.map(i,t=>{t.authorName=_.reduce(t.author,(t,e,n)=>t+=e.username?e.username+", ":"",""),t.authorName=t.authorName.substr(0,t.authorName.length-2)}),t.__buildTasksList())}).fail(function(t){$.gritter.add({title:"Warning:",text:"Get task list failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>",sticky:!1,time:2e3})})},__buildTasksList:function(){var t=$("#task-list").width(),e=[{id:"name",header:["Name",{content:"textFilter",placeholder:"Filter"}],adjust:!0},{id:"authorName",header:["Author",{content:"textFilter",placeholder:"Filter"}],adjust:!0},{id:"desc",header:"Description",minWidth:150,fillspace:!0},{id:"time",header:"Create Time",adjust:!0}];e.push({id:"operate",header:"Operate",template:function(t){return"<div><button class='btn btn-default btn-xs task-operation-btn task-detail-btn' title='task detail'><i class='fa fa-info'></i></button><button class='btn btn-default btn-xs task-operation-btn task-edit-btn' title='edit task'><i class='fa fa-pencil-square'></i></button><button class='btn btn-default btn-xs task-operation-btn task-delete-btn' title='delete task'><i class='fa fa-trash'></i></button></div>"},adjust:!0}),webix.locale.pager={first:"<<",last:">>",next:">",prev:"<"},r=webix.ui({container:"task-list",view:"datatable",pager:{template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",container:"task-list-pager",size:12,group:5,width:t},width:t,height:600,minheight:600,autoheight:!0,resizeColumn:!0,select:!1,editable:!1,columns:e,data:i}),this.__bindInvokeEvent(),this.__bindEditBtnEvent(),this.__bindDeleteBtnEvent(),this.__bindResizeEvent()},__bindResizeEvent:function(){var t=function(){r.define("width",$("#task-list").width()),r.resize()};$(".header-section .toggle-btn").on("click",function(){t()}),window.onresize=function(){t()}},__bindInvokeEvent:function(){r.on_click["task-detail-btn"]=function(t,e,n){var r=this.getItem(e.row);window.open("/integration/task/detail?_id="+r._id)}},__bindEditBtnEvent:function(){r.on_click["task-edit-btn"]=function(t,e,n){var r=this.getItem(e.row);window.open("/integration/task/edit?_id="+r._id)}},__bindDeleteBtnEvent:function(){var t=this;r.on_click["task-delete-btn"]=function(e,n,r){if(confirm("Are you sure to delete this task?")){var i=this.getItem(n.row),o=n.row;$.ajax({url:"/integration/task",data:{_id:i._id},type:"DELETE",dataType:"json"}).done(function(e){e.error?$.gritter.add({title:"Warning:",text:"Delete task failed!<br><pre>"+JSON.stringify(e.error,null,4)+"</pre>",sticky:!1,time:2e3}):(t.__deleteTaskTableByID(o),$.gritter.add({title:"Notice:",text:"Delete task success!",sticky:!1,time:2e3}))}).fail(function(t){$.gritter.add({title:"Warning:",text:"Delete task failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>",sticky:!1,time:2e3})})}}},__deleteTaskTableByID:function(t){r.remove(t)}});e.exports=o},{}],66:[function(t,e,n){var r,i,o,a=t("qs");e.exports=(i=null,o=null,{init:function(){this.initData(),this.buildLeft()},initData:function(){var t=$("#error").html();if(""!=t)return t=JSON.parse(t),void __addNotice(__NoticeType.warning,"Fetch visualization service failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>");var e=$("#visualService").html();""!=e?i=JSON.parse(e):__addNotice(__NoticeType.warning,"Fetch visualization service failed!")},buildLeft:function(){var t=this,e=[],n=i.DVM.Params.Item;n instanceof Array||(n=[n]);for(let t=0;t<n.length;t++){let r=n[t];r.name="default group",null!=n[t]._$&&null!=n[t]._$.name&&(r.name=n[t]._$.name),e.push(r)}var r=$("#param-list").width();o=webix.ui({id:"leftWidget",container:"param-list",scroll:!1,padding:20,width:r,minHeight:500,autoheight:!0,rows:[{view:"template",template:"Supported parameter list",type:"header"},{id:"paramList",view:"list",height:750,yCount:12,select:!0,multiselect:!1,scroll:!0,editable:!1,data:e,template:function(t){return t.name},on:{onItemClick:function(e,n,r){t.__buildRight(this.getItem(e))}}}]}),this.__bindOnresize("param-list",o);var a=$$("paramList").getFirstId();null!=a&&""!=a&&$$("paramList").getItemNode($$("paramList").getFirstId()).click(),-1!=window.location.href.indexOf("gdid=")&&__addNotice(__NoticeType.notice,"Please select relative input parameter group by input data schema!")},__bindOnresize:function(t,e){window.onresize=function(){e.define("width",$("#"+t).width()),e.resize()}},__buildRight:function(t){if($("#param-detail").children().hide(),$("#"+t.id).length)return void $("#"+t.id).show();$("#param-detail").append($('<div id="'+t.id+'"></div>'));var e=t.id;"number"==typeof e&&(e=e.toString());var n=$("#param-detail").width(),o=i.DVM._$.wkname,s="",u="",c=i.DVM.Localizations.Localization;c instanceof Array||(c=[c]);for(let t=0;t<c.length;t++){if("EN_US"==c[t]._$.local){s=c[t].Abstract;break}u=c[t].Abstract}""==s&&(s=u);var l=t.Param;l instanceof Array||(l=[l]),window[e]={};for(let t=0;t<l.length;t++)window[e][l[t]._$.name]=null;webix.ui({id:"rightWidget",container:e,width:n,scroll:!1,autoheight:!0,padding:20,rows:[{autoheight:!0,view:"template",template:o,type:"header"},{padding:10,rows:[{autoheight:!0,borderless:!0,template:"<p><b>Method Description:</b> "+s+"</p><p><b>Paramter List:</b></p>"},{view:"tabbar",autoheight:!0,autowidth:!0,css:"tab-cell",id:"schema-tabbar",value:l[0]._$.name,options:function(){var t=[];for(let e=0;e<l.length;e++)t.push({value:l[e]._$.name,id:l[e]._$.name});return t}()},{autoheight:!0,css:"tab-cell",cells:function(){var t=[];for(let a=0;a<l.length;a++){var n=i.schemas,r=l[a]._$.schema,o="";for(let t=0;t<n.length;t++)if(r==n[t].fname){o="<pre>"+(o=(o=(o=(o=n[t].value).replace(/\"/g,"&quot")).replace(/</g,"&lt")).replace(/>/g,"&gt"))+"</pre>";break}t.push({css:"tab-cell",autoheight:!0,type:"clean",id:l[a]._$.name,rows:[{autoheight:!0,template:"<p><b>Type:</b> "+l[a]._$.type+"</p><p><b>Description:</b> "+l[a]._$.description+"</p>"+o},{id:e+"upload-data",height:130,template:'<div style="margin: 5px auto"><p><b>Upload data:</b></p><input id="'+e+"-"+l[a]._$.name+'-upload-data" type="file" name="myfile" class="file upload-file"></div>'},{id:e+"select-data",autoheight:!0,template:'<div style="margin: 5px auto"><p style="margin: 5px auto"><b>Select data:</b></p><button class="btn btn-primary" id="'+e+"-"+l[a]._$.name+'-select-data">Select</button></div>'}]})}return t}()},{autoheight:!0,borderless:!0,template:'<div style="text-align: center;margin: 15px auto;"><button style="margin: auto 20px; min-width: 100px;" class="btn btn-success" disabled id="'+e+'-call-btn">Visualization</button><button style="margin: auto 20px; min-width: 100px;" class="btn btn-default" id="'+e+'-cancel-btn">Cancel</button></div>'}]}]}),$("#"+e+" .fileinput-remove-button").on("click",function(t){$("#"+e+"-call-btn").attr("disabled",!0)}),$(".upload-file").fileinput({uploadUrl:"/integration/data",aploadAsync:!0,showPreview:!1,showUpload:!0,showRemove:!0,showClose:!0,showUploadedThumbs:!1,autoReplace:!0,maxFileCount:1,uploadLabel:"",removeLabel:"",cancelLabel:"",browseLabel:""}).on("fileuploaded",function(t,e,n,r){var i=e.response;if("suc"==i.res){var o=$(this).attr("id").match(/(.+)-(.+)-upload-data/),a=o[1],s=o[2];window[a][s]=i.gd_id;var u=!0;for(let t in window[a])if(null==window[a][t]){u=!1,$("#"+a+"-call-btn").attr("disabled",!0);break}u&&$("#"+a+"-call-btn").attr("disabled",!1),$.gritter.add({title:"Notice:",text:"Upload data success!",sticky:!1,time:2e3})}else $.gritter.add({title:"Warning:",text:"Upload data failed!",sticky:!1,time:2e3})}).on("fileerror",function(t,e){$.gritter.add({title:"Warning:",text:"<pre>"+JSON.stringify(error,null,4)+"</pre>",sticky:!1,time:2e3})});var f=window.location.search;let p=a.parse(f,{ignoreQueryPrefix:!0});(r=p["data-service"])&&($$(e+"select-data").hide(),$$(e+"upload-data").hide(),1==l.length&&(window[e][l[0]._$.name]=r,$("#"+e+"-call-btn").attr("disabled",!1))),this.__bindCall(e),$("#"+e+"-cancel-btn").click(function(t){$("#"+e+" .fileinput-remove-button").click(),window[e]={},$("#"+e+"-call-btn").attr("disabled",!0)})},__bindCall:function(t){$("#"+t+"-call-btn").click(function(e){var n=[],r=$$("paramList").getIndexById($$("paramList").getSelectedId());if(-1!=r){var o="/visualization/"+i._id+"/index.html?index="+r,a=1;for(let e in window[t]){if(null==window[t][e])return;n.push({name:e,gdid:window[t][e]}),o+="&filename"+a+"="+window[t][e],a++}window.location.href=o}})}})},{qs:35}],67:[function(t,e,n){var r,i,o=t("qs");e.exports=(r=null,i=null,{init:function(){this.buildTable();var t=window.location.search;let e=o.parse(t,{ignoreQueryPrefix:!0});(i=e["data-service"])&&__addNotice(__NoticeType.notice,"Please select the relative visualization tool!")},buildTable:function(){var t=$("#error").html();if(""!=t)return t=JSON.parse(t),void __addNotice(__NoticeType.warning,"Fetch visualization library failed<br><pre>"+JSON.stringify(t,null,4)+"</pre>");var e=$("#visualList");if(0!=(e=JSON.parse($(e).html())).length){var n=$("#visual-table").width(),i=[{id:"wkname",header:["Name",{content:"textFilter",placeholder:"Filter"}],adjust:!0},{id:"version",header:["Version",{content:"textFilter",placeholder:"Filter"}],adjust:!0},{id:"enAbstract",header:["Abstract",{content:"textFilter",placeholder:"Filter"}],minWidth:150,fillspace:!0},{id:"time",header:["Deploy Time",{content:"textFilter",placeholder:"Filter"}],adjust:!0}];i.push({id:"operate",header:"Operate",template:function(t){return"<div><button class='btn btn-default btn-xs invoke-visualization-btn table-operate' title='invoke visualization'><i class='fa fa-cogs'></i></button></div>"},adjust:!0}),webix.locale.pager={first:"<<",last:">>",next:">",prev:"<"},r=webix.ui({view:"datatable",container:"visual-table",pager:{template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",container:"visual-pager",size:12,group:5,width:n},columns:i,data:e,width:n,height:600,minheight:600,autoheight:!0,resizeColumn:!0,select:!1,editable:!1}),this.__bindInvokeEvent(),this.__bindResizeEvent(),this.__bindDeleteEvent()}else __addNotice(__NoticeType.notice,"There is no visualization tools available!")},__bindResizeEvent:function(){var t=function(){r.define("width",$("#visual-table").width()),r.resize()};$(".header-section .toggle-btn").on("click",function(){t()}),window.onresize=function(){t()}},__bindInvokeEvent:function(){r.on_click["invoke-visualization-btn"]=function(t,e,n){var r="/visualizations/"+this.getItem(e.row)._id;-1!==i&&(r+="?data-service="+i),window.open(r)}},__bindDeleteEvent:function(){r.on_click["delete-visualization-btn"]=function(t,e,n){if(confirm("Are you sure to delete this visualization tool?")){var i=this.getItem(e.row),o=e.row;$.ajax({url:"/visualizations",data:{_id:i._id},type:"DELETE",dataType:"json"}).done(function(t){t.error?__addNotice(__NoticeType.warning,"Delete visualization tool failed!<br><pre>"+JSON.stringify(t.error,null,4)+"</pre>"):(r.remove(o),__addNotice(__NoticeType.notice,"Delete visualization tool success!"))}).fail(function(t){__addNotice(__NoticeType.warning,"Delete visualization tool failed!<br><pre>"+JSON.stringify(t,null,4)+"</pre>")})}}}})},{qs:35}],68:[function(t,e,n){var r=t("./util"),i=null,o=null,a=null,s=null,u=null,c=null,l=null;u=t("./NetworkJS"),i=t("./CanvasJS"),o=t("./SolutionLibraryJS"),a=t("./TaskListJS"),s=t("./SolutionJS"),c=t("./VisualLibJS"),l=t("./VisualDetailJS"),$().ready(function(){for(var t in r)window[t]=r[t];var e=location.pathname,n=null,f=null;if("/integration/solution/new"==e)$("#saveas-solution-tool").remove(),i.init("edit","solution"),s.init();else if("/integration/solution"==e)o.init();else if("/integration/solution/detail"==e){if(i.init("view","solution"),!(n=$("#solution-detail").text().slice(1,-1))||""==n)return void $.gritter.add({title:"Warning:",text:"Can't find this solution",sticky:!1,time:2e3});n=JSON.parse(n),i.initImport("SOLUTION",n),i.importSolution()}else if("/integration/solution/edit"==e){if(i.init("edit","solution"),!(n=$("#solution-detail").text().slice(1,-1))||""==n)return void $.gritter.add({title:"Warning:",text:"Can't find this solution",sticky:!1,time:2e3});n=JSON.parse(n),s.importLayoutBySolution(n),i.initImport("SOLUTION",n),i.importSolution(),$("#toggle-model-node-sidebar-btn").click(),$("#toggle-cart-sidebar-btn").click()}else if("/integration/task"==e)a.init();else if("/integration/task/new"==e){if($("#saveas-task-tool").remove(),i.init("configure","task"),!(n=$("#solution-detail").text().slice(1,-1))||""==n)return void $.gritter.add({title:"Warning:",text:"Can't find this solution",sticky:!1,time:2e3});n=JSON.parse(n),i.initImport("SOLUTION",n),i.importSolution()}else if("/integration/task/detail"==e){if(i.init("view","task"),!(f=$("#task-detail").text().slice(1,-1))||""==f)return void $.gritter.add({title:"Warning:",text:"Can't find this solution",sticky:!1,time:2e3});f=JSON.parse(f),i.initImport("TASK",f),i.importTask()}else if("/integration/task/edit"==e){if(i.init("configure","task"),!(f=$("#task-detail").text().slice(1,-1))||""==f)return void $.gritter.add({title:"Warning:",text:"Can't find this solution",sticky:!1,time:2e3});f=JSON.parse(f),i.initImport("TASK",f),i.importTask()}else"/integration/network/new"==e?u.init():"/visualizations"==e?c.init():-1!==e.indexOf("/visualizations/")&&l.init()})},{"./CanvasJS":61,"./NetworkJS":62,"./SolutionJS":63,"./SolutionLibraryJS":64,"./TaskListJS":65,"./VisualDetailJS":66,"./VisualLibJS":67,"./util":69}],69:[function(t,e,n){e.exports={__NoticeType:{warning:"Warning:",notice:"Notice:"},__addNotice:function(t,e){var n=t.slice(0,-1);$.gritter.add({class_name:n,title:t,text:e,sticky:!1,time:2e3})},__serialize:function(t){var e={},n=$(t).serializeArray();for(let t=0;t<n.length;t++)e[n[t].name]=n[t].value;return e},__getElementLeft:function(t){for(var e=t.offsetLeft,n=t.offsetParent;null!==n;)e+=n.offsetLeft,n=n.offsetParent;return e},__getElementTop:function(t){for(var e=t.offsetTop,n=t.offsetParent;null!==n;)e+=n.offsetTop,n=n.offsetParent;return e},__getHiddenHeight:function(t){if(t.offsetHeight)return t.offsetHeight;var e=t.style.display,n=t.style.position,r=t.style.visibility;t.style.visibility="hidden",t.style.display="block",t.style.position="absolute";var i=t.offsetHeight;return t.style.display=e,t.style.position=n,t.style.visibility=r,i},__isTrue:function(t){switch(t){case 0:case"0":case"False":case"false":return!1;case 1:case"1":case"True":case"true":return!0}}}},{}]},{},[68]);